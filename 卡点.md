卡点 1：商品来源逻辑图

说明供应商商品 & 商家商品的差异与关系。

商品来源逻辑
│
├─ 供应商商品
│   ├─ 上传者：供应商
│   ├─ 定价：供货价（K）
│   ├─ 可供商家免费铺货使用
│   ├─ 审核后可挂奖池
│   ├─ 抽奖后系统自动结算供货价
│   └─ 库存由供应商维护
│
└─ 商家商品
    ├─ 上传者：商家
    ├─ 定价：商家自定义抽奖价（P）
    ├─ 可直接挂入奖池
    ├─ 抽奖后商家自发货/核销
    └─ 收益通过分润模板分配

🧱 卡点 2：奖池价与供货价挂钩逻辑图

说明奖池区间、抽奖价与供货价之间的匹配规则。

价池挂钩逻辑
│
├─ 奖池定义
│   ├─ 例：20元档 → 区间 [10,20]
│   ├─ 例：30元档 → 区间 [21,30]
│   └─ 每个奖池包含若干商品
│
├─ 商品（供货价 = K）
│   ├─ 若 K ∈ 奖池区间 → 可入池
│   ├─ 若 K < 最低价 → 不入池（防止太便宜）
│   ├─ 若 K > 最高价 → 不入池（防止出奖亏损）
│
└─ 抽奖价（P） = 奖池显示价
    ├─ 用户支付价
    ├─ 用于计算毛利池 M = P - K
    └─ 用于后续分润计算

🎰 卡点 3：抽奖展示与出奖逻辑图

解决混合来源奖品时展示和抽奖卡顿、逻辑不通的问题。

抽奖展示与出奖逻辑
│
├─ 奖池挂接
│   ├─ 混合来源奖品（供应商 + 商家）
│   ├─ 每个格子：
│   │   ├─ 奖品名 / 图片
│   │   ├─ 来源类型（内部记录）
│   │   ├─ 权重
│   │   └─ 库存
│
├─ 前端展示
│   ├─ 只展示奖品名 + 图片 + 抽奖价
│   ├─ 不展示来源、供货价、库存
│   └─ 所有奖品统一UI
│
└─ 后端抽奖逻辑
    ├─ 拉取奖池ID → 奖品数据
    ├─ 过滤库存为0的奖品
    ├─ 按权重计算中奖
    ├─ 写中奖记录 ns_prize
    └─ 判断来源类型：
        ├─ supplier → 生成供应商结算
        └─ merchant → 生成商家订单

💰 卡点 4：分润与结算逻辑图

展示抽奖价、供货价、毛利、分润的完整路径。

抽奖结算逻辑
│
├─ 用户支付价 P
│
├─ 成本价 K（供货价）
│
├─ 毛利池 M = P - K
│
├─ 分润模板拆账
│   ├─ 设备主：固定金额
│   ├─ 铺设者：固定金额
│   ├─ 商家：固定金额
│   ├─ 供应商：供货价结算（K）
│   ├─ 推广人：固定金额
│   ├─ 代理：根据 省、市、区 设置固定金额。
│   └─ 平台：剩余毛利
│
└─ 写入数据表
    ├─ ns_order_lottery（抽奖订单）
    ├─ ns_prize（中奖记录）
    ├─ ns_profit_record（分润流水）
    ├─ ns_supplier_settlement（供货结算）
    └─ ns_wallet（钱包余额变动）

🧮 卡点 5：商家操作流程逻辑图

展示商家从选品到出奖的完整后台操作顺序。

商家操作流程
│
① 登录商家后台
   ↓
② 进入【奖品管理】
   ├─ 上传自营商品 或 从供应商商品库选取
   ├─ 设置活动价、权重、日上限
   ↓
③ 进入【奖池管理】
   ├─ 创建或选择价档（20/30/50元）
   ├─ 绑定奖品（自动筛选匹配价区间）
   ↓
④ 进入【奖池挂接】
   ├─ 选择16格奖品
   ├─ 调整权重与顺序
   ↓
⑤ 进入【抽奖逻辑配置】
   ├─ 选择模式（实时概率 / 轮次控制）
   ├─ 开启库存自动跳过
   ↓
⑥ 进入【设备管理】
   ├─ 绑定设备 → 关联奖池
   ├─ 查看在线状态、日志
   ↓
⑦ 实际抽奖 → 出奖 → 系统分润/结算

✅ 最终你现在拥有的 5 张「文字结构图」：
图编号	名称	解决的问题
①	商品来源逻辑图	解决商家/供应商商品混乱
②	奖池价与供货价挂钩图	解决价池匹配不清
③	抽奖展示与出奖逻辑图	解决混合商品展示卡顿
④	分润与结算逻辑图	解决成本与分润关系
⑤	商家后台操作流程图	解决操作路径混乱