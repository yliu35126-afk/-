server {
    listen 8000;
    server_name localhost;
    root D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3;
    index index.php index.html index.htm;

    charset utf-8;
    client_max_body_size 50m;

    # 框架路由回退（与 public/.htaccess 等效：index.php/$1）
    location / {
        try_files $uri $uri/ /index.php/$uri?$args;
    }

    # 静态别名，与 public/router.php 等效
    location ^~ /static/layui/ {
        alias D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3/public/static/ext/layui/;
    }

    # 处理 public 目录下的静态资源
    location ^~ /public/static/ {
        alias D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3/public/static/;
    }

    location ~ ^/app/(admin|shop)/view/public/(css|js|img|fonts)/(.+)$ {
        alias D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3/app/$1/view/public/$2/$3;
    }

    location ^~ /upload/ {
        alias D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3/upload/;
    }

    location ^~ /addon/ {
        alias D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3/addon/;
    }

    # PHP 处理（按你的 phpStudy PHP-FPM 端口调整 fastcgi_pass）
    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }

    # 可选：安装入口（已有 install.lock 时通常不需要）
    location = /install.php {
        include fastcgi_params;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME D:/wwwwwwww/36000/chushi10-21/houduanb2b2c5.0.3/install.php;
    }
}

