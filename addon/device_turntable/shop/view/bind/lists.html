{extend name="base"/}
{block name="resources"}
<style>.ns-single-filter { margin-bottom: 10px; }</style>
{/block}
{block name="main"}
<div class="ns-single-filter">
  <span class="ns-word-aux">仅显示本店铺设备的价档绑定</span>
  <!-- 可按需扩展新增/编辑功能 -->
</div>
<table class="layui-hide" id="bind_list" lay-filter="bind_list"></table>
<script type="text/html" id="operation"></script>
{/block}
{block name="script"}
<script>
layui.use(['form'], function(){
  var table;
  table = new Table({
    elem: '#bind_list',
    url: ns.url('device_turntable://shop/bind/lists'),
    where: { device_id: '{$device_id}' },
    cols: [[
      {field:'id',title:'ID',width:80},
      {field:'device_id',title:'设备ID',width:120},
      {field:'tier_id',title:'价档ID',width:100},
      {field:'tier_title',title:'价档名称',width:180},
      {field:'tier_min_price',title:'供货范围',templet:function(d){
        var min = parseFloat(d.tier_min_price||0), max = parseFloat(d.tier_max_price||0);
        if ((!min && !max) || (min===0 && max===0)) return '不限';
        return '￥'+min+' - '+(max?max:'∞');
      }},
      {field:'start_time',title:'开始时间',templet:function(d){return ns.time_to_date(d.start_time);}},
      {field:'end_time',title:'结束时间',templet:function(d){return d.end_time? ns.time_to_date(d.end_time):'-';}},
      {field:'status',title:'状态',width:80}
    ]]
  });
});
</script>
{/block}