{extend name="app/admin/view/base.html"/}
{block name="main"}
<div class="layui-form ns-form">
  <input type="hidden" name="slot_id" value="{$info.slot_id}">
  <div class="layui-form-item">
    <label class="layui-form-label">盘ID</label>
    <div class="layui-input-block">
      <input type="number" name="board_id" value="{$info.board_id}" disabled class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">位置</label>
    <div class="layui-input-block">
      <input type="number" name="position" value="{$info.position}" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">标题</label>
    <div class="layui-input-block">
      <input type="text" name="title" value="{$info.title}" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">类型</label>
    <div class="layui-input-block">
      <select name="prize_type">
        <option value="thanks" {if $info.prize_type=='thanks'}selected{/if}>谢谢参与</option>
        <option value="coupon" {if $info.prize_type=='coupon'}selected{/if}>优惠券</option>
        <option value="balance" {if $info.prize_type=='balance'}selected{/if}>余额</option>
        <option value="goods" {if $info.prize_type=='goods'}selected{/if}>商品</option>
      </select>
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">图片URL</label>
    <div class="layui-input-block">
      <input type="text" name="img" value="{$info.img}" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">库存/次数</label>
    <div class="layui-input-block">
      <input type="number" name="inventory" value="{$info.inventory}" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">权重</label>
    <div class="layui-input-block">
      <input type="number" name="weight" value="{$info.weight}" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">面值</label>
    <div class="layui-input-block">
      <input type="number" step="0.01" name="value" value="{$info.value}" class="layui-input">
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">状态</label>
    <div class="layui-input-block">
      <input type="radio" name="status" value="1" title="启用" {if $info.status==1}checked{/if}>
      <input type="radio" name="status" value="0" title="禁用" {if $info.status==0}checked{/if}>
    </div>
  </div>
  <div class="ns-form-row">
    <button class="layui-btn ns-bg-color" lay-submit lay-filter="save">保存</button>
    <button class="layui-btn layui-btn-primary" onclick="history.back()">返回</button>
  </div>
</div>
{/block}
{block name="script"}
<script>
layui.use(['form'], function(){
  var form = layui.form;
  form.render();
  form.on('submit(save)', function(data){
    $.ajax({
      url: ns.url('turntable://admin/slot/edit'),
      data: data.field,
      dataType: 'json',
      type: 'POST',
      success: function(res){
        layer.msg(res.message);
        if(res.code === 0){
          location.href = ns.url('turntable://admin/slot/lists', { board_id: '{$info.board_id}' });
        }
      }
    });
    return false;
  });
});
</script>
{/block}