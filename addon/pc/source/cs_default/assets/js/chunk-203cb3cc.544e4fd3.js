(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-203cb3cc"],{"123c":function(e,t,r){},"54da":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.yes,expression:"yes"}],staticClass:"null-page"}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-card",{staticClass:"box-card order-list"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/member/order_list"}}},[e._v("我的订单")]),t("el-breadcrumb-item",{attrs:{to:{path:"/member/order_detail?order_id="+e.orderId}}},[e._v("订单详情")]),t("el-breadcrumb-item",[e._v("退款")])],1)],1),t("div",{staticClass:"goods-list"},[t("table",[t("tr",[t("td",{attrs:{width:"62.5%"}},[e._v("商品")]),t("td",{attrs:{width:"12.5%"}},[e._v("数量")]),t("td",{attrs:{width:"12.5%"}},[e._v("金额")])])])]),t("div",{staticClass:"goods-list"},[t("table",[t("tr",[t("td",{attrs:{width:"62.5%"}},[t("div",{staticClass:"goods-info"},[t("div",{staticClass:"goods-info-left"},[t("router-link",{attrs:{to:{path:"/sku-"+e.refundData.order_goods_info.sku_id},target:"_blank"}},[t("img",{staticClass:"goods-img",attrs:{src:e.$img(e.refundData.order_goods_info.sku_image,{size:"mid"})},on:{error:function(t){e.refundData.order_goods_info.sku_image=e.defaultGoodsImage}}})])],1),t("div",{staticClass:"goods-info-right"},[t("router-link",{attrs:{to:{path:"/sku-"+e.refundData.order_goods_info.sku_id},target:"_blank"}},[t("div",{staticClass:"goods-name"},[e._v(e._s(e.refundData.order_goods_info.sku_name))])])],1)])]),t("td",{staticClass:"goods-num",attrs:{width:"12.5%"}},[e._v(e._s(e.refundData.order_goods_info.num))]),t("td",{staticClass:"goods-money",attrs:{width:"12.5%"}},[e._v("￥"+e._s(e.refundData.order_goods_info.goods_money))])])])])]),t("div",{staticClass:"item-block"},[t("div",{staticClass:"block-text"},[e._v("退款类型")]),t("div",{staticClass:"pay-type-list"},[t("div",{staticClass:"pay-type-item",class:1==e.refundType?"active":"",on:{click:function(t){return e.selectRefundType(1)}}},[e._v("退款无需退货")]),2==e.refundData.refund_type.length?t("div",{staticClass:"pay-type-item",class:2==e.refundType?"active":"",on:{click:function(t){return e.selectRefundType(2)}}},[e._v("退货退款")]):e._e(),t("div",{staticClass:"clear"})])]),t("div",{staticClass:"item-block"},[t("div",{staticClass:"block-text"}),t("el-form",{ref:"form",staticClass:"refund-form",attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"退款金额"}},[t("el-input",{attrs:{disabled:"",value:e.refundData.refund_money}})],1),t("el-form-item",{attrs:{label:"退款原因"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.refundReason,callback:function(t){e.refundReason=t},expression:"refundReason"}},e._l(e.refundData.refund_reason_type,(function(e,r){return t("el-option",{key:r,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"退款说明"}},[t("el-input",{attrs:{maxlength:"140","show-word-limit":"",resize:"none",rows:"5",placeholder:"请输入退款说明（选填）",type:"textarea"},model:{value:e.refundRemark,callback:function(t){e.refundRemark=t},expression:"refundRemark"}})],1)],1)],1),t("div",{staticClass:"item-block"},[t("div",{staticClass:"order-submit"},[t("el-button",{staticClass:"el-button--primary",attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1),t("div",{staticClass:"clear"})])],1)])},s=[],i=(r("14d9"),r("e585")),o=r("2f62"),n={name:"refund",components:{},data:()=>({orderGoodsId:"",orderId:"",refundType:1,refundReason:"",refundRemark:"",isIphoneX:!1,refundData:{refund_type:[],order_goods_info:{sku_image:""}},isSub:!1,show_type:0,detail:{refund_action:[]},loading:!0,yes:!0}),created(){this.$route.query.order_goods_id&&(this.orderGoodsId=this.$route.query.order_goods_id),this.$route.query.order_id&&(this.orderId=this.$route.query.order_id),this.getRefundData()},computed:{...Object(o["b"])(["defaultGoodsImage"])},mounted(){let e=this;setTimeout((function(){e.yes=!1}),300)},methods:{selectRefundType(e){this.refundType=e},getRefundData(){Object(i["h"])({order_goods_id:this.orderGoodsId}).then(e=>{const{code:t,message:r,data:a}=e;t>=0?this.refundData=a:this.$message({message:"未获取到该订单项退款信息！",type:"warning",duration:2e3,onClose:()=>{this.$router.push({path:"/member/activist"})}}),this.loading=!1}).catch(e=>{this.loading=!1,this.$message.error({message:e.message,duration:2e3,onClose:()=>{this.$router.push({path:"/member/activist"})}})})},submit(){if(this.verify()){if(this.isSub)return;this.isSub=!0;let e={order_goods_id:this.orderGoodsId,refund_type:this.refundType,refund_reason:this.refundReason,refund_remark:this.refundRemark};Object(i["g"])(e).then(e=>{const{code:t,message:r,data:a}=e;t>=0?this.$message({message:"申请成功！",type:"success",duration:2e3,onClose:()=>{this.$router.push({path:"/member/activist"})}}):(this.isSub=!1,this.$message({message:r,type:"warning"}))}).catch(e=>{this.$message.error({message:e.message,duration:2e3,onClose:()=>{this.$router.push({path:"/member/activist"})}})})}},verify(){return""!=this.refundReason||(this.$message({message:"请选择退款原因",type:"warning"}),!1)}}},d=n,u=(r("b491"),r("2877")),c=Object(u["a"])(d,a,s,!1,null,"71e59dd4",null);t["default"]=c.exports},b491:function(e,t,r){"use strict";r("123c")},e585:function(e,t,r){"use strict";r.d(t,"h",(function(){return s})),r.d(t,"g",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"i",(function(){return f}));var a=r("751a");function s(e){return Object(a["a"])({url:"/api/orderrefund/refundData",data:e,forceLogin:!0})}function i(e){return Object(a["a"])({url:"/api/orderrefund/refund",data:e,forceLogin:!0})}function o(e){return Object(a["a"])({url:"/api/orderrefund/detail",data:e,forceLogin:!0})}function n(e){return Object(a["a"])({url:"/api/orderrefund/delivery",data:e,forceLogin:!0})}function d(e){return Object(a["a"])({url:"/api/orderrefund/cancel",data:e,forceLogin:!0})}function u(e){return Object(a["a"])({url:"/api/ordercomplain/detail",data:e,forceLogin:!0})}function c(e){return Object(a["a"])({url:"/api/ordercomplain/complain",data:e,forceLogin:!0})}function l(e){return Object(a["a"])({url:"/api/ordercomplain/cancel",data:e,forceLogin:!0})}function f(e){return Object(a["a"])({url:"/api/orderrefund/lists",data:e,forceLogin:!0})}}}]);
//# sourceMappingURL=chunk-203cb3cc.544e4fd3.js.map