(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62f2b41f"],{"149b":function(e,t,r){"use strict";r("eaf1")},5973:function(e,t,r){},"6d75":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingAd,expression:"loadingAd"}],staticClass:"ns-register-wrap",style:{background:e.backgroundColor}},[r("div",{staticClass:"el-row-wrap el-row-wrap-register",staticStyle:{position:"relative"}},[r("el-row",[r("el-col",[r("el-carousel",{staticClass:"ns-register-bg",attrs:{height:"500px"},on:{change:e.handleChange}},e._l(e.adList,(function(t){return r("el-carousel-item",{key:t.adv_id},[r("el-image",{staticStyle:{height:"500px",width:"100%"},attrs:{src:e.$img(t.adv_image),fit:"cover"},on:{click:function(r){return e.$router.pushToTab(t.adv_url.url)}}})],1)})),1)],1),r("el-col",{staticClass:"ns-register-form",staticStyle:{position:"absolute",right:"360px","z-index":"999"},attrs:{span:11}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"用户注册",name:"first"}},["first"==e.activeName?r("el-form",{ref:"registerRef",attrs:{model:e.registerForm,rules:e.registerRules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"iconfont iconzhanghao"})])],2)],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"iconfont iconmima"})])],2)],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"iconfont iconyanzhengma"})]),r("template",{slot:"append"},[r("img",{staticClass:"captcha",attrs:{src:e.captcha.img,mode:""},on:{click:e.getCode}})])],2)],1),r("el-form-item",[r("el-row",[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xy-wrap"},[r("div",{staticClass:"iconfont",class:e.ischecked?"iconxuanze-duoxuan":"iconxuanze",on:{click:e.check}}),r("div",{staticClass:"content"},[e._v(" 阅读并同意 "),r("b",{on:{click:function(t){return t.stopPropagation(),e.getAggrement.apply(null,arguments)}}},[e._v("《服务协议》")])])])])],1)],1),r("el-form-item",[r("el-button",{staticClass:"rule-button",attrs:{type:"primary"},on:{click:function(t){return e.register("registerRef")}}},[e._v(" 注册")])],1),r("el-form-item",[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"bg-purple-light"},[e._v("已有账号，"),r("router-link",{staticClass:"register",attrs:{to:"/login"}},[e._v("立即登录")])],1)])],1)],1)],1):e._e()],1),e.registerConfig.register&&-1!=e.registerConfig.register.indexOf("mobile")?r("el-tab-pane",{attrs:{label:"手机动态码注册",name:"second"}},["second"==e.activeName?r("el-form",{ref:"mobileRuleForm",staticClass:"ns-register-mobile",attrs:{model:e.registerForm,rules:e.mobileRules}},[r("el-form-item",{attrs:{prop:"mobile"}},[r("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.registerForm.mobile,callback:function(t){e.$set(e.registerForm,"mobile",t)},expression:"registerForm.mobile"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"iconfont iconshouji-copy"})])],2)],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"iconfont iconyanzhengma"})]),r("template",{slot:"append"},[r("img",{staticClass:"captcha",attrs:{src:e.captcha.img,mode:""},on:{click:e.getCode}})])],2)],1),r("el-form-item",{attrs:{prop:"dynacode"}},[r("el-input",{attrs:{maxlength:"4",placeholder:"请输入短信动态码"},model:{value:e.registerForm.dynacode,callback:function(t){e.$set(e.registerForm,"dynacode",t)},expression:"registerForm.dynacode"}},[r("template",{slot:"prepend"},[r("i",{staticClass:"iconfont icondongtaima"})]),r("template",{slot:"append"},[r("div",{staticClass:"dynacode",class:120==e.dynacodeData.seconds?"ns-text-color":"ns-text-color-gray",on:{click:function(t){return e.sendMobileCode("mobileRuleForm")}}},[e._v(" "+e._s(e.dynacodeData.codeText)+" ")])])],2)],1),r("el-form-item",[r("el-row",[r("el-col",{attrs:{span:12}},[r("div",{staticClass:"xy-wrap"},[r("div",{staticClass:"iconfont",class:e.ischecked?"iconxuanze-duoxuan":"iconxuanze",on:{click:e.check}}),r("div",{staticClass:"content"},[e._v(" 阅读并同意 "),r("b",{on:{click:function(t){return t.stopPropagation(),e.getAggrement.apply(null,arguments)}}},[e._v("《服务协议》")])])])])],1)],1),r("el-form-item",[r("el-button",{staticClass:"rule-button",attrs:{type:"primary"},on:{click:function(t){return e.register("mobileRuleForm")}}},[e._v(" 注册")])],1),r("el-form-item",[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"bg-purple-light toLogin",on:{click:e.toLogin}},[e._v("已有账号，立即登录")])])],1)],1)],1):e._e()],1):e._e()],1)],1)])],1),r("el-dialog",{attrs:{title:e.agreement.title,visible:e.aggrementVisible,width:"60%","before-close":e.aggrementClose,"lock-scroll":!1,center:""},on:{"update:visible":function(t){e.aggrementVisible=t}}},[r("div",{staticClass:"xyContent",domProps:{innerHTML:e._s(e.agreement.content)}})])],1)])},a=[],o=(r("498a"),r("ac1f"),r("5319"),r("485b")),s=r("37cb"),n={name:"register",components:{},data:function(){var e=function(e,t,r){if(!t)return r(new Error("手机号不能为空"));var i=/^1[3|4|5|6|7|8|9][0-9]{9}$/;i.test(t)?r():r(new Error("请输入正确的手机号"))},t=this,r=function(e,r,i){var a=t.registerConfig;if(!r)return i(new Error("请输入密码"));if(a.pwd_len>0){if(r.length<a.pwd_len)return i(new Error("密码长度不能小于"+a.pwd_len+"位"));i()}else if(""!=a.pwd_complexity){var o="密码需包含",s="";if(-1!=a.pwd_complexity.indexOf("number")?(s+="(?=.*?[0-9])",o+="数字"):-1!=a.pwd_complexity.indexOf("letter")?(s+="(?=.*?[a-z])",o+="、小写字母"):-1!=a.pwd_complexity.indexOf("upper_case")?(s+="(?=.*?[A-Z])",o+="、大写字母"):-1!=a.pwd_complexity.indexOf("symbol")?(s+="(?=.*?[#?!@$%^&*-])",o+="、特殊字符"):(s+="",o+=""),s.test(r))return i(new Error(o));i()}};return{activeName:"first",registerForm:{username:"",password:"",checkPass:"",code:"",dynacode:""},registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],dynacode:[{required:!0,message:"请输入短信动态码",trigger:"blur"}]},mobileRules:{mobile:[{required:!0,validator:e,trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}],dynacode:[{required:!0,message:"请输入短信动态码",trigger:"blur"}]},codeRules:{mobile:[{required:!0,validator:e,trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},ischecked:!1,agreement:"",aggrementVisible:!1,captcha:{id:"",img:""},dynacodeData:{seconds:120,timer:null,codeText:"获取动态码",isSend:!1},adList:[],loadingAd:!0,registerConfig:{},backgroundColor:""}},created:function(){this.getCode(),this.getAdList(),this.regisiterAggrement(),this.getRegisterConfig();var e=this;document.onkeypress=function(t){var r=document.all?event.keyCode:t.which;if(13==r)return"first"==e.activeName?e.accountLogin("ruleForm"):e.mobileLogin("mobileRuleForm"),!1}},watch:{"dynacodeData.seconds":{handler:function(e,t){0==e&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}},methods:{getAdList:function(){var e=this;Object(s["a"])({keyword:"NS_PC_REGISTER"}).then((function(t){if(0==t.code&&t.data.adv_list){e.adList=t.data.adv_list;for(var r=0;r<e.adList.length;r++)e.adList[r].adv_url&&(e.adList[r].adv_url=JSON.parse(e.adList[r].adv_url));e.backgroundColor=e.adList[0].background}e.loadingAd=!1})).catch((function(t){e.loadingAd=!1}))},handleChange:function(e,t){this.backgroundColor=this.adList[e].background},handleClick:function(e,t){"first"==this.activeName?this.registerMode="account":this.registerMode="mobile"},check:function(){this.ischecked=!this.ischecked},toLogin:function(){this.$router.push("/login")},getRegisterConfig:function(){var e=this;Object(o["c"])().then((function(t){t.code>=0&&(e.registerConfig=t.data.value,""==e.registerConfig.register&&e.$message({message:"平台未启用注册",type:"warning",duration:2e3,onClose:function(){e.$router.push("/")}}))})).catch((function(e){console.log(e.message)}))},register:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(!t.ischecked)return t.$message({message:"请先阅读协议并勾选",type:"warning"});var r={username:t.registerForm.username.trim(),password:t.registerForm.password};""!=t.captcha.id&&(r.captcha_id=t.captcha.id,r.captcha_code=t.registerForm.code),t.$store.dispatch("member/register_token",r).then((function(e){e.code>=0&&t.$router.push("/member/index")})).catch((function(e){t.$message.error(e.message),t.getCode()}))}))},aggrementClose:function(){this.aggrementVisible=!1},regisiterAggrement:function(){var e=this;Object(o["a"])().then((function(t){t.code>=0&&(e.agreement=t.data)})).catch((function(e){console.log(e.message)}))},getAggrement:function(){this.aggrementVisible=!0},getCode:function(){var e=this;Object(s["b"])({captcha_id:"this.captcha.id"}).then((function(t){t.code>=0&&(e.captcha=t.data,e.captcha.img=e.captcha.img.replace(/\r\n/g,""))})).catch((function(t){e.$message.error(t.message)}))},sendMobileCode:function(e){var t=this;120==this.dynacodeData.seconds&&(this.$refs[e].clearValidate("dynacode"),this.$refs[e].validateField("mobile",(function(e){if(e)return!1})),this.$refs[e].validateField("vercode",(function(e){if(e)return!1;mobileCode({mobile:t.registerForm.mobile,captcha_id:t.captcha.id,captcha_code:t.registerForm.code}).then((function(e){e.code>=0&&(t.registerForm.key=e.data.key,120==t.dynacodeData.seconds&&null==t.dynacodeData.timer&&(t.dynacodeData.timer=setInterval((function(){t.dynacodeData.seconds--,t.dynacodeData.codeText=t.dynacodeData.seconds+"s后可重新获取"}),1e3)))})).catch((function(e){t.$message.error(e.message)}))})))}}},c=n,l=(r("da92"),r("149b"),r("2877")),d=Object(l["a"])(c,i,a,!1,null,"0b6ba79a",null);t["default"]=d.exports},da92:function(e,t,r){"use strict";r("5973")},eaf1:function(e,t,r){}}]);
//# sourceMappingURL=chunk-62f2b41f.3b3f4b7c.js.map