(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44262c5a"],{"2e03":function(e,t,s){"use strict";s("e860")},5394:function(e,t,s){"use strict";s("b4b1")},"5d97":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"el-row-wrap find-pass"},[t("ul",[e._m(0),t("li",{attrs:{id:"current2"}},[t("span",{staticClass:"line-1",class:e.step>=2?"ns-border-color":"ns-border-color-gray"}),t("div",[t("p",{class:e.step>=2?"ns-bg-color":"ns-bg-color-gray"},[e._v("2")]),t("p",{class:e.step>=2?"ns-text-color":"ns-text-color-gray"},[e._v("验证身份")])]),t("span",{staticClass:"line-2",class:e.step>=2?"ns-border-color":"ns-border-color-gray"})]),t("li",{attrs:{id:"current3"}},[t("span",{staticClass:"line-1",class:e.step>=3?"ns-border-color":"ns-border-color-gray"}),t("div",[t("p",{class:e.step>=3?"ns-bg-color":"ns-bg-color-gray"},[e._v("3")]),t("p",{class:e.step>=3?"ns-text-color":"ns-text-color-gray"},[e._v("重置密码")])]),t("span",{staticClass:"line-2",class:e.step>=3?"ns-border-color":"ns-border-color-gray"})]),t("li",{attrs:{id:"current4"}},[t("span",{staticClass:"line-1",class:e.step>=4?"ns-border-color":"ns-border-color-gray"}),t("div",[t("p",{class:e.step>=4?"ns-bg-color":"ns-bg-color-gray"},[e._v("4")]),t("p",{class:e.step>=4?"ns-text-color":"ns-text-color-gray"},[e._v("完成")])])])]),t("el-row",[t("el-col",{attrs:{span:12,offset:6}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-form",{ref:"ruleForm",staticClass:"ns-forget-pass-form",attrs:{model:e.formData,rules:e.rules}},[t("div",{staticClass:"ns-forget-pass"},[1==e.step?[t("el-form-item",{key:"1",attrs:{prop:"mobile"}},[t("el-input",{attrs:{placeholder:"请输入注册手机号"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-mobile-phone"})])],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStep("ruleForm")}}},[e._v("下一步")])],1)]:2==e.step?[t("el-form-item",{key:"2",attrs:{prop:"vercode"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.formData.vercode,callback:function(t){e.$set(e.formData,"vercode",t)},expression:"formData.vercode"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-picture-outline"})]),t("template",{slot:"append"},[t("img",{staticClass:"captcha",attrs:{src:e.captcha.img,mode:""},on:{click:e.getCaptcha}})])],2)],1),t("el-form-item",{key:"3",attrs:{prop:"dynacode"}},[t("el-input",{attrs:{maxlength:"4",autocomplete:"off",placeholder:"请输入短信动态码"},model:{value:e.formData.dynacode,callback:function(t){e.$set(e.formData,"dynacode",t)},expression:"formData.dynacode"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-mobile"})]),t("template",{slot:"append"},[t("div",{staticClass:"dynacode",class:120==e.dynacodeData.seconds?"ns-text-color":"ns-text-color-gray",on:{click:function(t){return e.sendMobileCode("ruleForm")}}},[e._v(" "+e._s(e.dynacodeData.codeText)+" ")])])],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.nextStepToSetPass("ruleForm")}}},[e._v("下一步")])],1)]:3==e.step?[t("el-form-item",{key:"4",attrs:{prop:"pass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新的登录密码"},model:{value:e.formData.pass,callback:function(t){e.$set(e.formData,"pass","string"===typeof t?t.trim():t)},expression:"formData.pass"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-lock"})])],2)],1),t("el-form-item",{key:"5",attrs:{prop:"repass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请再次输入新密码"},model:{value:e.formData.repass,callback:function(t){e.$set(e.formData,"repass","string"===typeof t?t.trim():t)},expression:"formData.repass"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-lock"})])],2)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetPass("ruleForm")}}},[e._v("重置密码")])],1)]:4==e.step?[t("span",{staticClass:"ns-reset-success"},[e._v("重置密码成功")]),t("el-form-item",[t("router-link",{attrs:{to:"/login"}},[t("el-button",{attrs:{type:"primary"}},[e._v("重新登录")])],1)],1)]:e._e()],2)])],1)])],1)],1)},r=[function(){var e=this,t=e._self._c;return t("li",[t("div",[t("p",{staticClass:"ns-bg-color"},[e._v("1")]),t("p",{staticClass:"ns-text-color"},[e._v("输入手机号")])]),t("span",{staticClass:"line-2 ns-border-color"})])}],o=(s("d9e2"),s("7401")),i=s("37cb"),c={data(){var e=(e,t,s)=>{if(!t)return s(new Error("手机号不能为空"));{const e=/^1[3|4|5|6|7|8|9][0-9]{9}$/;e.test(t)?s():s(new Error("请输入正确的手机号"))}};let t=this;var s=function(e,s,a){let r=t.registerConfig;if(!s)return a(new Error("请输入新的登录密码"));if(r.pwd_len>0){if(s.length<r.pwd_len)return a(new Error("密码长度不能小于"+r.pwd_len+"位"));a()}else if(""!=r.pwd_complexity){let e="密码需包含",t="";if(-1!=r.pwd_complexity.indexOf("number")?(t+="(?=.*?[0-9])",e+="数字"):-1!=r.pwd_complexity.indexOf("letter")?(t+="(?=.*?[a-z])",e+="、小写字母"):-1!=r.pwd_complexity.indexOf("upper_case")?(t+="(?=.*?[A-Z])",e+="、大写字母"):-1!=r.pwd_complexity.indexOf("symbol")?(t+="(?=.*?[#?!@$%^&*-])",e+="、特殊字符"):(t+="",e+=""),t.test(s))return a(new Error(e));a()}},a=function(e,s,a){if(!s)return a(new Error("请输入确认密码"));s!==t.formData.pass?a(new Error("两次密码输入不一致")):a()};return{formData:{mobile:"",vercode:"",dynacode:"",pass:"",repass:"",key:""},step:1,activeName:"first",isShowPhone:"",captcha:{id:"",img:""},dynacodeData:{seconds:120,timer:null,codeText:"获取动态码",isSend:!1},registerConfig:{},rules:{mobile:[{required:!0,validator:e,trigger:"blur"}],vercode:[{required:!0,message:"请输入验证码",trigger:"blur"}],dynacode:[{required:!0,message:"请输入短信动态码",trigger:"blur"}],pass:[{required:!0,validator:s,trigger:"blur"}],repass:[{required:!0,validator:a,trigger:"blur"}]}}},created(){this.getCaptcha(),this.getRegisterConfig()},watch:{"dynacodeData.seconds":{handler(e,t){0==e&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}},methods:{nextStep(e){this.$refs[e].validate(e=>{if(!e)return!1;Object(o["d"])({mobile:this.formData.mobile}).then(e=>{-1==e.code?this.step=2:this.$message({message:e.message,type:"warning"})}).catch(e=>{0==e.code?this.$message({message:"该手机号未注册",type:"warning"}):this.$message.error(e.message)})})},nextStepToSetPass(e){this.$refs[e].validate(e=>{if(!e)return!1;this.step=3})},resetPass(e){this.$refs[e].validate(e=>{if(!e)return!1;Object(o["e"])({password:this.formData.pass,code:this.formData.dynacode,key:this.formData.key,mobile:this.formData.mobile}).then(e=>{e.code>=0&&(this.step=4,this.$message({message:e.message,type:"success"}))}).catch(e=>{this.$message.error(e.message)})})},getCaptcha(){Object(i["b"])({captcha_id:this.captcha.id}).then(e=>{e.code>=0&&(this.captcha.id=e.data.id,this.captcha.img=e.data.img,this.captcha.img=this.captcha.img.replace(/\r\n/g,""))}).catch(e=>{this.$message.error(e.message)})},sendMobileCode(e){120==this.dynacodeData.seconds&&(this.$refs[e].clearValidate("dynacode"),this.$refs[e].validateField("vercode",e=>{if(e)return!1;this.isSend||(this.isSend=!0,Object(o["g"])({captcha_id:this.captcha.id,captcha_code:this.formData.vercode,mobile:this.formData.mobile}).then(e=>{e.code>=0&&(this.formData.key=e.data.key,120==this.dynacodeData.seconds&&null==this.dynacodeData.timer?this.dynacodeData.timer=setInterval(()=>{this.dynacodeData.seconds--,this.dynacodeData.codeText=this.dynacodeData.seconds+"s后可重新获取"},1e3):(this.$message({message:e.message,type:"warning"}),this.isSend=!1,this.getCaptcha()))}).catch(e=>{this.isSend=!1,this.getCaptcha(),this.$message.error(e.message)}))}))},getRegisterConfig(){Object(o["f"])().then(e=>{e.code>=0&&(this.registerConfig=e.data.value)}).catch(e=>{console.log(e.message)})}}},l={name:"find_pass",mixins:[c]},n=l,d=(s("2e03"),s("5394"),s("2877")),p=Object(d["a"])(n,a,r,!1,null,"45a5341a",null);t["default"]=p.exports},b4b1:function(e,t,s){},e860:function(e,t,s){}}]);
//# sourceMappingURL=chunk-44262c5a.81adeebe.js.map