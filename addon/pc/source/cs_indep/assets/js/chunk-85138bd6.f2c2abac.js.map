{"version":3,"sources":["webpack:///./src/views/goods/category.vue","webpack:///src/views/goods/category.vue","webpack:///./src/views/goods/category.vue?75d6","webpack:///./src/views/goods/category.vue?f7ca","webpack:///./src/views/goods/category.vue?a4f4"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","class","categoryFixed","attrs","_l","goodsCategory","item","index","key","clickIndex","on","$event","changeCate","_v","_s","category_name","cate1","ref","refInFor","path","query","category_id","level","child_list","cate2","cate3","length","_e","staticRenderFns","components","data","created","getGoodsCategory","mounted","window","addEventListener","handleScroll","methods","tree","template","then","res","code","catch","err","$message","error","message","scrollTop","pageYOffset","document","documentElement","body","offsetTop","querySelector","divTopArr","i","_top","$refs","push","_offset","obj","scrollIntoView","destroyed","removeEventListener","component"],"mappings":"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","file":"assets/js/chunk-85138bd6.f2c2abac.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"newCategory\"},[_c('div',{staticClass:\"categoryLink\"},[_c('ul',{class:_vm.categoryFixed == true ? 'category-fixed' : '',attrs:{\"id\":\"categoryUl\"}},_vm._l((_vm.goodsCategory),function(item,index){return _c('li',{key:index,class:index == _vm.clickIndex ? 'selected' : '',on:{\"click\":function($event){return _vm.changeCate(index, '#category' + index)}}},[_c('a',[_c('span',[_vm._v(_vm._s(item.category_name))])])])}),0)]),_c('div',{staticClass:\"categoryCon\"},_vm._l((_vm.goodsCategory),function(cate1,index){return _c('div',{key:index,ref:'category' + index,refInFor:true,staticClass:\"items\",class:'items-' + index,attrs:{\"id\":'category' + index}},[_c('h2',[_c('router-link',{attrs:{\"to\":{ path: '/list', query: { category_id: cate1.category_id, level: cate1.level } },\"target\":\"_blank\"}},[_vm._v(_vm._s(cate1.category_name))])],1),_vm._l((cate1.child_list),function(cate2,index){return _c('dl',{key:index},[_c('dt',[_c('router-link',{attrs:{\"to\":{ path: '/list', query: { category_id: cate2.category_id, level: cate2.level } },\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(cate2.category_name)+\" \")])],1),_c('dd',_vm._l((cate2.child_list),function(cate3,index){return _c('router-link',{key:index,attrs:{\"to\":{ path: '/list', query: { category_id: cate3.category_id, level: cate3.level } },\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(cate3.category_name)+\" \")])}),1)])})],2)}),0),(_vm.goodsCategory.length <= 0)?_c('div',{staticClass:\"empty-wrap\"},[_c('div',{staticClass:\"ns-text-align\"},[_vm._v(\"暂无商品分类\")])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"newCategory\" v-loading=\"loading\">\r\n            <div class=\"categoryLink\">\r\n                <ul id=\"categoryUl\" :class=\"categoryFixed == true ? 'category-fixed' : ''\">\r\n                    <li v-for=\"(item, index) in goodsCategory\" :key=\"index\" :class=\"index == clickIndex ? 'selected' : ''\" @click=\"changeCate(index, '#category' + index)\">\r\n                        <a>\r\n                            <span>{{ item.category_name }}</span>\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            <div class=\"categoryCon\">\r\n                <div :id=\"'category' + index\" :ref=\"'category' + index\" class=\"items\" :class=\"'items-' + index\" v-for=\"(cate1, index) in goodsCategory\" :key=\"index\">\r\n                    <h2>\r\n                        <router-link :to=\"{ path: '/list', query: { category_id: cate1.category_id, level: cate1.level } }\" target=\"_blank\">{{ cate1.category_name }}</router-link>\r\n                    </h2>\r\n\r\n                    <dl v-for=\"(cate2, index) in cate1.child_list\" :key=\"index\">\r\n                        <dt>\r\n                            <router-link :to=\"{ path: '/list', query: { category_id: cate2.category_id, level: cate2.level } }\" target=\"_blank\">\r\n                                {{ cate2.category_name }}\r\n                            </router-link>\r\n                        </dt>\r\n                        <dd>\r\n                            <router-link v-for=\"(cate3, index) in cate2.child_list\" :key=\"index\" :to=\"{ path: '/list', query: { category_id: cate3.category_id, level: cate3.level } }\" target=\"_blank\">\r\n                                {{ cate3.category_name }}\r\n                            </router-link>\r\n                        </dd>\r\n                    </dl>\r\n                </div>\r\n            </div>\r\n\t\t\t\r\n\t\t\t<div class=\"empty-wrap\" v-if=\"goodsCategory.length <= 0\"><div class=\"ns-text-align\">暂无商品分类</div></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import { tree } from \"@/api/goods/goodscategory\"\r\n\r\n    export default {\r\n        name: \"category\",\r\n        components: {},\r\n        data: () => {\r\n            return {\r\n                goodsCategory: [],\r\n                categoryFixed: false,\r\n                clickIndex: 0,\r\n                loading: true\r\n            }\r\n        },\r\n        created() {\r\n            this.getGoodsCategory()\r\n        },\r\n        mounted() {\r\n            window.addEventListener(\"scroll\", this.handleScroll)\r\n        },\r\n        methods: {\r\n            // 分类列表\r\n            getGoodsCategory() {\r\n                tree({\r\n                    level: 3,\r\n                    template: 2\r\n                })\r\n                    .then(res => {\r\n                        if (res.code == 0) {\r\n                            this.goodsCategory = res.data\r\n                        }\r\n                        this.loading = false\r\n                    })\r\n                    .catch(err => {\r\n                        this.$message.error(err.message)\r\n                        this.loading = false\r\n                    })\r\n            },\r\n            // 监听滚动条\r\n            handleScroll() {\r\n                var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\r\n                var offsetTop = document.querySelector(\".newCategory\").offsetTop\r\n\r\n                if (scrollTop > offsetTop) {\r\n                    this.categoryFixed = true\r\n                } else {\r\n                    this.categoryFixed = false\r\n                }\r\n\r\n                var divTopArr = []\r\n                for (let i = 0; i < this.goodsCategory.length; i++) {\r\n                    var _top = this.$refs[\"category\" + i][0].offsetTop\r\n\r\n                    divTopArr.push(_top)\r\n                    var _offset = scrollTop - offsetTop\r\n                    if (_offset < divTopArr[divTopArr.length - 1]) {\r\n                        if (_offset >= divTopArr[i] && _offset < divTopArr[i + 1]) {\r\n                            this.clickIndex = i\r\n                        }\r\n                    } else {\r\n                        this.clickIndex = divTopArr.length - 1\r\n                    }\r\n                }\r\n            },\r\n            // 点击左侧分类\r\n            changeCate(index, obj) {\r\n                this.clickIndex = index\r\n                document.querySelector(obj).scrollIntoView(true)\r\n            }\r\n        },\r\n        destroyed() {\r\n            // 离开该页面需要移除这个监听的事件，不然会报错\r\n            window.removeEventListener(\"scroll\", this.handleScroll)\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .newCategory {\r\n        width: $width;\r\n        margin: 0 auto;\r\n        overflow: hidden;\r\n        background-color: #fff;\r\n\r\n        .categoryLink {\r\n            padding-top: 10px;\r\n            float: left;\r\n            position: relative;\r\n            width: 210px;\r\n\r\n            ul {\r\n                width: 210px;\r\n                padding-top: 20px;\r\n\t\t\t\tbackground-color: #FFFFFF;\r\n\r\n                li {\r\n                    width: 200px;\r\n                    height: 30px;\r\n                    text-align: left;\r\n                    background-color: #f5f5f5;\r\n                    border-radius: 30px;\r\n                    color: #333;\r\n                    line-height: 30px;\r\n                    overflow: hidden;\r\n                    position: relative;\r\n                    cursor: pointer;\r\n                    margin: 0 auto 15px;\r\n\r\n                    &.selected {\r\n                        background-color: $base-color;\r\n                        background: -moz-linear-gradient(45deg, $base-color 0%, #ffffff 100%);\r\n                        background: -webkit-gradient(45deg, color-stop(0%, $base-color), color-stop(100%, #ffffff));\r\n                        background: -webkit-linear-gradient(45deg, $base-color 0%, #ffffff 100%);\r\n                        background: -o-linear-gradient(45deg, $base-color 0%, #ffffff 100%);\r\n                        background: -ms-linear-gradient(45deg, $base-color 0%, #ffffff 100%);\r\n                        background: linear-gradient(45deg, $base-color 0%, #ffffff 100%);\r\n\r\n                        a {\r\n                            color: #fff;\r\n                        }\r\n                    }\r\n\r\n                    a {\r\n                        display: block;\r\n                        margin-left: 30px;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        .category-fixed {\r\n            position: fixed;\r\n            top: 0;\r\n\t\t\tz-index: 99;\r\n        }\r\n\r\n        .categoryCon {\r\n            float: left;\r\n            padding: 0px 0 60px;\r\n            overflow: hidden;\r\n            width: 990px;\r\n            position: relative;\r\n\r\n            .items {\r\n                padding-left: 40px;\r\n\r\n                h2 {\r\n                    font-size: 18px;\r\n                    font-weight: 600;\r\n                    line-height: 40px;\r\n                    margin-top: 30px;\r\n                    border-bottom: 1px solid transparent;\r\n                }\r\n\r\n                dl {\r\n                    padding: 15px 0 5px;\r\n                    border-bottom: 1px solid #efefef;\r\n                    overflow: hidden;\r\n\r\n                    dt {\r\n                        padding-right: 20px;\r\n                        width: 72px;\r\n                        position: relative;\r\n                        background: #fff;\r\n                        float: left;\r\n\r\n                        a {\r\n                            float: left;\r\n                            max-width: 72px;\r\n                            overflow: hidden;\r\n                            white-space: nowrap;\r\n                            text-overflow: ellipsis;\r\n                            font-weight: 600;\r\n                        }\r\n                    }\r\n\r\n                    dd {\r\n                        float: left;\r\n                        width: 858px;\r\n\r\n                        a {\r\n                            color: #666;\r\n                            float: left;\r\n                            padding: 0 12px;\r\n                            margin: 0 0 10px -1px;\r\n                            border-left: 1px solid #e0e0e0;\r\n                            white-space: nowrap;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./category.vue?vue&type=template&id=648b9aa8&scoped=true\"\nimport script from \"./category.vue?vue&type=script&lang=js\"\nexport * from \"./category.vue?vue&type=script&lang=js\"\nimport style0 from \"./category.vue?vue&type=style&index=0&id=648b9aa8&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"648b9aa8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./category.vue?vue&type=style&index=0&id=648b9aa8&prod&lang=scss&scoped=true\""],"sourceRoot":""}