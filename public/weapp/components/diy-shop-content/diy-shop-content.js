(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/diy-shop-content/diy-shop-content"],{"047a":function(t,o,i){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e={name:"diy-shop-store",components:{nsLoading:function(){i.e("components/ns-loading/ns-loading").then(function(){return resolve(i("8945"))}.bind(null,i)).catch(i.oe)}},props:{value:{type:Object,default:function(){return{}}},siteId:{type:[Number,String],default:0}},data:function(){return{isNetwork:1,isLoading:!1,type:1,rankingType:1,goodsList:[],shopInfo:null,goodsService:[],rankGoodsList:[],num:1,pageCount:0,order:"sort",sort:"desc",flag:!1,couponPage:1,couponList:[],back:"",couponBtnSwitch:!1}},created:function(){this.getShopInfo(),this.getRankList(),this.back="/otherpages/shop/index/index?site_id="+this.siteId,this.getCounponList()},mounted:function(){var o=this;t.$on("onReachBottom",(function(t){2!=o.type&&3!=o.type||o.getGoodsList()}))},methods:{navSwitch:function(t){this.type=t,2!=t&&3!=t||(this.num=1,this.goodsList=[],this.getGoodsList())},sortSwitch:function(t,o){this.order=t,this.sort=o,this.num=1,this.goodsList=[],this.getGoodsList()},rankSwitch:function(t){this.rankingType=t,this.getRankList()},imgError:function(t){this.rankGoodsList[t].goods_image=this.$util.getDefaultImage().default_goods_img},imgGoodsError:function(t){this.goodsList[t].goods_image=this.$util.getDefaultImage().default_goods_img},goodsImg:function(t){var o=t.split(",");return o[0]?this.$util.img(o[0],{size:"mid"}):this.$util.getDefaultImage().default_goods_img},toDetail:function(t){this.$util.redirectTo("/pages/goods/detail/detail",{sku_id:t.sku_id})},showPrice:function(t){var o=t.discount_price;return t.member_price&&parseFloat(t.member_price)<parseFloat(o)&&(o=t.member_price),o},toBottom:function(){},goodsTag:function(t){switch(t.recommend_way){case 1:return"新品";case 2:return"精品";case 3:return"推荐";default:return""}},getGoodsList:function(){var t=this,o={page:this.num,order:"create_time",sort:"desc",site_id:this.siteId};return"2"==this.type&&(o.order=this.order,o.sort=this.sort),!(this.pageCount>0&&this.pageCount<this.num)&&(1==this.num&&(this.isLoading=!0),!this.flag&&(this.flag=!0,void this.$api.sendRequest({url:"/api/goodssku/page",data:o,success:function(o){if(t.isLoading=!1,0==o.code&&o.data){t.pageCount=o.data.page_count,t.flag=!1;o.data;1==t.num&&(t.goodsList=[]),o.data.list.length&&(t.goodsList=t.goodsList.concat(o.data.list)),t.num+=1}}})))},getRankList:function(){var t=this,o=1==this.rankingType?"collect":"sale_num",i={page:1,page_size:6,sort:"desc",order:o,site_id:this.siteId};this.isLoading=!0,this.$api.sendRequest({url:"/api/goodssku/page",data:i,success:function(o){if(t.isLoading=!1,0==o.code&&o.data){var i=o.data;t.rankGoodsList=i.list}}})},getShopInfo:function(){var t=this;this.$api.sendRequest({url:"/api/shop/info",data:{site_id:this.siteId},success:function(o){0==o.code&&(t.shopInfo=o.data,t.goodsService=[],1==t.shopInfo.shop_baozh&&t.goodsService.push({service_name:"保证服务",desc:"保证服务"}),1==t.shopInfo.shop_qtian&&t.goodsService.push({service_name:"7天退换",desc:"满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费"}),1==t.shopInfo.shop_zhping&&t.goodsService.push({service_name:"正品保障",desc:"商品支持正品保障服务"}),1==t.shopInfo.shop_erxiaoshi&&t.goodsService.push({service_name:"两小时发货",desc:"付款后2小时内发货"}),1==t.shopInfo.shop_tuihuo&&t.goodsService.push({service_name:"退货承诺",desc:"退货承诺"}),1==t.shopInfo.shop_shiyong&&t.goodsService.push({service_name:"试用中心",desc:"试用中心"}),1==t.shopInfo.shop_shiti&&t.goodsService.push({service_name:"实体验证",desc:"实体验证"}),1==t.shopInfo.shop_xiaoxie&&t.goodsService.push({service_name:"消协保证",desc:"如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担"}))}})},getCounponList:function(){var t=this;this.$api.sendRequest({url:"/coupon/api/coupon/typepagelists",data:{page:this.couponPage,page_size:0,site_id:this.siteId},success:function(o){var i=[],e=o.message;0==o.code&&o.data?i=o.data.list:t.$util.showToast({title:e}),i.length&&i.forEach((function(t){t.useState=0})),i.length&&i.forEach((function(t){1==t.is_limitcount?t.useState=0:t.count==t.lead_count?t.useState=2:t.useState=0})),1==t.couponPage&&(t.couponList=[]),t.couponList=t.couponList.concat(i)},fail:function(){}})},toGoodsList:function(t){1!=t.goods_type?this.$util.redirectTo("/otherpages/shop/list/list",{couponId:t.coupon_type_id,site_id:t.site_id}):this.$util.redirectTo("/otherpages/shop/list/list",{site_id:t.site_id})},receiveCoupon:function(o,i){var e=this;if(!this.couponBtnSwitch){this.couponBtnSwitch=!0;var s=t.getStorageSync("token");if(""!=s){var n={site_id:o.site_id,get_type:2};"/coupon/api/coupon/receive",n.coupon_type_id=o.coupon_type_id,this.$api.sendRequest({url:"/coupon/api/coupon/receive",data:n,success:function(t){t.data;var i=t.message;0==t.code&&(i="领取成功");var s=e.couponList;if(1==t.data.is_exist)for(var n=0;n<s.length;n++)s[n].coupon_type_id==o.coupon_type_id&&(s[n].useState=1);else for(var a=0;a<s.length;a++)s[a].coupon_type_id==o.coupon_type_id&&(s[a].useState=2);e.$util.showToast({title:i}),e.couponBtnSwitch=!1},fail:function(t){e.couponBtnSwitch=!1}})}else this.bindgetuserinfo()}},bindgetuserinfo:function(){if(this.$util.isWeiXin()){var t="";t=this.back?Config.h5Domain+"/pages/login/login/login?back="+encodeURIComponent(this.back):Config.h5Domain+"/pages/login/login/login",this.$api.sendRequest({url:"/wechat/api/wechat/authcode",data:{redirect_url:t},success:function(t){t.code>=0&&(location.href=t.data)}})}else this.back?this.$util.redirectTo("/pages/login/login/login",{back:this.back}):this.$util.redirectTo("/pages/login/login/login");this.couponBtnSwitch=!1}}};o.default=e}).call(this,i("543d")["default"])},"0d5c":function(t,o,i){"use strict";var e=i("b7b2"),s=i.n(e);s.a},2395:function(t,o,i){"use strict";i.r(o);var e=i("9940"),s=i("a9ec");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(o,t,(function(){return s[t]}))}(n);i("0d5c");var a=i("f0c5"),u=Object(a["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);o["default"]=u.exports},9940:function(t,o,i){"use strict";i.d(o,"b",(function(){return s})),i.d(o,"c",(function(){return n})),i.d(o,"a",(function(){return e}));var e={nsEmpty:function(){return i.e("components/ns-empty/ns-empty").then(i.bind(null,"da15"))}},s=function(){var t=this,o=t.$createElement,i=(t._self._c,t.__map(t.value.list,(function(o,i){var e=t.__get_orig(o),s=t.$util.img(o.type==t.type?o.select_path:o.path);return{$orig:e,g0:s}}))),e=1==t.type?t.__map(t.rankGoodsList,(function(o,i){var e=t.__get_orig(o),s=t.goodsImg(o.goods_image),n=i<4?t.$util.img("upload/uniapp/shop/ranking_"+(i+1)+".png"):null,a=t.$lang("common.currencySymbol"),u=parseFloat(t.showPrice(o)).toFixed(2).split("."),c=parseFloat(t.showPrice(o)).toFixed(2).split("."),r=t.goodsService.length;return{$orig:e,m0:s,g1:n,m1:a,g2:u,g3:c,g4:r}})):null,s=1==t.type?0==t.rankGoodsList.length&&!t.isLoading:null,n=2==t.type||3==t.type?t.__map(t.goodsList,(function(o,i){var e=t.__get_orig(o),s=t.goodsImg(o.goods_image),n=t.goodsTag(o),a=""!=n?t.goodsTag(o):null,u=t.$lang("common.currencySymbol"),c=parseFloat(t.showPrice(o)).toFixed(2).split("."),r=parseFloat(t.showPrice(o)).toFixed(2).split(".");return{$orig:e,m2:s,m3:n,m4:a,m5:u,g6:c,g7:r}})):null,a=2==t.type||3==t.type?0==t.goodsList.length&&!t.isLoading:null,u=4==t.type?t.__map(t.couponList,(function(o,i){var e=t.__get_orig(o),s="discount"==o.type?parseFloat(o.discount):null,n="discount"!=o.type?parseFloat(o.money):null,a=o.validity_type?null:t.$util.timeStampTurnTime(o.end_time);return{$orig:e,m6:s,m7:n,g9:a}})):null,c=4==t.type?t.couponList.length:null,r=4==t.type&&0==c?t.$util.img("upload/uniapp/coupon_empty.png"):null;t.$mp.data=Object.assign({},{$root:{l0:i,l1:e,g5:s,l2:n,g8:a,l3:u,g10:c,g11:r}})},n=[]},a9ec:function(t,o,i){"use strict";i.r(o);var e=i("047a"),s=i.n(e);for(var n in e)["default"].indexOf(n)<0&&function(t){i.d(o,t,(function(){return e[t]}))}(n);o["default"]=s.a},b7b2:function(t,o,i){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/diy-shop-content/diy-shop-content-create-component',
    {
        'components/diy-shop-content/diy-shop-content-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2395"))
        })
    },
    [['components/diy-shop-content/diy-shop-content-create-component']]
]);
