(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/diy-goods-level-category/diy-goods-level-three-third"],{"453e":function(t,e,i){},"60be":function(t,e,i){"use strict";i.r(e);var n=i("63b0"),s=i("b63f");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("6f9f"),i("a456");var a=i("f0c5"),c=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"0b3e8868",null,!1,n["a"],void 0);e["default"]=c.exports},"63b0":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={nsEmpty:function(){return i.e("components/ns-empty/ns-empty").then(i.bind(null,"da15"))},nsLogin:function(){return Promise.all([i.e("common/vendor"),i.e("components/ns-login/ns-login")]).then(i.bind(null,"3584"))}},s=function(){var t=this,e=t.$createElement,i=(t._self._c,t.cateList.length&&t.isLoadingCate),n=i?t.cateList[t.oneIndex].child_list&&t.cateList[t.oneIndex].child_list.length:null,s=i&&t.cateList[t.oneIndex].image_adv?t.$util.img(t.cateList[t.oneIndex].image_adv):null,o=i?t.cateList[t.oneIndex].child_list&&t.cateList[t.oneIndex].child_list[t.twoIndex].child_list&&t.cateList[t.oneIndex].child_list[t.twoIndex].child_list.length:null,a=i&&o?t.__map(t.cateList[t.oneIndex].child_list[t.twoIndex].child_list,(function(e,i){var n=t.__get_orig(e),s=t.__map(e.goods_list,(function(i,n){var s=t.__get_orig(i),o=e.goods_list?t.$util.img(i.sku_image,{size:"mid"}):null,a=e.goods_list?t.showPrice(i):null,c=e.goods_list?i.member_price&&i.member_price==t.showPrice(i):null,l=e.goods_list&&c?t.$util.img("/upload/uniapp/category/menber_icon.png"):null,r=e.goods_list&&!c&&1==i.promotion_type?t.$util.img("/upload/uniapp/category/discount_icon.png"):null;return{$orig:s,g4:o,m0:a,m1:c,g5:l,g6:r}}));return{$orig:n,l0:s}})):null;t._isMounted||(t.e0=function(e){t.cateList[t.oneIndex].image_adv=t.$util.img("/upload/uniapp/default_ad.png")}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:s,g3:o,l1:a}})},o=[]},"6f9f":function(t,e,i){"use strict";var n=i("d3fc"),s=i.n(n);s.a},a456:function(t,e,i){"use strict";var n=i("453e"),s=i.n(n);s.a},b63f:function(t,e,i){"use strict";i.r(e);var n=i("de2d"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},d3fc:function(t,e,i){},de2d:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("2eee")),o=n(i("c973")),a=n(i("0f13")),c=n(i("7b48")),l={data:function(){return{height:"",cateList:[],oneIndex:0,twoIndex:0,threeIndex:[],currentRoute:"",cartList:[]}},props:{siteId:{type:[Number,String],default:0}},components:{nsLoading:function(){i.e("components/ns-loading/ns-loading").then(function(){return resolve(i("8945"))}.bind(null,i)).catch(i.oe)},nsSearch:function(){i.e("components/ns-search/ns-search").then(function(){return resolve(i("3b5f"))}.bind(null,i)).catch(i.oe)},nsGoodsSkuCategory:function(){Promise.all([i.e("common/vendor"),i.e("components/ns-goods-sku/ns-goods-sku-category")]).then(function(){return resolve(i("4eef"))}.bind(null,i)).catch(i.oe)}},mixins:[c.default,a.default],created:function(){var t=getCurrentPages()[getCurrentPages().length-1];this.currentRoute="/"+t.route,this.getCategoryList()},methods:{getCategoryList:function(){var e=this,i={level:this.value.level,template:this.value.template};this.isLoadingCate=!1,this.$api.sendRequest({url:"/api/goodscategory/tree",data:i,success:function(i){if(e.isLoadingCate=!0,i.data.length){e.cateList=i.data;for(var n=0;n<e.cateList.length;n++)if(e.cateList[n].child_list)for(var s=0;s<e.cateList[n].child_list.length;s++)if(e.cateList[n].child_list[s].child_list)for(var o=0;o<e.cateList[n].child_list[s].child_list.length;o++)e.cateList[n].child_list[s].child_list[o].goods_list=[];e.selectOneCategory(),e.$nextTick((function(){var e=this,i=t.createSelectorQuery().in(this);i.select(".category-cate-top").boundingClientRect((function(t){e.height=t.height+"px"})).exec()}))}e.$emit("netFinish",!0)}})},showPrice:function(t){var e=parseInt(t.discount_price);return t.member_price&&parseInt(t.member_price)<e&&(e=t.member_price),e},getGoodsList:function(){var e=this;return(0,o.default)(s.default.mark((function i(){var n,o,a,c;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(console.log("diy-goods-level-three-third22",t.getStorage("city")),e.cateList[e.oneIndex]&&e.cateList[e.oneIndex].child_list.length&&e.cateList[e.oneIndex].child_list[e.twoIndex].child_list){i.next=3;break}return i.abrupt("return",!1);case 3:n=e.cateList[e.oneIndex].child_list[e.twoIndex].child_list,o=0;case 5:if(!(o<n.length)){i.next=14;break}return a={page:e.page_num,page_size:e.page_size,category_id:n[o].category_id},i.next=9,e.$api.sendRequest({url:"/api/goodssku/page",data:a,async:!1});case 9:c=i.sent,0==c.code&&c.data&&e.cateList[e.oneIndex].child_list[e.twoIndex].child_list[o]&&(e.cateList[e.oneIndex].child_list[e.twoIndex].child_list[o].goods_list=c.data.list,c.data.list.length&&e.threeIndex.push(o));case 11:o++,i.next=5;break;case 14:e.getCartData(),e.$forceUpdate(),e.$emit("netFinish",!0);case 17:case"end":return i.stop()}}),i)})))()},getCartData:function(e){var i=this;return(0,o.default)(s.default.mark((function e(){var n,o,a,c,l;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.getStorageSync("token")){e.next=3;break}return i.$emit("netFinish",!0),e.abrupt("return");case 3:return e.next=5,i.$api.sendRequest({url:"/api/cart/lists",async:!1});case 5:if(n=e.sent,!(n.code>=0)){e.next=31;break}i.cartList=n.data,o=i.cateList[i.oneIndex].child_list[i.twoIndex].child_list,a=0;case 10:if(!(a<o.length)){e.next=29;break}if(-1==i.threeIndex.indexOf(a)){e.next=26;break}c=0;case 13:if(!(c<i.cartList.length)){e.next=26;break}l=0;case 15:if(!(l<o[a].goods_list.length)){e.next=23;break}if(i.cartList[c].sku_id!=o[a].goods_list[l].sku_id){e.next=20;break}return o[a].goods_list[l].num=i.cartList[c].num,o[a].goods_list[l].cart_id=i.cartList[c].cart_id,e.abrupt("break",23);case 20:l++,e.next=15;break;case 23:c++,e.next=13;break;case 26:a++,e.next=10;break;case 29:i.$forceUpdate(),i.$emit("netFinish",!0);case 31:case"end":return e.stop()}}),e)})))()},selectOneCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.oneIndex=e,this.twoIndex=0,this.cateList[this.oneIndex].child_list&&this.cateList[this.oneIndex].child_list.length&&this.cateList[this.oneIndex].child_list[this.twoIndex].child_list&&this.cateList[this.oneIndex].child_list[this.twoIndex].child_list&&this.getGoodsList(),this.$nextTick((function(){var e=this,i=t.createSelectorQuery().in(this);i.select(".category-cate-top").boundingClientRect((function(t){e.height=t.height+"px"})).exec()}))},selectTwoCategory:function(t){this.twoIndex=t,this.cateList[this.oneIndex].child_list[this.twoIndex].child_list&&this.cateList[this.oneIndex].child_list[this.twoIndex].child_list&&this.getGoodsList()},threeGoodsImgError:function(t,e){this.cateList[this.oneIndex].child_list[this.twoIndex].child_list[t].goods_list[e].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},toListDetail:function(t){var e={category_id:t};this.$util.redirectTo("/pages/goods/list/list",e)}}};e.default=l}).call(this,i("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/diy-goods-level-category/diy-goods-level-three-third-create-component',
    {
        'components/diy-goods-level-category/diy-goods-level-three-third-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("60be"))
        })
    },
    [['components/diy-goods-level-category/diy-goods-level-three-third-create-component']]
]);
