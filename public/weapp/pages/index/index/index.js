(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index/index"],{"0cbc":function(t,e,i){"use strict";var n=i("e4fc"),o=i.n(n);o.a},1067:function(t,e,i){"use strict";i.r(e);var n=i("18a2"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"18a2":function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("2eee")),a=n(i("448a")),r=n(i("c973")),c=(n(i("7c6e")),i("77ef"),n(i("0f13"))),s=t.getSystemInfoSync(),u={components:{uniPopup:function(){i.e("components/uni-popup/uni-popup").then(function(){return resolve(i("9ecd"))}.bind(null,i)).catch(i.oe)},diyBottomNav:function(){i.e("components/diy-bottom-nav/diy-bottom-nav").then(function(){return resolve(i("8627"))}.bind(null,i)).catch(i.oe)},nsNavbar:function(){i.e("components/ns-navbar/ns-navbar").then(function(){return resolve(i("456e"))}.bind(null,i)).catch(i.oe)},diyIndexPage:function(){i.e("components/diy-index-page/diy-index-page").then(function(){return resolve(i("9aea"))}.bind(null,i)).catch(i.oe)},diyGroup:function(){i.e("components/diy-group/diy-group").then(function(){return resolve(i("c3ea"))}.bind(null,i)).catch(i.oe)},nsCopyRight:function(){i.e("components/ns-copyright/ns-copyright").then(function(){return resolve(i("0415"))}.bind(null,i)).catch(i.oe)}},data:function(){return{diyData:{global:{title:"",popWindow:{imageUrl:"",count:-1,link:{}}}},navTitle:"",webSiteInfo:null,memberId:0,id:0,city:"",siteId:0,isIphoneX:!1,pageHeight:"0",headerHeight:"0",bottomHeight:"0",topIndexValue:null,statusBarHeight:s.statusBarHeight,collectTop:44,showTip:!1,mpCollect:!1,websiteInfoStatus:1,isChangeCity:0,pageScrollTop:0}},mixins:[c.default],computed:{top:function(){var t=0;return t=this.isIphoneX?180:140,t},bgColor:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.bgColor),t},bgImg:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.topNavbg?"url("+this.$util.img(this.diyData.global.bgUrl)+")":this.diyData.global.bgColor),t},bgUrl:function(){var t="";return this.diyData&&this.diyData.global&&(t=this.diyData.global.topNavbg?"transparent":this.diyData.global.bgUrl),t},bgNav:function(){return this.diyData.global.topNavColor?{background:this.diyData.global.topNavColor}:{background:"#ffffff"}},backgroundUrl:function(){var t=this.bgUrl?"background:url("+this.$util.img(this.bgUrl)+") no-repeat 0 0/100%":"";return t},scrollHeight:function(){if(void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight){var t="calc(".concat(this.pageHeight,"px - ").concat(this.headerHeight," - ").concat(this.bottomHeight,")");return t}return"100vh"},scrollTopHeight:function(){if(void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight){var t="calc(".concat(this.pageHeight,"px - ").concat(this.headerHeight," - ").concat(this.bottomHeight," - 80rpx)");return t}return"100vh"},textNavColor:function(){return this.diyData.global.textNavColor?this.diyData.global.textNavColor:"#ffffff"},openBottomNav:function(){var t=!1;return this.diyData&&this.diyData.global&&(t=this.diyData.global.openBottomNav),t},minHeight:function(){return void 0!=this.pageHeight&&void 0!=this.headerHeight&&void 0!=this.bottomHeight?"calc(100vh - "+this.headerHeight+" - "+this.bottomHeight+" - 80rpx)":"100vh"},globalS:function(){return this.diyData.global}},onPullDownRefresh:function(){var t=this;return(0,r.default)(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDiyInfo();case 2:case"end":return e.stop()}}),e)})))()},onLoad:function(e){if(t.hideTabBar(),this.siteId=parseInt(e.site_id)||0,this.isIphoneX=this.$util.uniappIsIPhoneX(),e.web_city&&t.setStorageSync("city",{id:e.web_city,title:decodeURI(e.title)}),this.siteId&&t.removeStorageSync("city"),e.suid&&t.setStorageSync("suid",e.suid),e.scene){var i=decodeURIComponent(e.scene);i=i.split("&"),i.length&&i.forEach((function(e){-1!=e.indexOf("suid")&&t.setStorageSync("suid",e.split("-")[1])}))}},onHide:function(){this.$store.commit("setDiySeckillInterval",null),this.isChangeCity=0},onShow:function(){var e=this;return(0,r.default)(o.default.mark((function i(){return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.getStorageSync("websiteInfoStatus")&&(e.websiteInfoStatus=t.getStorageSync("websiteInfoStatus")),i.next=3,e.refresh();case 3:e.getHeight(),e.$store.commit("setDiySeckillInterval",1);case 5:case"end":return i.stop()}}),i)})))()},onPageScroll:function(t){this.pageScrollTop=t.scrollTop,this.$refs.topNav&&(t.scrollTop>=20?this.$refs.topNav.navTopBg():this.$refs.topNav.unSetnavTopBg())},methods:{callback:function(){this.$refs.indexPage&&this.$refs.indexPage.initPageIndex()},refresh:function(){var e=this;return(0,r.default)(o.default.mark((function i(){return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.$langConfig.refresh(),t.getStorageSync("token")&&e.getMemberId(),e.$store.dispatch("defaultImg"),e.$store.dispatch("getThemeStyle"),e.getWebSitefo(),t.getStorageSync("city")?e.city=t.getStorageSync("city").title:(t.setStorageSync("city",{id:0,title:"全国"}),e.city="全国"),i.next=8,e.getDiyInfo();case 8:case"end":return i.stop()}}),i)})))()},getHeight:function(){var e=this;t.getSystemInfo({success:function(t){e.pageHeight=t.screenHeight}}),this.$nextTick((function(){var i=t.createSelectorQuery().in(e);i.select(".page-header").boundingClientRect((function(t){e.headerHeight=t.height+"px"})).exec()})),this.$nextTick((function(){var i=t.createSelectorQuery().in(e);i.select(".tabBar-fill").boundingClientRect((function(t){e.bottomHeight=t.height+"px"})).exec()}))},getDiyInfo:function(){var e=this;return(0,r.default)(o.default.mark((function i(){var n,r,c;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n="DIY_VIEW_INDEX",r=t.getStorageSync("city"),r.id&&(n="DIY_VIEW_CITY_INDEX"),c=t.getStorageSync("website_id")?t.getStorageSync("website_id"):0,e.$api.sendRequest({url:"/api/diyview/info",data:{name:n,website_id:c},async:!0,success:function(i){if(0!=i.code||!i.data)return e.$refs.loadingCover&&e.$refs.loadingCover.hide(),void(e.diyData={});var n=i.data;if(n.value=n.value.replace(/\@/g,"'"),n.value){e.diyData=JSON.parse(n.value),e.isChangeCity=1,e.$langConfig.title(e.diyData.global.title),e.navTitle=e.diyData.global.title,e.mpCollect=e.diyData.global.mpCollect,e.diyData.global.popWindow&&e.diyData.global.popWindow.imageUrl&&setTimeout((function(){if(1==e.diyData.global.popWindow.count){var i=t.getStorageSync("index_popwindow_count");(e.$refs.uniPopupWindow&&""==i||e.$refs.uniPopupWindow&&1==i)&&(e.$refs.uniPopupWindow.open(),t.setStorageSync("index_popwindow_count",1))}else 0==e.diyData.global.popWindow.count&&(e.$refs.uniPopupWindow.open(),t.setStorageSync("index_popwindow_count",0))}),500);var o=-1;e.diyData.value.forEach((function(t,i){if("Search"==t.controller&&2==t.isPosition){var n;o=i;var r=e.diyData.value.slice(o,o+1);e.diyData.value.splice(o,1),(n=e.diyData.value).splice.apply(n,[0,0].concat((0,a.default)(r)))}}));for(var r=0;r<e.diyData.value.length;r++)"TopCategory"==e.diyData.value[r].controller&&(e.topIndexValue=e.diyData.value[r]);!t.getStorageSync("isCollect")&&e.diyData.global.mpCollect&&(e.$refs.collectPopupWindow.open(),e.showTip=!0)}t.stopPullDownRefresh(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(i){t.stopPullDownRefresh(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}});case 5:case"end":return i.stop()}}),i)})))()},closePopupWindow:function(){this.$refs.uniPopupWindow.close(),t.setStorageSync("index_popwindow_count",-1)},closeCollectPopupWindow:function(){this.$refs.collectPopupWindow.close(),t.setStorageSync("isCollect",!0)},redirectTo:function(t){this.$util.diyRedirectTo(t)},getMemberId:function(){var t=this;this.$api.sendRequest({url:"/api/member/id",success:function(e){e.code>=0&&(t.memberId=e.data)}})},getWebSitefo:function(){var e=this;this.webSiteInfo=t.getStorageSync("web_site_info"),this.webSiteInfo&&(this.webSiteInfo=JSON.parse(this.webSiteInfo)),this.$api.sendRequest({url:"/api/website/info",success:function(i){var n=i.data;if(n){if(e.webSiteInfo=n,e.webSiteInfo.wap_status)return;e.$refs.uniPopupClose.open(),t.setStorageSync("web_site_info",JSON.stringify(e.webSiteInfo))}}})},onShareTimeline:function(){var t="";return this.memberId&&(t="suid="+this.memberId),{title:"",query:t,imageUrl:""}}},onShareAppMessage:function(e){var i="";this.webSiteInfo&&(i=this.webSiteInfo.title);var n="/pages/index/index/index",o=t.getStorageSync("city");return o.id&&(n+="?name=DIY_VIEW_CITY_INDEX&web_city="+o.id+"&title="+encodeURI(o.title)),o.id&&this.memberId?n+="&suid="+this.memberId:this.memberId&&(n+="?suid="+this.memberId),{title:i,path:n,success:function(t){},fail:function(t){}}},onReady:function(){}};e.default=u}).call(this,i("543d")["default"])},"5cf2":function(t,e,i){"use strict";var n=i("9308"),o=i.n(n);o.a},"75ec":function(t,e,i){"use strict";i.r(e);var n=i("f764"),o=i("1067");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("0cbc"),i("5cf2"),i("9450");var r=i("f0c5"),c=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"2569e151",null,!1,n["a"],void 0);e["default"]=c.exports},"85d5":function(t,e,i){},9308:function(t,e,i){},9450:function(t,e,i){"use strict";var n=i("85d5"),o=i.n(n);o.a},afe5:function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("3a80");n(i("66fd"));var o=n(i("75ec"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},e4fc:function(t,e,i){},f764:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={nsNavbar:function(){return i.e("components/ns-navbar/ns-navbar").then(i.bind(null,"456e"))},diyIndexPage:function(){return i.e("components/diy-index-page/diy-index-page").then(i.bind(null,"9aea"))},diyGroup:function(){return i.e("components/diy-group/diy-group").then(i.bind(null,"c3ea"))},nsCopyright:function(){return i.e("components/ns-copyright/ns-copyright").then(i.bind(null,"0415"))},uniPopup:function(){return i.e("components/uni-popup/uni-popup").then(i.bind(null,"9ecd"))},diyBottomNav:function(){return i.e("components/diy-bottom-nav/diy-bottom-nav").then(i.bind(null,"8627"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"5203"))}},o=function(){var t=this.$createElement,e=(this._self._c,this.diyData.global&&this.diyData.global.popWindow?this.$util.img(this.diyData.global.popWindow.imageUrl):null),i=this.showTip?this.$util.img("/upload/uniapp/collect2.png"):null;this.$mp.data=Object.assign({},{$root:{g0:e,g1:i}})},a=[]}},[["afe5","common/runtime","common/vendor"]]]);