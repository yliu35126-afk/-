(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/point/detail/detail"],{"0c98":function(n,t,o){"use strict";(function(n){var i=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(o("16e3")),p={components:{uniPopup:function(){o.e("components/uni-popup/uni-popup").then(function(){return resolve(o("9ecd"))}.bind(null,o)).catch(o.oe)},uniNumberBox:function(){o.e("components/uni-number-box/uni-number-box").then(function(){return resolve(o("ce42"))}.bind(null,o)).catch(o.oe)}},data:function(){return{id:0,pointInfo:{image:""},isLogin:!1,Max:0,number:1}},onLoad:function(t){n.getStorageSync("token")&&(this.isLogin=!0),t.id?this.id=t.id:this.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo"),this.getPointInfo()},onShow:function(){this.$langConfig.refresh(),n.getStorageSync("token")&&(this.isLogin=!0)},computed:{themeStyle:function(){return"theme-"+this.$store.state.themeStyle}},methods:{getPointInfo:function(){var t=this;this.$api.sendRequest({url:"/pointexchange/api/goods/detail",data:{id:this.id},success:function(o){if(t.$refs.loadingCover.hide(),0==o.code&&o.data){if(2==o.data.type&&!o.data.platformcoupon_type_id)return t.$util.showToast({title:"该礼品已过期"}),void setTimeout((function(){t.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")}),1e3);if(1==o.data.type&&!o.data.gift_id)return t.$util.showToast({title:"该优惠券已过期"}),void setTimeout((function(){t.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")}),1e3);t.pointInfo=o.data,t.pointInfo.content&&(t.pointInfo.content=(0,e.default)(t.pointInfo.content)),n.setNavigationBarTitle({title:t.pointInfo.name});var i=2==t.pointInfo.type?t.pointInfo.count:t.pointInfo.stock;t.pointInfo.point;t.Max=i}else t.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")}})},openPointPopup:function(){this.$refs.pointPopup.open()},close:function(){this.$refs.pointPopup.close()},numChange:function(n,t){n<1&&(n=1),this.number=n},confirm:function(){var t=this,o={id:this.id,num:this.number};n.setStorage({key:"exchangeOrderCreateData",data:o,success:function(){n.getStorageSync("token")?t.$util.redirectTo("/promotionpages/point/payment/payment"):t.$refs.login.open("/promotionpages/point/payment/payment")}})},login:function(){this.$refs.login.open("/promotionpages/point/detail/detail?id="+this.id)},makeSure:function(){this.Max>0?this.confirm():this.$util.showToast({title:"库存不足"})},imgError:function(){var n="";n=1==this.pointInfo.type?this.$util.img("upload/uniapp/point/gift.png"):2==this.pointInfo.type?this.$util.img("upload/uniapp/point/coupon.png"):3==this.pointInfo.type?this.$util.img("upload/uniapp/point/hongbao.png"):this.$util.getDefaultImage().default_goods_img,this.pointInfo.image=n,this.$forceUpdate()}}};t.default=p}).call(this,o("543d")["default"])},"1dc0":function(n,t,o){"use strict";o.r(t);var i=o("eb11"),e=o("49d7");for(var p in e)["default"].indexOf(p)<0&&function(n){o.d(t,n,(function(){return e[n]}))}(p);o("d1b4");var u=o("f0c5"),a=Object(u["a"])(e["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=a.exports},"49d7":function(n,t,o){"use strict";o.r(t);var i=o("0c98"),e=o.n(i);for(var p in i)["default"].indexOf(p)<0&&function(n){o.d(t,n,(function(){return i[n]}))}(p);t["default"]=e.a},"84f8":function(n,t,o){},b509:function(n,t,o){"use strict";(function(n,t){var i=o("4ea4");o("3a80");i(o("66fd"));var e=i(o("1dc0"));n.__webpack_require_UNI_MP_PLUGIN__=o,t(e.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},d1b4:function(n,t,o){"use strict";var i=o("84f8"),e=o.n(i);e.a},eb11:function(n,t,o){"use strict";o.d(t,"b",(function(){return e})),o.d(t,"c",(function(){return p})),o.d(t,"a",(function(){return i}));var i={uniPopup:function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"9ecd"))},uniNumberBox:function(){return o.e("components/uni-number-box/uni-number-box").then(o.bind(null,"ce42"))},loadingCover:function(){return o.e("components/loading-cover/loading-cover").then(o.bind(null,"5203"))},nsLogin:function(){return Promise.all([o.e("common/vendor"),o.e("components/ns-login/ns-login")]).then(o.bind(null,"3584"))}},e=function(){var n=this,t=n.$createElement,o=(n._self._c,2==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null),i=2!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/coupon.png"),e=2!=n.pointInfo.type&&3==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null,p=2==n.pointInfo.type||3!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/hongbao.png"),u=2!=n.pointInfo.type&&3!=n.pointInfo.type?n.$util.img(n.pointInfo.image):null,a=2==n.pointInfo.type&&1!=n.pointInfo.validity_type?n.$util.timeStampTurnTime(n.pointInfo.end_time):null,l=1==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null,r=1!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/gift.png"),f=2==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null,c=2!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/coupon.png"),s=3==n.pointInfo.type&&n.pointInfo.image?n.$util.img(n.pointInfo.image):null,d=3!=n.pointInfo.type||n.pointInfo.image?null:n.$util.img("upload/uniapp/point/hongbao.png");n.$mp.data=Object.assign({},{$root:{g0:o,g1:i,g2:e,g3:p,g4:u,g5:a,g6:l,g7:r,g8:f,g9:c,g10:s,g11:d}})},p=[]}},[["b509","common/runtime","common/vendor"]]]);