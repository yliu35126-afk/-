(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/presale/order_list/order_list"],{"10e7":function(e,t,r){"use strict";r.r(t);var a=r("6c0f"),s=r("96e9");for(var n in s)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return s[e]}))}(n);r("938d"),r("9f5f");var o=r("f0c5"),i=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"a2232b4c",null,!1,a["a"],void 0);t["default"]=i.exports},"5e07":function(e,t,r){"use strict";(function(e,t){var a=r("4ea4");r("3a80");a(r("66fd"));var s=a(r("10e7"));e.__webpack_require_UNI_MP_PLUGIN__=r,t(s.default)}).call(this,r("bc2e")["default"],r("543d")["createPage"])},"6b0a":function(e,t,r){"use strict";(function(e){var a=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(r("4042")),n=a(r("0f13")),o={data:function(){return{scrollInto:"",orderStatus:"",statusList:[],orderList:[],contentText:{},isIphoneX:!1,orderData:{},payMoney:0,payType:"",timestamp:0,memberBalance:0,isBalance:0,isSub:!1}},components:{nsPayment:function(){r.e("components/payment/payment").then(function(){return resolve(r("0c78"))}.bind(null,r)).catch(r.oe)}},mixins:[s.default,n.default],onLoad:function(e){e.status&&(this.orderStatus=e.status)},computed:{balanceDeduct:function(){if(1==this.orderData.order_status&&""==this.orderData.final_out_trade_no&&this.memberBalance>0){var e=this.orderData.order_money-this.orderData.presale_deposit_money;return(this.memberBalance>e?e:this.memberBalance).toFixed(2)}return 0}},onShow:function(){this.$langConfig.refresh(),this.isIphoneX=this.$util.uniappIsIPhoneX(),this.getOrderStatus(),e.getStorageSync("token")?this.$refs.mescroll&&this.$refs.mescroll.refresh():this.$util.redirectTo("/pages/login/login/login",{back:"/promotionpages/presale/order_list/order_list"}),this.getMmemberBalance()},methods:{getMmemberBalance:function(){var e=this;this.$api.sendRequest({url:"/api/memberaccount/info",data:{account_type:"balance,balance_money"},success:function(t){t.data&&(e.memberBalance=parseFloat(t.data.balance)+parseFloat(t.data.balance_money))}})},ontabtap:function(e){var t=e.target.dataset.current||e.currentTarget.dataset.current;this.orderStatus=this.statusList[t].status,this.$refs.loadingCover.show(),this.$refs.mescroll.refresh()},getListData:function(e){var t=this;this.$api.sendRequest({url:"/presale/api/order/page",data:{page:e.num,page_size:e.size,order_status:this.orderStatus},success:function(r){t.timestamp=r.timestamp;var a=[],s=r.message;0==r.code&&r.data?a=r.data.list:t.$util.showToast({title:s}),e.endSuccess(a.length),1==e.num&&(t.orderList=[]),t.orderList=t.orderList.concat(a),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(r){e.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getOrderStatus:function(){this.statusList=[{status:"",name:"全部",id:"status_0"},{status:0,name:"待付款",id:"status_0"},{status:1,name:"待付尾款",id:"status_1"},{status:2,name:"已完成",id:"status_2"},{status:-1,name:"已关闭",id:"status_3"}]},operation:function(e,t){var r=this;switch(e){case"deleteOrder":this.deleteOrder(t.id,(function(){r.$refs.mescroll.refresh()}));break;case"orderClose":this.orderClose(t.id,(function(){r.$refs.mescroll.refresh()}));break;case"orderPayDeposit":this.orderData=t,this.openPaymentPopup(t,"presale_deposit_money");break;case"refundDeposit":this.refundDeposit(t.id,(function(){r.$refs.mescroll.refresh()}));break;case"orderPayFinal":this.orderData=t,this.openPaymentPopup(t,"final_money");break}},orderDetail:function(e){this.$util.redirectTo("/promotionpages/presale/order_detail/order_detail",{order_id:e.id})},imageError:function(e){this.orderList[e].sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},pay:function(){var e=this;this.isSub||(this.isSub=!0,"final_money"==this.payType?this.orderPayFinal(this.orderData,(function(){e.$refs.mescroll.refresh()})):"presale_deposit_money"==this.payType&&this.orderPayDeposit(this.orderData,(function(){e.$refs.mescroll.refresh()})))}}};t.default=o}).call(this,r("543d")["default"])},"6c0f":function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return a}));var a={nsEmpty:function(){return r.e("components/ns-empty/ns-empty").then(r.bind(null,"da15"))},loadingCover:function(){return r.e("components/loading-cover/loading-cover").then(r.bind(null,"5203"))}},s=function(){var e=this,t=e.$createElement,r=(e._self._c,e.orderList.length),a=r>0?e.__map(e.orderList,(function(t,r){var a=e.__get_orig(t),s=e.$util.img(t.sku_image,{size:"mid"}),n=e.$lang("common.currencySymbol"),o=0===t.order_status?e.$lang("common.currencySymbol"):null,i=0!==t.order_status&&1===t.order_status?e.$lang("common.currencySymbol"):null,u=0!==t.order_status&&1!==t.order_status&&2===t.order_status?e.$lang("common.currencySymbol"):null,c=0!==t.order_status&&1!==t.order_status&&2!==t.order_status&&-1===t.order_status?e.$lang("common.currencySymbol"):null,l=t.action.length;return{$orig:a,g1:s,m0:n,m1:o,m2:i,m3:u,m4:c,g2:l}})):null,s=r>0?null:e.$lang("emptyTips");e.$mp.data=Object.assign({},{$root:{g0:r,l0:a,m5:s}})},n=[]},8682:function(e,t,r){},"86ac":function(e,t,r){},"938d":function(e,t,r){"use strict";var a=r("86ac"),s=r.n(a);s.a},"96e9":function(e,t,r){"use strict";r.r(t);var a=r("6b0a"),s=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},"9f5f":function(e,t,r){"use strict";var a=r("8682"),s=r.n(a);s.a}},[["5e07","common/runtime","common/vendor"]]]);