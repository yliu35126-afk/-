(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/bargain/list/list"],{"0584":function(n,t,i){"use strict";i.r(t);var e=i("507e"),a=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(n){i.d(t,n,(function(){return e[n]}))}(o);t["default"]=a.a},"191c":function(n,t,i){"use strict";var e=i("d628"),a=i.n(e);a.a},"507e":function(n,t,i){"use strict";(function(n){var e=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=e(i("0f13")),o={components:{uniCountDown:function(){i.e("components/uni-count-down/uni-count-down").then(function(){return resolve(i("e48e"))}.bind(null,i)).catch(i.oe)},nsAdv:function(){i.e("components/ns-adv/ns-adv").then(function(){return resolve(i("2029"))}.bind(null,i)).catch(i.oe)}},data:function(){return{dataList:[],siteId:0,dataListing:[],isLoading:!0,mescroll:null}},onLoad:function(n){n.site_id&&(this.siteId=n.site_id)},onShow:function(){var t=this;this.$langConfig.refresh(),this.$store.dispatch("getAddonIsexit").then((function(i){i.bargain?(n.getStorageSync("token")&&t.getDataing(),t.$refs.mescroll.refresh()):(t.$util.showToast({title:"砍价未开启",mask:!0}),setTimeout((function(){t.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),1e3))}))},mixins:[a.default],methods:{getData:function(n){var t=this;this.mescroll=n;var i={page_size:n.size,page:n.num};this.siteId&&(i.site_id=this.siteId),this.$api.sendRequest({url:"/bargain/api/goods/page",data:i,success:function(i){var e=[],a=i.message;0==i.code&&i.data?e=i.data.list:t.$util.showToast({title:a}),n.endSuccess&&n.endSuccess(e.length),1==n.num&&(t.dataList=[]),t.dataList=t.dataList.concat(e),t.isLoading=!0,t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(){n.endErr&&n.endErr(),this.$refs.loadingCover&&this.$refs.loadingCover.hide()}})},getDataing:function(){var n=this,t={};this.siteId&&(t.site_id=this.siteId),this.$api.sendRequest({url:"/bargain/api/goods/bargainingList",data:t,success:function(t){for(var i in n.dataListing=t.data,t.data)n.dataListing[i].time=n.$util.countDown(t.data[i].end_time-t.timestamp);n.isLoading=!0,n.$refs.loadingCover&&n.$refs.loadingCover.hide()},fail:function(){mescroll.endErr(),this.$refs.loadingCover&&this.$refs.loadingCover.hide()}})},toDetail:function(n){this.$util.redirectTo("/promotionpages/bargain/detail/detail",{bargain_id:n.bargain_id})},toDetailP:function(n){this.$util.redirectTo("/promotionpages/bargain/launch/launch",{id:n.launch_id})},imgError:function(n){this.dataList[n].goods_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},goodsImg:function(n){var t=n.split(",");return t[0]?this.$util.img(t[0],{size:"mid"}):this.$util.getDefaultImage().default_goods_img},progress:function(n){var t=(parseInt(n.sale_num)/(parseInt(n.bargain_stock)+parseInt(n.sale_num))*100).toFixed();return"NaN"==t&&(t=0),t},progressP:function(n){var t=((parseFloat(n.price)-parseFloat(n.curr_price))/parseFloat(n.price)*100).toFixed();return"NaN"==t&&(t=0),t},goodsTag:function(n){switch(n.recommend_way){case 1:return"新品";case 2:return"精品";case 3:return"推荐";default:return""}}},onShareAppMessage:function(n){return{title:"砍价，优惠更多哦",path:"/promotionpages/bargain/list/list",success:function(n){},fail:function(n){}}}};t.default=o}).call(this,i("543d")["default"])},"65d9":function(n,t,i){"use strict";var e=i("c990"),a=i.n(e);a.a},"94e6":function(n,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return e}));var e={nsAdv:function(){return i.e("components/ns-adv/ns-adv").then(i.bind(null,"2029"))},uniCountDown:function(){return i.e("components/uni-count-down/uni-count-down").then(i.bind(null,"e48e"))},nsEmpty:function(){return i.e("components/ns-empty/ns-empty").then(i.bind(null,"da15"))},loadingCover:function(){return i.e("components/loading-cover/loading-cover").then(i.bind(null,"5203"))}},a=function(){var n=this,t=n.$createElement,i=(n._self._c,n.addonIsExit.bargain&&n.isLoading?n.dataList.length>0||n.dataListing.length>0:null),e=n.addonIsExit.bargain&&n.isLoading&&i?n.dataListing.length:null,a=n.addonIsExit.bargain&&n.isLoading&&i&&e?n.__map(n.dataListing,(function(t,i){var e=n.__get_orig(t),a=n.goodsImg(t.goods_image),o=n.goodsTag(t),s=""!=o?n.goodsTag(t):null,r=n.progressP(t),d=(t.price-t.curr_price).toFixed(2);return{$orig:e,m0:a,m1:o,m2:s,m3:r,g2:d}})):null,o=n.addonIsExit.bargain&&n.isLoading&&i?n.dataList.length:null,s=n.addonIsExit.bargain&&n.isLoading&&i&&o?n.__map(n.dataList,(function(t,i){var e=n.__get_orig(t),a=n.goodsImg(t.goods_image),o=n.goodsTag(t),s=""!=o?n.goodsTag(t):null,r=n.progress(t),d=n.$lang("common.currencySymbol"),u=n.$lang("common.currencySymbol");return{$orig:e,m4:a,m5:o,m6:s,m7:r,m8:d,m9:u}})):null,r=n.addonIsExit.bargain&&n.isLoading?n.isLoading&&!n.dataList.length&&!n.dataListing.length:null;n.$mp.data=Object.assign({},{$root:{g0:i,g1:e,l0:a,g3:o,l1:s,g4:r}})},o=[]},a3c0:function(n,t,i){"use strict";i.r(t);var e=i("94e6"),a=i("0584");for(var o in a)["default"].indexOf(o)<0&&function(n){i.d(t,n,(function(){return a[n]}))}(o);i("191c"),i("65d9");var s=i("f0c5"),r=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,"a6ef5500",null,!1,e["a"],void 0);t["default"]=r.exports},c990:function(n,t,i){},d628:function(n,t,i){},dc2b:function(n,t,i){"use strict";(function(n,t){var e=i("4ea4");i("3a80");e(i("66fd"));var a=e(i("a3c0"));n.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])}},[["dc2b","common/runtime","common/vendor"]]]);