(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/member/coupon/coupon"],{"022a":function(t,e,o){"use strict";o.r(e);var n=o("9f6a"),i=o("22b7");for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("60af");var u=o("f0c5"),a=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,"a536c64c",null,!1,n["a"],void 0);e["default"]=a.exports},"212c":function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("0f13")),s={data:function(){return{couponType:1,type:"",state:1,list:[],isIphoneX:!1,showEmpty:!1,emptyBtn:{text:"去领取",url:"/otherpages/goods/coupon/coupon"},text:"您还没有优惠券哦"}},mixins:[i.default],onLoad:function(t){this.isIphoneX=this.$util.uniappIsIPhoneX()},onShow:function(){var e=this;this.$langConfig.refresh(),this.$store.dispatch("getAddonIsexit").then((function(o){if(o.coupon){if(!t.getStorageSync("token")){var n=getCurrentPages(),i=n[n.length-1].options,s=n[n.length-1].route;i.back=s,e.$util.redirectTo("/pages/login/login/login",i)}e.$refs.mescroll&&e.$refs.mescroll.refresh(!1)}else e.$util.showToast({title:"优惠券未开启",mask:!0}),setTimeout((function(){e.$util.redirectTo("/pages/member/index/index",{},"redirectTo")}),1e3)}))},methods:{changeType:function(t){this.list=[],this.couponType=t,this.$refs.mescroll.refresh(!1)},changeState:function(t){this.list=[],this.state=t,this.$refs.mescroll.refresh(!1),1==this.state?this.text="您还没有优惠券哦":2==this.state?this.text="您还没有使用过优惠券哦":this.text="您还没有过期优惠券哦"},getMemberCounponList:function(t){var e=this;this.showEmpty=!1;var o=1==this.couponType?"/coupon/api/coupon/memberpage":"/platformcoupon/api/platformcoupon/memberpage";this.$api.sendRequest({url:o,data:{page:t.num,page_size:t.size,state:this.state,is_own:this.type},success:function(o){e.showEmpty=!0;var n=[],i=o.message;0==o.code&&o.data?n=o.data.list:e.$util.showToast({title:i}),t.endSuccess(n.length),1==t.num&&(e.list=[]),e.list=e.list.concat(n),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(o){t.endErr(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},toGoodsList:function(t){1==this.state&&(1==this.couponType?1!=t.goods_type?this.$util.redirectTo("/otherpages/shop/list/list",{couponId:t.coupon_type_id,site_id:t.site_id,coupon:t.coupon_type_id}):this.$util.redirectTo("/otherpages/shop/list/list",{site_id:t.site_id,coupon:t.coupon_type_id}):1!=t.use_scenario?this.$util.redirectTo("/pages/goods/list/list",{platformcouponTypeId:t.platformcoupon_type_id,coupon:t.coupon_type_id}):this.$util.redirectTo("/pages/goods/list/list",{coupon:t.coupon_type_id}))}}};e.default=s}).call(this,o("543d")["default"])},"22b7":function(t,e,o){"use strict";o.r(e);var n=o("212c"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"60af":function(t,e,o){"use strict";var n=o("edc3"),i=o.n(n);i.a},"9f6a":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var n={nsEmpty:function(){return o.e("components/ns-empty/ns-empty").then(o.bind(null,"da15"))},loadingCover:function(){return o.e("components/loading-cover/loading-cover").then(o.bind(null,"5203"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.addonIsExit.coupon?t.__map(t.list,(function(e,o){var n=t.__get_orig(e),i=t.$util.img(1==e.state?"/upload/uniapp/coupon/bg_lingqu.png":"/upload/uniapp/coupon/bg_lingqu_gary.png"),s="reward"!=e.type&&e.discount?null:parseInt(e.money),u="reward"!=e.type&&e.discount&&"discount"==e.type?parseFloat(e.discount):null,a=e.validity_type?null:t.$util.timeStampTurnTime(e.end_time);return{$orig:n,g0:i,m0:s,m1:u,g1:a}})):null),n=t.addonIsExit.coupon?!t.list.length&&t.showEmpty:null;t.$mp.data=Object.assign({},{$root:{l0:o,g2:n}})},s=[]},ebe0:function(t,e,o){"use strict";(function(t,e){var n=o("4ea4");o("3a80");n(o("66fd"));var i=n(o("022a"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},edc3:function(t,e,o){}},[["ebe0","common/runtime","common/vendor"]]]);