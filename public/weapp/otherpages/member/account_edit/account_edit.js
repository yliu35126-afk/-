(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/member/account_edit/account_edit"],{6274:function(a,t,e){},"7b57":function(a,t,e){"use strict";e.r(t);var r=e("a812"),i=e.n(r);for(var n in r)["default"].indexOf(n)<0&&function(a){e.d(t,a,(function(){return r[a]}))}(n);t["default"]=i.a},"7e68":function(a,t,e){"use strict";e.r(t);var r=e("d6c6"),i=e("7b57");for(var n in i)["default"].indexOf(n)<0&&function(a){e.d(t,a,(function(){return i[a]}))}(n);e("82ec");var o=e("f0c5"),c=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=c.exports},"82ec":function(a,t,e){"use strict";var r=e("6274"),i=e.n(r);i.a},a812:function(a,t,e){"use strict";(function(a){var r=e("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(e("1ad3")),n=r(e("0f13")),o={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:""}},onLoad:function(a){a.id&&(this.formData.id=a.id),a.back&&(this.back=a.back)},mixins:[n.default],onShow:function(){this.$langConfig.refresh(),this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?a.setNavigationBarTitle({title:"编辑账户"}):a.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(a){var t=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(a){0==a.code&&a.data&&(t.accountInfo=a.data,t.formData.realname=a.data.realname,t.formData.mobile=a.data.mobile,t.formData.bank_account=a.data.bank_account,t.formData.branch_bank_name=a.data.branch_bank_name,t.formData.withdraw_type=a.data.withdraw_type),t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(a){t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getTransferType:function(){var a=this;this.payList=[],this.$api.sendRequest({url:"/api/memberwithdraw/transferType",success:function(t){if(t.code>=0&&t.data){for(var e in a.transferType=t.data,a.transferType)a.formData.withdraw_type||"wechatpay"!=e||(a.formData.withdraw_type=e),a.payList.push(a.transferType[e]);if(a.payList.reverse(),!a.formData.id&&a.$refs.loadingCover&&a.$refs.loadingCover.hide(),a.accountInfo&&-1==a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList)&&a.payList.push(a.accountInfo.withdraw_type_name),a.payList.length&&a.accountInfo)a.index=a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList);else{var r="";for(var i in a.transferType)if(a.transferType[i]==a.payList[a.index]){r=i;break}""!=r&&(a.formData.withdraw_type=r)}}}})},bindPickerChange:function(a){this.index=a.detail.value;var t="";for(var e in this.transferType)this.transferType[e]==this.payList[this.index]&&(t=e);""!=t&&(this.formData.withdraw_type=t)},vertify:function(){this.formData.realname=this.formData.realname.trim(),this.formData.branch_bank_name=this.formData.branch_bank_name.trim(),this.formData.bank_account=this.formData.bank_account.trim(),this.formData.mobile=this.formData.mobile.trim();var a=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&a.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&a.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var t=i.default.check(this.formData,a);return!!t||(this.$util.showToast({title:i.default.error}),this.flag=!1,!1)},saveAccount:function(){var a=this;if(!this.flag&&(this.flag=!0,this.vertify())){var t=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+t,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(t){0==t.code?(a.formData.id?a.$util.showToast({title:"修改成功"}):a.$util.showToast({title:"添加成功"}),""!=a.back?a.$util.redirectTo(a.back,{},a.redirect):a.$util.redirectTo("/otherpages/member/account/account")):(a.flag=!1,a.$util.showToast({title:t.message}))},fail:function(t){a.flag=!1}})}}}};t.default=o}).call(this,e("543d")["default"])},af19:function(a,t,e){"use strict";(function(a,t){var r=e("4ea4");e("3a80");r(e("66fd"));var i=r(e("7e68"));a.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},d6c6:function(a,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return n})),e.d(t,"a",(function(){return r}));var r={loadingCover:function(){return e.e("components/loading-cover/loading-cover").then(e.bind(null,"5203"))}},i=function(){var a=this.$createElement,t=(this._self._c,this.$lang("name")),e=this.$lang("mobilePhone"),r=this.$lang("accountType"),i="wechatpay"!=this.formData.withdraw_type?this.$lang("withdrawalAccount"):null,n=this.$lang("save");this.$mp.data=Object.assign({},{$root:{m0:t,m1:e,m2:r,m3:i,m4:n}})},n=[]}},[["af19","common/runtime","common/vendor"]]]);