(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/index/city/city"],{"0f91":function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={citySelect:function(){return Promise.all([i.e("common/vendor"),i.e("components/city-select/city-select")]).then(i.bind(null,"c247"))}},c=function(){var t=this.$createElement;this._self._c},a=[]},"35fd":function(t,e,i){"use strict";i.r(e);var n=i("0f91"),c=i("bcda");for(var a in c)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return c[t]}))}(a);var s=i("f0c5"),o=Object(s["a"])(c["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=o.exports},"6f60":function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("3a80");n(i("66fd"));var c=n(i("35fd"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(c.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},b37b:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n(i("7c6e")),a={components:{citySelect:function(){Promise.all([i.e("common/vendor"),i.e("components/city-select/city-select")]).then(function(){return resolve(i("c247"))}.bind(null,i)).catch(i.oe)}},data:function(){return{activeCity:null,locationCity:null,obtainCitys:[],hotCity:[{id:0,title:"全国"},{id:110100,title:"北京"},{id:140100,title:"太原"},{id:120100,title:"天津"},{id:130100,title:"石家庄"},{id:370100,title:"济南"}],formatName:"title",cityAddon:0}},onShow:function(){this.$langConfig.refresh(),this.getCityList(),this.getLocation(),this.checkAddonIsexit(),t.getStorageSync("city")&&(this.activeCity=t.getStorageSync("city"))},methods:{getCityList:function(){var e=this;t.getStorageSync("cityData")&&(this.obtainCitys=t.getStorageSync("cityData")),this.$api.sendRequest({url:"/api/address/city",success:function(i){i.data&&(e.obtainCitys=i.data,e.$refs.city.updateCitys(i.data),t.setStorageSync("cityData",i.data))}})},selectCity:function(e){var i=this;this.$api.sendRequest({url:"/api/website/getWebsiteidByAddress",data:{web_city:e.id},success:function(n){n.code>=0&&(n.data?(t.setStorage({key:"city",data:e,success:function(){i.$util.goBack()}}),t.setStorage({key:"website_id",data:n.data.site_id,success:function(){}}),t.setStorage({key:"websiteInfoStatus",data:n.data.status,success:function(){}})):(i.$util.showToast({title:"该城市暂无站点，即将切换成全国"}),setTimeout((function(){t.setStorage({key:"city",data:{id:0,title:"全国"},success:function(){i.$util.goBack()}}),t.setStorage({key:"website_id",data:0,success:function(){}})}),1500)))}})},getLocation:function(){var e=this,i=new c.default({key:this.$config.mpKey});t.getLocation({type:"gcj02",success:function(t){i.reverseGeocoder({location:{latitude:t.latitude,longitude:t.longitude},success:function(t){e.$api.sendRequest({url:"/api/address/citybyname",data:{city:t.result.address_component.city},success:function(t){t.data&&(e.locationCity=t.data)}})},fail:function(t){console.error("定位失败错误信息："+t.message)}})}})},checkAddonIsexit:function(){var t=this;this.$api.sendRequest({url:"/api/addon/isexit",data:{name:"city"},success:function(e){t.cityAddon=e.data}})}}};e.default=a}).call(this,i("543d")["default"])},bcda:function(t,e,i){"use strict";i.r(e);var n=i("b37b"),c=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=c.a}},[["6f60","common/runtime","common/vendor"]]]);