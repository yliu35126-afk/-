(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-register-register"],{"06a6":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.conten-box[data-v-b6e11216]{padding:0 %?30?% %?30?%}.conten-box .title[data-v-b6e11216]{text-align:center;margin-top:%?50?%;margin-bottom:%?10?%}.conten-box .close[data-v-b6e11216]{position:absolute;right:%?30?%;top:%?10?%}.conten-box .con[data-v-b6e11216]{height:%?500?%}[data-v-b6e11216] .reward-popup .uni-popup__wrapper-box{background:none!important;max-width:unset!important;max-height:unset!important;overflow:unset!important}',""]),e.exports=t},"1be8":function(e,t,a){"use strict";a.r(t);var i=a("64af"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);t["default"]=o.a},"3d74":function(e,t,a){"use strict";a.r(t);var i=a("3fd3"),o=a("1be8");for(var n in o)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(n);a("81b0"),a("8145");var r=a("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"b6e11216",null,!1,i["a"],void 0);t["default"]=s.exports},"3fd3":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i}));var i={uniPopup:a("b274").default,loadingCover:a("379d").default,registerReward:a("b7ee").default},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-scroll-view",{staticClass:"container",attrs:{"scroll-y":"true","data-theme":e.themeStyle}},[a("v-uni-view",{staticClass:"header-wrap"},[a("v-uni-view",{staticClass:"title"},[e._v("注册")]),a("v-uni-view",{staticClass:"regisiter-agreement"},[a("v-uni-text",{staticClass:"color-tip"},[e._v("已有账号,")]),a("v-uni-text",{staticClass:"color-base-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toLogin.apply(void 0,arguments)}}},[e._v("立即登录")])],1)],1),a("v-uni-view",{staticClass:"body-wrap"},[a("v-uni-view",{staticClass:"form-wrap"},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.registerMode,expression:"registerMode == 'mobile'"}],staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"area-code"},[e._v("+86")]),a("v-uni-input",{staticClass:"input",attrs:{type:"number",placeholder:"仅限中国大陆手机号注册","placeholder-class":"input-placeholder",maxlength:"11"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"account"==e.registerMode,expression:"registerMode == 'account'"}],staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入账号","placeholder-class":"input-placeholder"},model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"account"==e.registerMode,expression:"registerMode == 'account'"}],staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"input",attrs:{type:"password",placeholder:"请输入密码","placeholder-class":"input-placeholder"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"account"==e.registerMode,expression:"registerMode == 'account'"}],staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"input",attrs:{type:"password",placeholder:"请确认密码","placeholder-class":"input-placeholder"},model:{value:e.formData.rePassword,callback:function(t){e.$set(e.formData,"rePassword",t)},expression:"formData.rePassword"}})],1)],1),1==e.captchaConfig?a("v-uni-view",{staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入验证码","placeholder-class":"input-placeholder"},model:{value:e.formData.vercode,callback:function(t){e.$set(e.formData,"vercode",t)},expression:"formData.vercode"}}),a("v-uni-image",{staticClass:"captcha",attrs:{src:e.captcha.img},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCaptcha.apply(void 0,arguments)}}})],1)],1):e._e(),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.registerMode,expression:"registerMode == 'mobile'"}],staticClass:"input-wrap"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"请输入动态码","placeholder-class":"input-placeholder"},model:{value:e.formData.dynacode,callback:function(t){e.$set(e.formData,"dynacode",t)},expression:"formData.dynacode"}}),a("v-uni-view",{staticClass:"dynacode",class:120==e.dynacodeData.seconds?"color-base-text":"color-tip",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMobileCode.apply(void 0,arguments)}}},[e._v(e._s(e.dynacodeData.codeText))])],1)],1)],1),a("v-uni-view",{staticClass:"login-mode-box"},[a("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:"mobile"==e.registerMode&&-1!=e.registerConfig.register.indexOf("username"),expression:"registerMode == 'mobile' && registerConfig.register.indexOf('username') != -1"}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchRegisterMode.apply(void 0,arguments)}}},[e._v("使用用户名注册")]),a("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:"account"==e.registerMode&&-1!=e.registerConfig.register.indexOf("mobile"),expression:"registerMode == 'account' && registerConfig.register.indexOf('mobile') != -1"}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchRegisterMode.apply(void 0,arguments)}}},[e._v("使用手机号注册")])],1),a("v-uni-view",{staticClass:"btn_view"},[a("v-uni-button",{staticClass:"login-btn color-base-border color-base-bg",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.register.apply(void 0,arguments)}}},[e._v("注册")])],1),a("v-uni-view",{staticClass:"regisiter-agreement"},[e._v("点击注册即代表您已同意"),a("v-uni-text",{staticClass:"color-base-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openPopup.apply(void 0,arguments)}}},[e._v("《注册协议》")])],1)],1),a("v-uni-view",{on:{touchmove:function(t){t.preventDefault(),arguments[0]=t=e.$handleEvent(t)}}},[a("uni-popup",{ref:"registerPopup",attrs:{type:"center",maskClick:!1}},[a("v-uni-view",{staticClass:"conten-box"},[a("v-uni-view",{staticClass:"close"},[a("v-uni-text",{staticClass:"iconfont iconclose",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toClose.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"title"},[e._v(e._s(e.regisiterAgreement.title))]),a("v-uni-view",{staticClass:"con"},[a("v-uni-scroll-view",{staticClass:"con",attrs:{"scroll-y":"true"}},[a("v-uni-rich-text",{attrs:{nodes:e.regisiterAgreement.content}})],1)],1)],1)],1)],1),a("loading-cover",{ref:"loadingCover"}),a("register-reward",{ref:"registerReward"})],1)},n=[]},"64af":function(e,t,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("c975"),a("ac1f"),a("5319"),a("b64b"),a("14d9");var o=i(a("c7eb")),n=i(a("1da1")),r=i(a("b274")),s=i(a("94dc")),c=i(a("b7ee")),d=i(a("25fc")),l=i(a("0aef")),u={components:{uniPopup:r.default,registerReward:c.default},data:function(){return{allowRegister:!0,registerMode:"account",formData:{mobile:"",account:"",password:"",rePassword:"",vercode:"",dynacode:"",key:""},regisiterAgreement:{title:"",content:""},captcha:{id:"",img:""},isSub:!1,back:"",dynacodeData:{seconds:120,timer:null,codeText:"获取动态码",isSend:!1},registerConfig:{register:""},captchaConfig:1}},mixins:[d.default,l.default],onLoad:function(e){e.back&&(this.back=e.back),this.getCaptcha(),this.getRegisiterAggrement(),this.getCaptchaConfig(),uni.getStorageSync("authInfo")&&(this.authInfo=uni.getStorageSync("authInfo"))},onShow:function(){this.$langConfig.refresh()},onReady:function(){var e=this;return(0,n.default)((0,o.default)().mark((function t(){return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRegisterConfig();case 2:e.$refs.loadingCover&&e.$refs.loadingCover.hide();case 3:case"end":return t.stop()}}),t)})))()},methods:{switchRegisterMode:function(){this.registerMode="mobile"==this.registerMode?"account":"mobile"},openPopup:function(){this.$refs.registerPopup.open()},toClose:function(){this.$refs.registerPopup.close()},getRegisiterAggrement:function(){var e=this;this.$api.sendRequest({url:"/api/register/aggrement",success:function(t){t.code>=0&&(e.regisiterAgreement=t.data)}})},getRegisterConfig:function(){var e=this;return(0,n.default)((0,o.default)().mark((function t(){var a;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.sendRequest({url:"/api/register/config",async:!1});case 2:a=t.sent,e.registerConfig=a.data.value,""==e.registerConfig.register?(e.$util.showToast({title:"平台未启用注册!"}),setTimeout((function(){e.$util.redirectTo("/pages/index/index/index",{},"tabbar")}),1e3)):-1!=e.registerConfig.register.indexOf("username")?e.registerMode="account":e.registerMode="mobile",e.$refs.loadingCover&&e.$refs.loadingCover.hide();case 6:case"end":return t.stop()}}),t)})))()},getCaptcha:function(){var e=this;this.$api.sendRequest({url:"/api/captcha/captcha",data:{captcha_id:this.captcha.id},success:function(t){t.code>=0&&(e.captcha=t.data,e.captcha.img=e.captcha.img.replace(/\r\n/g,""))}})},register:function(){var e=this;if("account"==this.registerMode){var t="/api/register/username";a={username:this.formData.account,password:this.formData.password}}else{t="/api/register/mobile";var a={mobile:this.formData.mobile,key:this.formData.key,code:this.formData.dynacode}}if(""!=this.captcha.id&&(a.captcha_id=this.captcha.id,a.captcha_code=this.formData.vercode),Object.keys(this.authInfo).length&&Object.assign(a,this.authInfo),this.authInfo.avatarUrl&&(a.headimg=this.authInfo.avatarUrl),this.authInfo.nickName&&(a.nickname=this.authInfo.nickName),uni.getStorageSync("suid")&&(a.suid=uni.getStorageSync("suid")),this.verify(a)){if(this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:t,data:a,success:function(t){t.code>=0?uni.setStorage({key:"token",data:t.data.token,success:function(){uni.removeStorageSync("loginLock"),uni.removeStorageSync("unbound"),uni.removeStorageSync("authInfo"),e.$refs.registerReward.getReward()?(e.$util.showToast({title:"注册成功"}),e.$refs.registerReward.open()):""!=e.back?e.$util.redirectTo(decodeURIComponent(e.back),{},"reLaunch"):e.$util.redirectTo("/pages/member/index/index",{},"reLaunch")}}):(e.isSub=!1,e.getCaptcha(),e.$util.showToast({title:t.message}))},fail:function(t){e.isSub=!1,e.getCaptcha()}})}},verify:function(e){if("mobile"==this.registerMode){var t=[{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"}];""!=this.captcha.id&&t.push({name:"captcha_code",checkType:"required",errorMsg:this.$lang("captchaPlaceholder")}),t.push({name:"code",checkType:"required",errorMsg:this.$lang("dynacodePlaceholder")})}if("account"==this.registerMode){t=[{name:"username",checkType:"required",errorMsg:"请输入账号"},{name:"password",checkType:"required",errorMsg:"请输入密码"}];var a=this.registerConfig;if(a.pwd_len>0&&t.push({name:"password",checkType:"lengthMin",checkRule:a.pwd_len,errorMsg:"密码长度不能小于"+a.pwd_len+"位"}),""!=a.pwd_complexity){var i="密码需包含",o="";-1!=a.pwd_complexity.indexOf("number")&&(o+="(?=.*?[0-9])",i+="数字"),-1!=a.pwd_complexity.indexOf("letter")&&(o+="(?=.*?[a-z])",i+="、小写字母"),-1!=a.pwd_complexity.indexOf("upper_case")&&(o+="(?=.*?[A-Z])",i+="、大写字母"),-1!=a.pwd_complexity.indexOf("symbol")&&(o+="(?=.*?[#?!@$%^&*-])",i+="、特殊字符"),t.push({name:"password",checkType:"reg",checkRule:o,errorMsg:i})}if(this.formData.password!=this.formData.rePassword)return this.$util.showToast({title:"两次密码不一致"}),!1;1==this.captchaConfig&&""!=this.captcha.id&&t.push({name:"captcha_code",checkType:"required",errorMsg:this.$lang("captchaPlaceholder")})}var n=s.default.check(e,t);return!!n||(this.$util.showToast({title:s.default.error}),!1)},toLogin:function(){this.back?this.$util.redirectTo("/pages/login/login/login",{back:this.back}):this.$util.redirectTo("/pages/login/login/login")},sendMobileCode:function(){var e=this;if(120==this.dynacodeData.seconds){var t={mobile:this.formData.mobile,captcha_id:this.captcha.id,captcha_code:this.formData.vercode},a=s.default.check(t,[{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"captcha_code",checkType:"required",errorMsg:"请输入验证码"}]);a?this.dynacodeData.isSend||(this.dynacodeData.isSend=!0,this.$api.sendRequest({url:"/api/register/mobileCode",data:t,success:function(t){e.dynacodeData.isSend=!1,t.code>=0?(e.formData.key=t.data.key,120==e.dynacodeData.seconds&&null==e.dynacodeData.timer&&(e.dynacodeData.timer=setInterval((function(){e.dynacodeData.seconds--,e.dynacodeData.codeText=e.dynacodeData.seconds+"s后可重新获取"}),1e3))):e.$util.showToast({title:t.message})},fail:function(){e.$util.showToast({title:"request:fail"}),e.dynacodeData.isSend=!1}})):this.$util.showToast({title:s.default.error})}},getCaptchaConfig:function(){var e=this;this.$api.sendRequest({url:"/api/config/getCaptchaConfig",success:function(t){t.code>=0&&(e.captchaConfig=t.data.value.shop_reception_login,1==e.captchaConfig&&e.getCaptcha())}})}},watch:{"dynacodeData.seconds":{handler:function(e,t){0==e&&(clearInterval(this.dynacodeData.timer),this.dynacodeData={seconds:120,timer:null,codeText:"获取动态码",isSend:!1})},immediate:!0,deep:!0}}};t.default=u},8145:function(e,t,a){"use strict";var i=a("b1e4"),o=a.n(i);o.a},"81b0":function(e,t,a){"use strict";var i=a("a5ee"),o=a.n(i);o.a},a5ee:function(e,t,a){var i=a("b583");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("7b6ca564",i,!0,{sourceMap:!1,shadowMode:!1})},b1e4:function(e,t,a){var i=a("06a6");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("4f06").default;o("986435b6",i,!0,{sourceMap:!1,shadowMode:!1})},b583:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */[data-v-b6e11216] .uni-scroll-view{background-color:#fff}[data-v-b6e11216] .uni-scroll-view::-webkit-scrollbar{\r\n  /* 隐藏滚动条，但依旧具备可以滚动的功能 */display:none}uni-page-body[data-v-b6e11216]{width:100%;background:#fff!important}body.?%PAGE?%[data-v-b6e11216]{background:#fff!important}.align-right[data-v-b6e11216]{color:#838383}.container[data-v-b6e11216]{width:100vw;height:100vh}.header-wrap[data-v-b6e11216]{width:80%;margin:calc(%?120?% + 44px) auto 0;background-repeat:no-repeat;background-size:contain;background-position:bottom;position:relative}.header-wrap .title[data-v-b6e11216]{font-size:%?60?%;font-weight:700}.body-wrap[data-v-b6e11216]{margin-top:%?100?%;padding-bottom:%?100?%}.body-wrap .form-wrap[data-v-b6e11216]{width:80%;margin:0 auto}.body-wrap .form-wrap .input-wrap[data-v-b6e11216]{position:relative;width:100%;box-sizing:border-box;height:%?60?%;margin-top:%?60?%}.body-wrap .form-wrap .input-wrap .iconfont[data-v-b6e11216]{width:%?60?%;height:%?60?%;position:absolute;left:0;right:0;line-height:%?60?%;font-size:%?32?%;color:#303133;font-weight:600}.body-wrap .form-wrap .input-wrap .content[data-v-b6e11216]{display:flex;height:%?60?%;border-bottom:1px solid #eee;align-items:center}.body-wrap .form-wrap .input-wrap .content .input[data-v-b6e11216]{flex:1;height:%?60?%;line-height:%?60?%;font-size:%?28?%}.body-wrap .form-wrap .input-wrap .content .input-placeholder[data-v-b6e11216]{font-size:%?28?%;color:#bfbfbf;line-height:%?60?%}.body-wrap .form-wrap .input-wrap .content .captcha[data-v-b6e11216]{margin:%?4?%;height:%?52?%;width:%?140?%}.body-wrap .form-wrap .input-wrap .content .dynacode[data-v-b6e11216]{line-height:%?60?%;font-size:%?24?%}.body-wrap .form-wrap .input-wrap .content .area-code[data-v-b6e11216]{line-height:%?60?%;margin-right:%?20?%;font-size:%?28?%}.body-wrap .forget-section[data-v-b6e11216]{display:flex;width:80%;margin:%?40?% auto}.body-wrap .forget-section uni-view[data-v-b6e11216]{flex:1;font-size:%?24?%;line-height:1}.body-wrap .btn_view[data-v-b6e11216]{width:80%;margin:%?94?% auto auto}.body-wrap .login-btn[data-v-b6e11216]{height:%?90?%;line-height:%?90?%;border-radius:%?90?%;color:#fff;text-align:center;border:1px solid;width:100%;margin:0}.body-wrap .auth-login[data-v-b6e11216]{margin-top:%?20?%;width:calc(100% - 2px);height:%?82?%;border-radius:%?82?%;line-height:%?82?%;border:1px solid;color:#fff;text-align:center;margin-left:0;background-color:#fff}.body-wrap .auth-login uni-text[data-v-b6e11216]{color:#d0d0d0}.body-wrap .auth-login .iconfont[data-v-b6e11216]{font-size:%?70?%}.body-wrap .auth-login .iconweixin[data-v-b6e11216]{color:#1aad19}.body-wrap .regisiter-agreement[data-v-b6e11216]{text-align:center;margin-top:%?30?%;line-height:1;color:#838383;line-height:%?60?%}.body-wrap .regisiter-agreement[data-v-b6e11216]{font-size:%?24?%}.login-btn-box[data-v-b6e11216]{margin-top:%?50?%}.login-btn-box.active[data-v-b6e11216]{margin:%?30?% 0 %?50?%}.back-btn[data-v-b6e11216]{font-size:%?52?%;position:fixed;left:%?24?%;top:%?72?%;z-index:9;color:#000}.login-mode-box[data-v-b6e11216]{display:flex;justify-content:flex-end;color:#909399;margin:auto;margin-top:%?44?%;font-size:%?26?%;width:80%}',""]),e.exports=t}}]);