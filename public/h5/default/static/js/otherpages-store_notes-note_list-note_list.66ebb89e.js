(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-store_notes-note_list-note_list"],{"0487":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e25e"),i("99af"),i("d3b7"),i("159b");var a=n(i("0aef")),o={data:function(){return{groupInfo:{groupList:[],currIdent:0,currId:0},noteListInfo:[],giveLikeFlag:!1,showEmpty:!1,siteId:0}},onShow:function(){var t=this;this.$langConfig.refresh(),this.$store.dispatch("getAddonIsexit").then((function(e){e.notes?(t.getGroup(),t.$refs.mescroll&&t.$refs.mescroll.refresh()):(t.$util.showToast({title:"店铺笔记未开启",mask:!0}),setTimeout((function(){t.$util.redirectTo("/pages/index/index/index",{},"redirectTo")}),1e3))}))},onLoad:function(t){this.siteId=parseInt(t.site_id)||0},mixins:[a.default],methods:{getGroup:function(){var t=this;this.showEmpty=!1,this.$api.sendRequest({url:"/notes/api/notes/group",success:function(e){t.showEmpty=!0,0==e.code?0!=e.data.length&&(t.groupInfo.groupList=e.data,t.groupInfo.currId=e.data[0].group_id):t.$util.showToast({title:e.message})},fail:function(e){mescroll.endErr(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},tabCut:function(t,e){this.groupInfo.currIdent=e,this.groupInfo.currId=t,this.$refs.mescroll.refresh(),this.$refs.loadingCover&&this.$refs.loadingCover.show()},getNotesList:function(t){var e=this;this.showEmpty=!1,this.$api.sendRequest({url:"/notes/api/notes/lists",data:{page:t.num,page_size:t.size,group_id:this.groupInfo.currId,site_id:this.siteId},success:function(i){e.showEmpty=!0;var n=[];0==i.code?n=i.data.list:e.$util.showToast({title:i.message}),t.endSuccess(n.length),1==t.num&&(e.noteListInfo=[]),e.noteListInfo=e.noteListInfo.concat(n),e.noteListInfo.forEach((function(t,e){t.img=t.cover_img.split(","),t.label=t.goods_highlights.split(",")})),e.$refs.loadingCover&&e.$refs.loadingCover.hide()},fail:function(i){t.endErr(),e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},noteDetail:function(t){this.$util.redirectTo("/otherpages/store_notes/note_detail/note_detail",{note_id:t})},giveLike:function(t,e){var i=this;if(uni.getStorageSync("token")){if(this.giveLikeFlag)return!1;this.giveLikeFlag=!0;var n=1==this.noteListInfo[e].is_dianzan?"/notes/api/record/delete":"/notes/api/record/add";this.$api.sendRequest({url:n,data:{note_id:t},success:function(t){i.giveLikeFlag=!1,0==t.code&&t.data>0?(i.noteType,i.noteListInfo[e].dianzan_num=1==i.noteListInfo[e].is_dianzan?i.noteListInfo[e].dianzan_num-1:i.noteListInfo[e].dianzan_num+1,i.noteListInfo[e].is_dianzan=1==i.noteListInfo[e].is_dianzan?0:1):i.$util.showToast({title:t.message})}})}else this.$refs.login.open("/otherpages/store_notes/note_list/note_list")}}};e.default=o},"15d4":function(t,e,i){"use strict";var n=i("3454"),a=i.n(n);a.a},"1ff9":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.notes-nav[data-v-e9b56a86]{overflow:hidden;padding:0 %?20?%;background-color:#fff}.notes-nav .notes-list[data-v-e9b56a86]{display:flex;align-items:center;width:100%;height:%?90?%;white-space:nowrap}.notes-nav .notes-list .notes-item[data-v-e9b56a86]{display:inline-block;margin:0 %?20?%;height:%?86?%;text-align:center;line-height:%?90?%}.notes-nav .notes-list .notes-item.active[data-v-e9b56a86]{border-bottom:%?4?% solid}.notes-content[data-v-e9b56a86]{height:100%;width:100%;padding:1px 0}.note-item[data-v-e9b56a86]{margin:%?20?% %?30?%;padding:%?20?%;background-color:#fff;border-radius:%?6?%;overflow:hidden;position:relative}.note-item .note-title[data-v-e9b56a86]{font-size:%?30?%;font-weight:600;line-height:%?44?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.note-item .notes-highlights-list uni-text[data-v-e9b56a86]{display:inline-block;color:#fff;font-size:%?24?%;line-height:%?36?%;padding:0 %?10?%;border-radius:%?4?%;margin:0 %?5?%}.note-item .note-desc[data-v-e9b56a86]{margin:%?4?% 0 %?8?%;line-height:%?40?%;overflow:hidden}.note-item .note-desc uni-text[data-v-e9b56a86]{float:left;margin-right:%?16?%}.note-item .notes-img-wrap[data-v-e9b56a86]{position:relative;height:%?300?%}.note-item .notes-img-wrap .notes-item-image[data-v-e9b56a86]{width:100%;height:%?300?%;object-fit:cover}.note-item .notes-img-wrap .notes-label[data-v-e9b56a86]{display:inline-block;position:absolute;left:%?20?%;bottom:%?20?%;max-width:calc(100vh - %?40?%);background-color:#fff;line-height:%?36?%;padding:0 %?10?% 0 %?4?%}.note-item .notes-img-wrap .notes-label > span[data-v-e9b56a86]{font-size:%?24?%;margin-left:%?6?%}.note-item .notes-img-wrap .notes-label > span span[data-v-e9b56a86]{margin-right:%?2?%}.note-item .notes-img-wrap-list[data-v-e9b56a86]{display:flex;justify-content:space-between;flex-wrap:wrap;height:auto}.note-item .notes-img-wrap-list uni-image[data-v-e9b56a86]{width:calc((100% - %?40?%) / 3);height:%?210?%;margin-top:%?20?%}.note-item .notes-img-wrap-list uni-image[data-v-e9b56a86]:nth-child(-n + 3){margin-top:0}.note-item .notes-img-wrap-list[data-v-e9b56a86]:after{content:"";width:calc((100% - %?40?%) / 3)}.note-item .note-img-one[data-v-e9b56a86]{display:flex;justify-content:center;align-items:center;width:100%;height:%?420?%}.note-item .note-img-one uni-image[data-v-e9b56a86]{width:100%;height:%?420?%}.note-item .note-img-more[data-v-e9b56a86]{width:100%;white-space:nowrap}.note-item .note-img-more .more-item[data-v-e9b56a86]{overflow:hidden;display:inline-block;width:%?200?%;height:%?200?%;text-align:center;line-height:%?200?%;border-radius:%?10?%}.note-item .note-img-more .more-item ~ .more-item[data-v-e9b56a86]{margin-left:%?16?%}.note-item .note-img-more .more-item uni-image[data-v-e9b56a86]{width:%?200?%;height:%?200?%}.note-item .notes-img-wrap[data-v-e9b56a86]{position:relative;height:%?300?%}.note-item .notes-img-wrap .notes-item-image[data-v-e9b56a86]{width:100%;height:%?300?%;object-fit:cover}.note-item .notes-img-wrap .notes-label[data-v-e9b56a86]{display:inline-block;position:absolute;left:%?20?%;bottom:%?20?%;max-width:calc(100vh - %?40?%);background-color:#fff;line-height:%?36?%;padding:0 %?10?% 0 %?4?%}.note-item .notes-img-wrap .notes-label > span[data-v-e9b56a86]{font-size:%?24?%;margin-left:%?6?%}.note-item .notes-img-wrap .notes-label > span span[data-v-e9b56a86]{margin-right:%?2?%}.note-item .notes-img-wrap-list[data-v-e9b56a86]{display:flex;justify-content:space-between;flex-wrap:wrap;height:auto}.note-item .notes-img-wrap-list uni-image[data-v-e9b56a86]{width:calc((100% - %?40?%) / 3);height:%?210?%;margin-top:%?20?%}.note-item .notes-img-wrap-list uni-image[data-v-e9b56a86]:nth-child(-n + 3){margin-top:0}.note-item .notes-img-wrap-list[data-v-e9b56a86]:after{content:"";width:calc((100% - %?40?%) / 3)}.note-item .rest-info[data-v-e9b56a86]{display:flex;justify-content:space-between;align-items:center;margin-top:%?20?%}.note-item .rest-info .time[data-v-e9b56a86],\r\n.note-item .rest-info .read-info[data-v-e9b56a86]{color:#b6b6b6;font-size:%?24?%}.note-item .rest-info uni-text[data-v-e9b56a86]{margin-left:%?10?%}.note-item .rest-info .read-info > uni-text[data-v-e9b56a86]{margin-left:%?30?%}.empty-box[data-v-e9b56a86]{margin-top:%?200?%}',""]),t.exports=e},3454:function(t,e,i){var n=i("cad2");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("46eb2fea",n,!0,{sourceMap:!1,shadowMode:!1})},"61b0":function(t,e,i){"use strict";i.r(e);var n=i("e3d4"),a=i("e4cf");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("797a"),i("15d4");var s=i("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"e9b56a86",null,!1,n["a"],void 0);e["default"]=r.exports},"797a":function(t,e,i){"use strict";var n=i("8e2a"),a=i.n(n);a.a},"8e2a":function(t,e,i){var n=i("1ff9");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("6335b07e",n,!0,{sourceMap:!1,shadowMode:!1})},cad2:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"[data-v-e9b56a86] .reward-popup .uni-popup__wrapper-box{background:none!important;max-width:unset!important;max-height:unset!important}",""]),t.exports=e},e3d4:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={loadingCover:i("379d").default,nsEmpty:i("c4ff").default,nsLogin:i("0c7b").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{attrs:{"data-theme":t.themeStyle}},[i("v-uni-view",{staticClass:"notes-nav"},[i("v-uni-scroll-view",{staticClass:"notes-list",attrs:{"scroll-x":"true"}},t._l(t.groupInfo.groupList,(function(e,n){return i("v-uni-text",{key:n,staticClass:"notes-item",class:n==t.groupInfo.currIdent?"color-base-text active color-base-border":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabCut(e.group_id,n)}}},[t._v(t._s(e.group_name))])})),1)],1),0!=t.groupInfo.currId?i("mescroll-uni",{ref:"mescroll",attrs:{top:"94"},on:{getData:function(e){arguments[0]=e=t.$handleEvent(e),t.getNotesList.apply(void 0,arguments)}}},[i("template",{attrs:{slot:"list"},slot:"list"},[t.noteListInfo.length?i("v-uni-view",{staticClass:"notes-content"},t._l(t.noteListInfo,(function(e,n){return i("v-uni-view",{key:n,staticClass:"note-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.noteDetail(e.note_id)}}},[i("v-uni-text",{staticClass:"note-title"},[t._v(t._s(e.note_title))]),e.goods_highlights?i("v-uni-view",{staticClass:"notes-highlights-list"},t._l(e.label,(function(e,n){return i("v-uni-text",{key:n,staticClass:"color-base-bg"},[t._v(t._s(e))])})),1):t._e(),i("v-uni-view",{staticClass:"note-desc"},[i("v-uni-text",{staticClass:"color-base-text"},[t._v("#"+t._s("goods_item"==e.note_type?"单品介绍":"掌柜说")+"#")]),t._v(t._s(e.note_abstract))],1),i("v-uni-view",{staticClass:"notes-img-wrap",class:{"notes-img-wrap-list":1==e.cover_type}},[0==e.cover_type?i("v-uni-image",{staticClass:"notes-item-image",attrs:{src:t.$util.img(e.cover_img),mode:"aspectFill"}}):t._l(e.img,(function(e,n){return i("v-uni-image",{key:n,staticClass:"notes-item-image-li",attrs:{src:t.$util.img(e),mode:"aspectFit"}})}))],2),i("v-uni-view",{staticClass:"rest-info"},[1==e.is_show_release_time?i("v-uni-view",{staticClass:"time"},[t._v(t._s(t.$util.timeStampTurnTime(e.create_time,"time")))]):t._e(),i("v-uni-view",{staticClass:"read-info"},[1==e.is_show_read_num?i("v-uni-text",[t._v("阅读"),i("v-uni-text",[t._v(t._s(e.initial_read_num+e.read_num))])],1):t._e(),1==e.is_show_dianzan_num?i("v-uni-text",{on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.giveLike(e.note_id,n)}}},[1==e.is_dianzan?i("v-uni-text",{staticClass:"iconfont iconlikefill color-base-text"}):i("v-uni-text",{staticClass:"iconfont icongz"}),i("v-uni-text",[t._v(t._s(e.initial_dianzan_num+e.dianzan_num))])],1):t._e()],1)],1)],1)})),1):t._e()],1),i("loading-cover",{ref:"loadingCover"})],2):t._e(),t.showEmpty&&0==t.noteListInfo.length?i("v-uni-view",{staticClass:"empty-box"},[i("ns-empty",{attrs:{isIndex:!1,fixed:!1,text:"暂无店铺笔记"}})],1):t._e(),i("ns-login",{ref:"login"})],1)},o=[]},e4cf:function(t,e,i){"use strict";i.r(e);var n=i("0487"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);