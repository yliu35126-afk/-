(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["otherpages-member-account_edit-account_edit"],{3398:function(a,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return i}));var i={loadingCover:e("379d").default},n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-uni-view",{staticClass:"account-list-content",attrs:{"data-theme":a.themeStyle}},[e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[a._v(a._s(a.$lang("name")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"30",placeholder:"请输入真实姓名",name:"name"},model:{value:a.formData.realname,callback:function(t){a.$set(a.formData,"realname",t)},expression:"formData.realname"}})],1),e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[a._v(a._s(a.$lang("mobilePhone")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"number",maxlength:"11",placeholder:"请输入手机号"},model:{value:a.formData.mobile,callback:function(t){a.$set(a.formData,"mobile",t)},expression:"formData.mobile"}})],1),e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[a._v(a._s(a.$lang("accountType")))]),e("v-uni-picker",{staticClass:"picker",attrs:{value:a.index,range:a.payList},on:{change:function(t){arguments[0]=t=a.$handleEvent(t),a.bindPickerChange.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"desc uni-input"},[a._v(a._s(a.payList[a.index]))]),e("v-uni-text",{staticClass:"iconfont iconright"})],1)],1),"bank"==a.formData.withdraw_type?e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[a._v("银行名称")]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"50",placeholder:"请输入银行名称"},model:{value:a.formData.branch_bank_name,callback:function(t){a.$set(a.formData,"branch_bank_name",t)},expression:"formData.branch_bank_name"}})],1):a._e(),"wechatpay"!=a.formData.withdraw_type?e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[a._v(a._s(a.$lang("withdrawalAccount")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"30",placeholder:"请输入提现账号"},model:{value:a.formData.bank_account,callback:function(t){a.$set(a.formData,"bank_account",t)},expression:"formData.bank_account"}})],1):a._e(),e("v-uni-view",{staticClass:"btn"},[e("v-uni-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.saveAccount.apply(void 0,arguments)}}},[a._v(a._s(a.$lang("save")))])],1),e("loading-cover",{ref:"loadingCover"})],1)},r=[]},"3fda":function(a,t,e){"use strict";var i=e("4442"),n=e.n(i);n.a},4442:function(a,t,e){var i=e("c339");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var n=e("4f06").default;n("5a5f382b",i,!0,{sourceMap:!1,shadowMode:!1})},5381:function(a,t,e){"use strict";e.r(t);var i=e("3398"),n=e("eb2e");for(var r in n)["default"].indexOf(r)<0&&function(a){e.d(t,a,(function(){return n[a]}))}(r);e("3fda");var o=e("f0c5"),s=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"1badfaaa",null,!1,i["a"],void 0);t["default"]=s.exports},"965f":function(a,t,e){"use strict";e("7a82");var i=e("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("14d9"),e("26e9"),e("498a");var n=i(e("94dc")),r=i(e("0aef")),o={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:""}},onLoad:function(a){a.id&&(this.formData.id=a.id),a.back&&(this.back=a.back)},mixins:[r.default],onShow:function(){this.$langConfig.refresh(),this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?uni.setNavigationBarTitle({title:"编辑账户"}):uni.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(a){var t=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(a){0==a.code&&a.data&&(t.accountInfo=a.data,t.formData.realname=a.data.realname,t.formData.mobile=a.data.mobile,t.formData.bank_account=a.data.bank_account,t.formData.branch_bank_name=a.data.branch_bank_name,t.formData.withdraw_type=a.data.withdraw_type),t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(a){t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getTransferType:function(){var a=this;this.payList=[],this.$api.sendRequest({url:"/api/memberwithdraw/transferType",success:function(t){if(t.code>=0&&t.data){for(var e in a.transferType=t.data,a.transferType)a.formData.withdraw_type||"wechatpay"!=e||(a.formData.withdraw_type=e),a.payList.push(a.transferType[e]);if(a.payList.reverse(),!a.formData.id&&a.$refs.loadingCover&&a.$refs.loadingCover.hide(),a.accountInfo&&-1==a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList)&&a.payList.push(a.accountInfo.withdraw_type_name),a.payList.length&&a.accountInfo)a.index=a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList);else{var i="";for(var n in a.transferType)if(a.transferType[n]==a.payList[a.index]){i=n;break}""!=i&&(a.formData.withdraw_type=i)}}}})},bindPickerChange:function(a){this.index=a.detail.value;var t="";for(var e in this.transferType)this.transferType[e]==this.payList[this.index]&&(t=e);""!=t&&(this.formData.withdraw_type=t)},vertify:function(){this.formData.realname=this.formData.realname.trim(),this.formData.branch_bank_name=this.formData.branch_bank_name.trim(),this.formData.bank_account=this.formData.bank_account.trim(),this.formData.mobile=this.formData.mobile.trim();var a=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&a.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&a.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var t=n.default.check(this.formData,a);return!!t||(this.$util.showToast({title:n.default.error}),this.flag=!1,!1)},saveAccount:function(){var a=this;if(!this.flag&&(this.flag=!0,this.vertify())){var t=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+t,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(t){0==t.code?(a.formData.id?a.$util.showToast({title:"修改成功"}):a.$util.showToast({title:"添加成功"}),""!=a.back?a.$util.redirectTo(a.back,{},a.redirect):a.$util.redirectTo("/otherpages/member/account/account")):(a.flag=!1,a.$util.showToast({title:t.message}))},fail:function(t){a.flag=!1}})}}}};t.default=o},c339:function(a,t,e){var i=e("24fb");t=i(!1),t.push([a.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.account-list-content[data-v-1badfaaa]{margin:0 %?30?% %?20?%;padding:%?20?% %?30?% 0;background-color:#fff;border-radius:%?10?%}.account-list-content .edit-item[data-v-1badfaaa]{display:flex;align-items:center;padding:0 %?30?%;padding:%?30?% 0;background-color:#fff}.account-list-content .edit-item .tit[data-v-1badfaaa]{width:%?120?%}.account-list-content .edit-item .desc[data-v-1badfaaa]{flex:1;margin-left:%?20?%;padding:0}.account-list-content .edit-item[data-v-1badfaaa]:first-of-type{margin-top:%?20?%}.account-list-content .edit-item .picker[data-v-1badfaaa]{flex:1}.account-list-content .edit-item .picker uni-text[data-v-1badfaaa]:last-child{line-height:%?50?%;float:right;color:#909399;font-size:%?20?%}.account-list-content > .edit-item + .edit-item[data-v-1badfaaa]{border-top:%?2?% solid #eee}.add[data-v-1badfaaa]{margin-top:%?60?%;height:%?80?%;line-height:%?80?%!important;border-radius:%?80?%;font-weight:500;width:calc(100% - %?60?%);margin-left:%?30?%}.btn[data-v-1badfaaa]{position:fixed;left:0;width:100%;bottom:%?30?%;height:auto;padding-bottom:constant(safe-area-inset-bottom);\r\n  /*兼容 IOS<11.2*/padding-bottom:env(safe-area-inset-bottom)\r\n  /*兼容 IOS>11.2*/}',""]),a.exports=t},eb2e:function(a,t,e){"use strict";e.r(t);var i=e("965f"),n=e.n(i);for(var r in i)["default"].indexOf(r)<0&&function(a){e.d(t,a,(function(){return i[a]}))}(r);t["default"]=n.a}}]);