{"version":3,"sources":["webpack:///./src/views/shop/index.vue","webpack:///src/views/shop/index.vue","webpack:///./src/views/shop/index.vue?76fb","webpack:///./src/views/shop/index.vue?e330","webpack:///./src/views/shop/index.vue?85c0"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","shopInfo","avatar","$img","defaultShopImage","site_name","on","$event","_v","_s","is_own","_e","shop_desccredit","shop_servicecredit","shop_deliverycredit","telephone","full_address","address","hasFollow","getIsFollow","model","keyword","callback","$$v","goGoodsList","slot","class","border","categoryList","length","_l","item","key","category_id","$router","push","path","query","site_id","id","shop_category_id","category_name","child_list","cate","adList","adv_id","adv_image","pushToTab","adv_url","url","goodsList","index","goods_id","sku_id","sku_image","size","imageError","goods_name","discount_price","market_price","promotion_type","total","currentPage","pageSize","handlePageSizeChange","handleCurrentPageChange","staticRenderFns","components","data","searchContent","computed","mapGetters","created","$route","replace","getAdList","getShopInfo","getCategoryList","getGoodsList","getfollow","watch","curr","params","pathMatch","methods","then","res","adv_list","i","JSON","parse","catch","err","code","$message","error","message","tree","page","page_size","sort","goodsSkuPage","list","count","isFollow","unFollow","type","console","log","redirect","follow","num","defaultGoodsImage","component"],"mappings":"wIAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOP,EAAIQ,QAASC,WAAW,YAAYC,YAAY,cAAc,CAACR,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACR,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACR,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACR,EAAG,MAAM,CAACQ,YAAY,YAAY,CAACR,EAAG,MAAM,CAACQ,YAAY,8BAA8BC,MAAM,CAAC,IAAMX,EAAIY,SAASC,OAASb,EAAIc,KAAKd,EAAIY,SAASC,QAAUb,EAAIc,KAAKd,EAAIe,kBAAkB,IAAMf,EAAIY,SAASI,WAAWC,GAAG,CAAC,MAAQ,SAASC,GAAQlB,EAAIY,SAASC,OAASb,EAAIe,uBAAuBb,EAAG,KAAK,CAACA,EAAG,OAAO,CAACQ,YAAY,iBAAiB,CAACV,EAAImB,GAAGnB,EAAIoB,GAAGpB,EAAIY,SAASI,cAAsC,GAAvBhB,EAAIY,SAASS,OAAanB,EAAG,SAAS,CAACQ,YAAY,MAAMC,MAAM,CAAC,KAAO,UAAU,CAACX,EAAImB,GAAG,QAAQnB,EAAIsB,MAAM,KAAKpB,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACR,EAAG,MAAM,CAACQ,YAAY,QAAQ,CAACV,EAAImB,GAAG,UAAUjB,EAAG,IAAI,CAACF,EAAImB,GAAGnB,EAAIoB,GAAGpB,EAAIY,SAASW,oBAAoBvB,EAAImB,GAAG,QAAQjB,EAAG,MAAM,CAACQ,YAAY,QAAQ,CAACV,EAAImB,GAAG,UAAUjB,EAAG,IAAI,CAACF,EAAImB,GAAGnB,EAAIoB,GAAGpB,EAAIY,SAASY,uBAAuBxB,EAAImB,GAAG,QAAQjB,EAAG,MAAM,CAACQ,YAAY,QAAQ,CAACV,EAAImB,GAAG,UAAUjB,EAAG,IAAI,CAACF,EAAImB,GAAGnB,EAAIoB,GAAGpB,EAAIY,SAASa,wBAAwBzB,EAAImB,GAAG,UAAUjB,EAAG,MAAM,CAACQ,YAAY,cAAc,CAAEV,EAAIY,SAASc,UAAWxB,EAAG,MAAM,CAACQ,YAAY,QAAQ,CAACR,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACV,EAAImB,GAAG,SAASjB,EAAG,MAAM,CAACQ,YAAY,eAAe,CAACV,EAAImB,GAAGnB,EAAIoB,GAAGpB,EAAIY,SAASc,gBAAgB1B,EAAIsB,KAAMtB,EAAIY,SAASe,aAAczB,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACR,EAAG,MAAM,CAACQ,YAAY,aAAa,CAACV,EAAImB,GAAG,SAASjB,EAAG,MAAM,CAACQ,YAAY,eAAe,CAACV,EAAImB,GAAGnB,EAAIoB,GAAGpB,EAAIY,SAASe,cAAc3B,EAAIoB,GAAGpB,EAAIY,SAASgB,cAAc5B,EAAIsB,OAAOpB,EAAG,MAAM,CAACQ,YAAY,aAAa,CAAEV,EAAI6B,UAAW3B,EAAG,YAAY,CAACS,MAAM,CAAC,KAAO,UAAUM,GAAG,CAAC,MAAQjB,EAAI8B,cAAc,CAAC9B,EAAImB,GAAG,UAAUjB,EAAG,YAAY,CAACS,MAAM,CAAC,KAAO,UAAUM,GAAG,CAAC,MAAQjB,EAAI8B,cAAc,CAAC9B,EAAImB,GAAG,WAAW,KAAKjB,EAAG,MAAM,CAACQ,YAAY,qBAAqB,CAACR,EAAG,WAAW,CAACQ,YAAY,oBAAoBC,MAAM,CAAC,YAAc,QAAQ,KAAO,SAAS,UAAY,KAAK,UAAY,IAAIoB,MAAM,CAACxB,MAAOP,EAAIgC,QAASC,SAAS,SAAUC,GAAMlC,EAAIgC,QAAQE,GAAKzB,WAAW,YAAY,CAACP,EAAG,YAAY,CAACS,MAAM,CAAC,KAAO,SAAS,KAAO,kBAAkBM,GAAG,CAAC,MAAQjB,EAAImC,aAAaC,KAAK,YAAY,IAAI,GAAGlC,EAAG,MAAM,CAACQ,YAAY,kBAAkB2B,MAAM,CAACC,OAAOtC,EAAIuC,aAAaC,SAASxC,EAAIyC,GAAIzC,EAAIuC,cAAc,SAASG,GAAM,OAAOxC,EAAG,MAAM,CAACyC,IAAID,EAAKE,YAAYlC,YAAY,QAAQ,CAACR,EAAG,MAAM,CAACQ,YAAY,YAAYO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAI6C,QAAQC,KAAK,CAAEC,KAAM,aAAcC,MAAO,CAAEC,QAASjD,EAAIkD,GAAIC,iBAAkBT,EAAKE,kBAAoB,CAAC5C,EAAImB,GAAGnB,EAAIoB,GAAGsB,EAAKU,kBAAkBpD,EAAIyC,GAAIC,EAAKW,YAAY,SAASC,GAAM,OAAOpD,EAAG,MAAM,CAACyC,IAAIW,EAAKV,YAAYlC,YAAY,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAI6C,QAAQC,KAAK,CAAEC,KAAM,aAAcC,MAAO,CAAEC,QAASjD,EAAIkD,GAAIC,iBAAkBT,EAAKE,kBAAmB,CAAC5C,EAAImB,GAAGnB,EAAIoB,GAAGkC,EAAKF,sBAAqB,MAAK,KAAKlD,EAAG,MAAM,CAACQ,YAAY,cAAc,CAACR,EAAG,MAAM,CAACQ,YAAY,WAAW,CAACR,EAAG,MAAM,CAACQ,YAAY,eAAe,CAACR,EAAG,cAAc,CAACS,MAAM,CAAC,OAAS,UAAUX,EAAIyC,GAAIzC,EAAIuD,QAAQ,SAASb,GAAM,OAAOxC,EAAG,mBAAmB,CAACyC,IAAID,EAAKc,QAAQ,CAACtD,EAAG,WAAW,CAACS,MAAM,CAAC,IAAMX,EAAIc,KAAK4B,EAAKe,WAAW,IAAM,SAASxC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAI6C,QAAQa,UAAUhB,EAAKiB,QAAQC,UAAU,MAAK,IAAI,GAAI5D,EAAI6D,UAAUrB,OAAQtC,EAAG,MAAM,CAACQ,YAAY,MAAM,CAACR,EAAG,KAAK,CAACF,EAAImB,GAAG,YAAYnB,EAAIsB,KAAKpB,EAAG,MAAM,CAACQ,YAAY,cAAcV,EAAIyC,GAAIzC,EAAI6D,WAAW,SAASnB,EAAKoB,GAAO,OAAO5D,EAAG,MAAM,CAACyC,IAAID,EAAKqB,SAASrD,YAAY,OAAOO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAI6C,QAAQa,UAAU,CAAEX,KAAM,QAAUL,EAAKsB,YAAa,CAAC9D,EAAG,MAAM,CAACQ,YAAY,WAAWC,MAAM,CAAC,IAAMX,EAAIc,KAAK4B,EAAKuB,UAAW,CAAEC,KAAM,SAAUjD,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImE,WAAWL,OAAW5D,EAAG,MAAM,CAACQ,YAAY,cAAc,CAACV,EAAImB,GAAGnB,EAAIoB,GAAGsB,EAAK0B,eAAelE,EAAG,MAAM,CAACQ,YAAY,cAAc,CAACR,EAAG,MAAM,CAACQ,YAAY,SAAS,CAACR,EAAG,IAAI,CAACF,EAAImB,GAAG,OAAOnB,EAAImB,GAAG,IAAInB,EAAIoB,GAAGsB,EAAK2B,gBAAgB,OAAOnE,EAAG,MAAM,CAACQ,YAAY,gBAAgB,CAACV,EAAImB,GAAG,IAAInB,EAAIoB,GAAGsB,EAAK4B,mBAA2C,GAAvB5B,EAAK6B,eAAqBrE,EAAG,MAAM,CAACQ,YAAY,kBAAkB,CAACV,EAAImB,GAAG,UAAUnB,EAAIsB,UAAS,GAAGpB,EAAG,MAAM,CAACQ,YAAY,SAAS,CAACR,EAAG,gBAAgB,CAACS,MAAM,CAAC,WAAa,GAAG,cAAc,EAAE,MAAQX,EAAIwE,MAAM,YAAY,MAAM,YAAY,MAAM,eAAexE,EAAIyE,YAAY,YAAYzE,EAAI0E,SAAS,sBAAsB,IAAIzD,GAAG,CAAC,qBAAqB,SAASC,GAAQlB,EAAIyE,YAAYvD,GAAQ,sBAAsB,SAASA,GAAQlB,EAAIyE,YAAYvD,GAAQ,kBAAkB,SAASA,GAAQlB,EAAI0E,SAASxD,GAAQ,mBAAmB,SAASA,GAAQlB,EAAI0E,SAASxD,GAAQ,cAAclB,EAAI2E,qBAAqB,iBAAiB3E,EAAI4E,4BAA4B,YAE5rJC,EAAkB,G,gDCsIP,GACfxE,KAAA,aACAyE,WAAA,GACAC,UACA,CACA7B,GAAA,EACAuB,YAAA,EACAC,SAAA,GACA9D,SAAA,GACAiB,WAAA,EACAmD,cAAA,GACAzC,aAAA,GACAsB,UAAA,GACAW,MAAA,EACAhE,SAAA,EACAwB,QAAA,GACAuB,OAAA,KAGA0B,SAAA,IACAC,eAAA,CACA,QACA,mBACA,cACA,uBAGAC,UACA,KAAAjC,GAAA,KAAAkC,OAAArC,KAAAsC,QAAA,aACA,KAAAC,YACA,KAAAC,cACA,KAAAC,kBACA,KAAAC,eACA,KAAAC,aAEAC,MAAA,CACAP,OAAAQ,GACA,KAAA1C,GAAA0C,EAAAC,OAAAC,UACA,KAAAR,YACA,KAAAC,cACA,KAAAC,kBACA,KAAAC,eACA,KAAAC,cAGAK,QAAA,CACAT,YACA/B,eAAA,CAAAvB,QAAA,qBACAgE,KAAAC,IACA,KAAA1C,OAAA0C,EAAAlB,KAAAmB,SACA,QAAAC,EAAA,EAAAA,EAAA,KAAA5C,OAAAf,OAAA2D,IACA,KAAA5C,OAAA4C,GAAAxC,UACA,KAAAJ,OAAA4C,GAAAxC,QAAAyC,KAAAC,MAAA,KAAA9C,OAAA4C,GAAAxC,YAGA2C,MAAAC,OAGAhB,cACA3E,eAAA,CAAAqC,QAAA,KAAAC,KACA8C,KAAAC,IACA,GAAAA,EAAAO,OACA,KAAA5F,SAAAqF,EAAAlB,QAGAuB,MAAAC,IACA,KAAA/F,SAAA,EACA,KAAAiG,SAAAC,MAAAH,EAAAI,YAIAnB,kBACAoB,eAAA,CAAA3D,QAAA,KAAAC,KACA8C,KAAAC,IACA,KAAA1D,aAAA0D,EAAAlB,OAEAuB,MAAAC,IACA,KAAA/F,SAAA,EACA,KAAAiG,SAAAC,MAAAH,EAAAI,YAIAlB,eACA,MAAAI,EAAA,CACAgB,KAAA,KAAApC,YACAqC,UAAA,KAAApC,SACAzB,QAAA,KAAAC,GACAlB,QAAA,KAAAA,QACA+E,KAAA,QAEAC,eAAAnB,GAAA,IACAG,KAAAC,IACA,MAAAA,EAAAO,MAAAP,EAAAlB,KAAA,CACA,IAAAA,EAAAkB,EAAAlB,KACA,KAAAlB,UAAAkB,EAAAkC,KACA,KAAAzC,MAAAyB,EAAAlB,KAAAmC,MACA,KAAA1G,SAAA,KAGA8F,MAAAC,IACA,KAAA/F,SAAA,EACA,KAAAiG,SAAAC,MAAAH,EAAAI,YAIAjB,YACAyB,eAAA,CACAlE,QAAA,KAAAC,KAEA8C,KAAAC,IACA,KAAApE,UAAAoE,EAAAlB,OAEAuB,MAAAC,QAIAzE,cACA,KAAAD,UACAuF,eAAA,CAAAnE,QAAA,KAAAC,KAAA8C,KAAAC,IACA,GAAAA,EAAAO,MAAAP,EAAAlB,OACA,KAAAlD,WAAA,KAAAA,UACA,KAAA4E,SAAA,CACAE,QAAA,SACAU,KAAA,eAGAf,MAAAC,IACAe,QAAAC,IAAA,KAAA3G,SAAA,iBACA,YAAA2F,EAAAI,QACA,KAAA9D,QAAAC,KAAA,CAAAC,KAAA,SAAAC,MAAA,CAAAwE,SAAA,cAAA5G,SAAAqC,WAEA,KAAAwD,SAAAC,MAAAH,EAAAI,WAIAc,eAAA,CAAAxE,QAAA,KAAAC,KAAA8C,KAAAC,IACA,GAAAA,EAAAO,OACA,KAAA3E,WAAA,KAAAA,UACA,KAAA4E,SAAA,CACAE,QAAA,OACAU,KAAA,eAGAf,MAAAC,IACA,YAAAA,EAAAI,QACA,KAAA9D,QAAAC,KAAA,CAAAC,KAAA,SAAAC,MAAA,CAAAwE,SAAA,cAAA5G,SAAAqC,WAEA,KAAAwD,SAAAC,MAAAH,EAAAI,YAKAxE,cACA,KAAAU,QAAAC,KAAA,CACAC,KAAA,aACAC,MAAA,CAAAC,QAAA,KAAAC,GAAAlB,QAAA,KAAAA,YAGA2C,qBAAA+C,GACA,KAAAhD,SAAAgD,EACA,KAAAjC,gBAEAb,wBAAAiC,GACA,KAAApC,YAAAoC,EACA,KAAApB,gBAEAtB,WAAAL,GACA,KAAAD,UAAAC,GAAAG,UAAA,KAAA0D,qBC/S6V,I,wBCQzVC,EAAY,eACd,EACA7H,EACA8E,GACA,EACA,KACA,WACA,MAIa,aAAA+C,E,6CCnBf,W","file":"assets/js/chunk-12d7c6c9.cad9b683.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"shop-index\"},[_c('div',{staticClass:\"shop-left\"},[_c('div',{staticClass:\"shop-wrap\"},[_c('div',{staticClass:\"head-wrap\"},[_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"img-responsive center-block\",attrs:{\"src\":_vm.shopInfo.avatar ? _vm.$img(_vm.shopInfo.avatar) : _vm.$img(_vm.defaultShopImage),\"alt\":_vm.shopInfo.site_name},on:{\"error\":function($event){_vm.shopInfo.avatar = _vm.defaultShopImage}}})]),_c('h5',[_c('span',{staticClass:\"ns-text-color\"},[_vm._v(_vm._s(_vm.shopInfo.site_name))]),(_vm.shopInfo.is_own == 1)?_c('el-tag',{staticClass:\"tag\",attrs:{\"size\":\"small\"}},[_vm._v(\"自营\")]):_vm._e()],1)]),_c('div',{staticClass:\"info-wrap\"},[_c('div',{staticClass:\"item\"},[_vm._v(\" 描述相符 \"),_c('b',[_vm._v(_vm._s(_vm.shopInfo.shop_desccredit))]),_vm._v(\"分 \")]),_c('div',{staticClass:\"item\"},[_vm._v(\" 服务态度 \"),_c('b',[_vm._v(_vm._s(_vm.shopInfo.shop_servicecredit))]),_vm._v(\"分 \")]),_c('div',{staticClass:\"item\"},[_vm._v(\" 发货速度 \"),_c('b',[_vm._v(_vm._s(_vm.shopInfo.shop_deliverycredit))]),_vm._v(\"分 \")])]),_c('div',{staticClass:\"other-info\"},[(_vm.shopInfo.telephone)?_c('div',{staticClass:\"tell\"},[_c('div',{staticClass:\"tell-name\"},[_vm._v(\"电话:\")]),_c('div',{staticClass:\"tell-detail\"},[_vm._v(_vm._s(_vm.shopInfo.telephone))])]):_vm._e(),(_vm.shopInfo.full_address)?_c('div',{staticClass:\"item-info\"},[_c('div',{staticClass:\"item-name\"},[_vm._v(\"地址:\")]),_c('div',{staticClass:\"item-detail\"},[_vm._v(_vm._s(_vm.shopInfo.full_address)+_vm._s(_vm.shopInfo.address))])]):_vm._e()]),_c('div',{staticClass:\"operation\"},[(_vm.hasFollow)?_c('el-button',{attrs:{\"size\":\"medium\"},on:{\"click\":_vm.getIsFollow}},[_vm._v(\"取消关注\")]):_c('el-button',{attrs:{\"size\":\"medium\"},on:{\"click\":_vm.getIsFollow}},[_vm._v(\"关注店铺\")])],1)]),_c('div',{staticClass:\"shop-goods-search\"},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"搜索 商品\",\"size\":\"medium\",\"maxlength\":\"50\",\"clearable\":\"\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.goGoodsList},slot:\"append\"})],1)],1),_c('div',{staticClass:\"shop-goods-cate\",class:{border:_vm.categoryList.length}},_vm._l((_vm.categoryList),function(item){return _c('div',{key:item.category_id,staticClass:\"item\"},[_c('div',{staticClass:\"menu-name\",on:{\"click\":function($event){return _vm.$router.push({ path: '/shop_list', query: { site_id: _vm.id, shop_category_id: item.category_id } })}}},[_vm._v(_vm._s(item.category_name))]),_vm._l((item.child_list),function(cate){return _c('div',{key:cate.category_id,staticClass:\"submenu\",on:{\"click\":function($event){return _vm.$router.push({ path: '/shop_list', query: { site_id: _vm.id, shop_category_id: item.category_id} })}}},[_vm._v(_vm._s(cate.category_name))])})],2)}),0)]),_c('div',{staticClass:\"shop-right\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"shop-banner\"},[_c('el-carousel',{attrs:{\"height\":\"406px\"}},_vm._l((_vm.adList),function(item){return _c('el-carousel-item',{key:item.adv_id},[_c('el-image',{attrs:{\"src\":_vm.$img(item.adv_image),\"fit\":\"cover\"},on:{\"click\":function($event){return _vm.$router.pushToTab(item.adv_url.url)}}})],1)}),1)],1),(_vm.goodsList.length)?_c('div',{staticClass:\"tj\"},[_c('h5',[_vm._v(\"本店推荐\")])]):_vm._e(),_c('div',{staticClass:\"goods-info\"},_vm._l((_vm.goodsList),function(item,index){return _c('div',{key:item.goods_id,staticClass:\"item\",on:{\"click\":function($event){return _vm.$router.pushToTab({ path: '/sku-' + item.sku_id })}}},[_c('img',{staticClass:\"img-wrap\",attrs:{\"src\":_vm.$img(item.sku_image, { size: 'mid' })},on:{\"error\":function($event){return _vm.imageError(index)}}}),_c('div',{staticClass:\"goods-name\"},[_vm._v(_vm._s(item.goods_name))]),_c('div',{staticClass:\"price-wrap\"},[_c('div',{staticClass:\"price\"},[_c('p',[_vm._v(\"￥\")]),_vm._v(\" \"+_vm._s(item.discount_price)+\" \")]),_c('div',{staticClass:\"market-price\"},[_vm._v(\"￥\"+_vm._s(item.market_price))])]),(item.promotion_type == 1)?_c('div',{staticClass:\"promotion_type\"},[_vm._v(\"限时折扣\")]):_vm._e()])}),0),_c('div',{staticClass:\"pager\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"pager-count\":5,\"total\":_vm.total,\"prev-text\":\"上一页\",\"next-text\":\"下一页\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"hide-on-single-page\":\"\"},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event},\"size-change\":_vm.handlePageSizeChange,\"current-change\":_vm.handleCurrentPageChange}})],1)])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"shop-index\" v-loading=\"loading\">\r\n            <div class=\"shop-left\">\r\n            <div class=\"shop-wrap\">\r\n                <div class=\"head-wrap\">\r\n                <div class=\"img-wrap\">\r\n                    <img\r\n                    class=\"img-responsive center-block\"\r\n                    :src=\"shopInfo.avatar ? $img(shopInfo.avatar) : $img(defaultShopImage)\"\r\n                    @error=\"shopInfo.avatar = defaultShopImage\"\r\n                    :alt=\"shopInfo.site_name\"\r\n                    />\r\n                </div>\r\n                <h5>\r\n                    <span class=\"ns-text-color\">{{ shopInfo.site_name }}</span>\r\n                    <el-tag class=\"tag\" size=\"small\" v-if=\"shopInfo.is_own == 1\">自营</el-tag>\r\n                </h5>\r\n                </div>\r\n                <div class=\"info-wrap\">\r\n                <div class=\"item\">\r\n                    描述相符\r\n                    <b>{{ shopInfo.shop_desccredit }}</b>分\r\n                </div>\r\n                <div class=\"item\">\r\n                    服务态度\r\n                    <b>{{ shopInfo.shop_servicecredit }}</b>分\r\n                </div>\r\n                <div class=\"item\">\r\n                    发货速度\r\n                    <b>{{ shopInfo.shop_deliverycredit }}</b>分\r\n                </div>\r\n                </div>\r\n                <div class=\"other-info\">\r\n                <div class=\"tell\" v-if=\"shopInfo.telephone\">\r\n                    <div class=\"tell-name\">电话:</div>\r\n                    <div class=\"tell-detail\">{{shopInfo.telephone}}</div>\r\n                </div>\r\n                <div class=\"item-info\" v-if=\"shopInfo.full_address\">\r\n                    <div class=\"item-name\">地址:</div>\r\n                    <div class=\"item-detail\">{{shopInfo.full_address}}{{shopInfo.address}}</div>\r\n                </div>\r\n                </div>\r\n                <div class=\"operation\">\r\n                <el-button size=\"medium\" @click=\"getIsFollow\" v-if=\"hasFollow\">取消关注</el-button>\r\n                <el-button size=\"medium\" @click=\"getIsFollow\" v-else>关注店铺</el-button>\r\n                </div>\r\n            </div>\r\n            <div class=\"shop-goods-search\">\r\n                <el-input\r\n                placeholder=\"搜索 商品\"\r\n                v-model=\"keyword\"\r\n                class=\"input-with-select\"\r\n                size=\"medium\"\r\n                maxlength=\"50\"\r\n                clearable\r\n                >\r\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"goGoodsList\"></el-button>\r\n                </el-input>\r\n            </div>\r\n            <div class=\"shop-goods-cate\" :class=\"{border:categoryList.length}\">\r\n                <div class=\"item\" v-for=\"item in categoryList\" :key=\"item.category_id\">\r\n                <div\r\n                    class=\"menu-name\"\r\n                    @click=\"$router.push({ path: '/shop_list', query: { site_id: id, shop_category_id: item.category_id } })\"\r\n                >{{ item.category_name }}</div>\r\n                <div\r\n                    class=\"submenu\"\r\n                    v-for=\"cate in item.child_list\"\r\n                    :key=\"cate.category_id\"\r\n                    @click=\"$router.push({ path: '/shop_list', query: { site_id: id, shop_category_id: item.category_id} })\"\r\n                >{{ cate.category_name }}</div>\r\n                </div>\r\n            </div>\r\n            </div>\r\n            <div class=\"shop-right\">\r\n            <div class=\"content\">\r\n                <div class=\"shop-banner\">\r\n                <el-carousel height=\"406px\">\r\n                    <el-carousel-item v-for=\"item in adList\" :key=\"item.adv_id\">\r\n                    <el-image :src=\"$img(item.adv_image)\" fit=\"cover\" @click=\"$router.pushToTab(item.adv_url.url)\" />\r\n                    </el-carousel-item>\r\n                </el-carousel>\r\n                </div>\r\n                <div class=\"tj\" v-if=\"goodsList.length\">\r\n                <h5>本店推荐</h5>\r\n                </div>\r\n                <div class=\"goods-info\">\r\n                <div\r\n                    class=\"item\"\r\n                    v-for=\"(item, index) in goodsList\"\r\n                    :key=\"item.goods_id\"\r\n                    @click=\"$router.pushToTab({ path: '/sku-' + item.sku_id })\"\r\n                >\r\n                    <img\r\n                    class=\"img-wrap\"\r\n                    :src=\"$img(item.sku_image, { size: 'mid' })\"\r\n                    @error=\"imageError(index)\"\r\n                    />\r\n\r\n                    <div class=\"goods-name\">{{ item.goods_name }}</div>\r\n                    <div class=\"price-wrap\">\r\n                    <div class=\"price\">\r\n                        <p>￥</p>\r\n                        {{ item.discount_price }}\r\n                    </div>\r\n                    <div class=\"market-price\">￥{{ item.market_price }}</div>\r\n                    </div>\r\n                    <div class=\"promotion_type\" v-if=\"item.promotion_type == 1\">限时折扣</div>\r\n                </div>\r\n                </div>\r\n                <div class=\"pager\">\r\n                <el-pagination\r\n                    background\r\n                    :pager-count=\"5\"\r\n                    :total=\"total\"\r\n                    prev-text=\"上一页\"\r\n                    next-text=\"下一页\"\r\n                    :current-page.sync=\"currentPage\"\r\n                    :page-size.sync=\"pageSize\"\r\n                    @size-change=\"handlePageSizeChange\"\r\n                    @current-change=\"handleCurrentPageChange\"\r\n                    hide-on-single-page\r\n                ></el-pagination>\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { shopInfo, isFollow, unFollow, follow,tree } from \"@/api/shop/index\";\r\nimport { goodsSkuPage } from \"@/api/goods/goods\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { adList } from \"@/api/website\";\r\nexport default {\r\n  name: \"shop_index\",\r\n  components: {},\r\n  data: () => {\r\n    return {\r\n      id: 0,\r\n      currentPage: 1,\r\n      pageSize: 12,\r\n      shopInfo: {}, //店铺信息\r\n      hasFollow: false, //是否关注\r\n      searchContent: \"\",\r\n      categoryList: [],\r\n      goodsList: [],\r\n      total: 0,\r\n      loading: true,\r\n      keyword: \"\",\r\n      adList: []\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      \"token\",\r\n      \"defaultShopImage\",\r\n      \"addonIsExit\",\r\n      \"defaultGoodsImage\"\r\n    ])\r\n  },\r\n  created() {\r\n    this.id = this.$route.path.replace(\"/shop-\", \"\");\r\n    this.getAdList();\r\n    this.getShopInfo();\r\n    this.getCategoryList();\r\n    this.getGoodsList();\r\n    this.getfollow();\r\n  },\r\n  watch: {\r\n    $route(curr) {\r\n      this.id = curr.params.pathMatch;\r\n      this.getAdList();\r\n      this.getShopInfo();\r\n      this.getCategoryList();\r\n      this.getGoodsList();\r\n      this.getfollow();\r\n    }\r\n  },\r\n  methods: {\r\n    getAdList() {\r\n      adList({ keyword: \"NS_PC_SHOP_INDEX\" })\r\n        .then(res => {\r\n          this.adList = res.data.adv_list;\r\n          for (let i = 0; i < this.adList.length; i++) {\r\n            if (this.adList[i].adv_url)\r\n              this.adList[i].adv_url = JSON.parse(this.adList[i].adv_url);\r\n          }\r\n        })\r\n        .catch(err => err);\r\n    },\r\n    //获取店铺信息\r\n    getShopInfo() {\r\n      shopInfo({ site_id: this.id })\r\n        .then(res => {\r\n          if (res.code == 0) {\r\n            this.shopInfo = res.data;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false;\r\n          this.$message.error(err.message);\r\n        });\r\n    },\r\n    //获取店铺商品分类列表\r\n    getCategoryList() {\r\n      tree({ site_id: this.id })\r\n        .then(res => {\r\n          this.categoryList = res.data;\r\n        })\r\n        .catch(err => {\r\n          this.loading = false;\r\n          this.$message.error(err.message);\r\n        });\r\n    },\r\n    //获取店铺商品列表\r\n    getGoodsList() {\r\n      const params = {\r\n        page: this.currentPage,\r\n        page_size: this.pageSize,\r\n        site_id: this.id,\r\n        keyword: this.keyword,\r\n        sort: \"desc\"\r\n      };\r\n      goodsSkuPage(params || {})\r\n        .then(res => {\r\n          if (res.code == 0 && res.data) {\r\n            let data = res.data;\r\n            this.goodsList = data.list;\r\n            this.total = res.data.count;\r\n            this.loading = false;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.loading = false;\r\n          this.$message.error(err.message);\r\n        });\r\n    },\r\n    //获取店铺关注信息\r\n    getfollow() {\r\n      isFollow({\r\n        site_id: this.id\r\n      })\r\n        .then(res => {\r\n          this.hasFollow = res.data;\r\n        })\r\n        .catch(err => {\r\n        });\r\n    },\r\n    //关注与取消\r\n    getIsFollow() {\r\n      if (this.hasFollow) {\r\n        unFollow({ site_id: this.id }).then(res => {\r\n          if (res.code == 0 && res.data) {\r\n            this.hasFollow = !this.hasFollow;\r\n            this.$message({\r\n              message: \"取消关注成功\",\r\n              type: \"success\"\r\n            });\r\n          }\r\n        }).catch(err => {\r\n\t\t\tconsole.log(this.shopInfo,'this.shopInfo')\r\n\t\t\tif (err.message == 'token不存在') {\r\n\t\t\t\tthis.$router.push({path: '/login', query: {redirect: \"/shop-\"+this.shopInfo.site_id}});\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t}\r\n\t\t});\r\n      } else {\r\n        follow({ site_id: this.id }).then(res => {\r\n          if (res.code == 0) {\r\n            this.hasFollow = !this.hasFollow;\r\n            this.$message({\r\n              message: \"关注成功\",\r\n              type: \"success\"\r\n            });\r\n          }\r\n        }).catch(err => {\r\n\t\t\tif (err.message == 'token不存在') {\r\n\t\t\t\tthis.$router.push({path: '/login', query: {redirect: \"/shop-\"+this.shopInfo.site_id}});\r\n\t\t\t} else {\r\n\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t}\r\n\t\t});\r\n}\r\n    },\r\n    goGoodsList() {\r\n      this.$router.push({\r\n        path: \"/shop_list\",\r\n        query: { site_id: this.id, keyword: this.keyword }\r\n      });\r\n    },\r\n    handlePageSizeChange(num) {\r\n      this.pageSize = num;\r\n      this.getGoodsList();\r\n    },\r\n    handleCurrentPageChange(page) {\r\n      this.currentPage = page;\r\n      this.getGoodsList();\r\n    },\r\n    imageError(index) {\r\n      this.goodsList[index].sku_image = this.defaultGoodsImage;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.shop-index {\r\n  padding-top: 10px;\r\n  display: flex;\r\n  background-color: #ffffff;\r\n  .shop-left {\r\n    width: 234px;\r\n    .shop-wrap {\r\n      width: 191px;\r\n      float: right;\r\n      border: 1px solid #eeeeee;\r\n      padding: 0 21px;\r\n      .head-wrap {\r\n        text-align: center;\r\n        padding: 10px 0;\r\n        border-bottom: 1px solid #eeeeee;\r\n        .img-wrap {\r\n          width: 60px;\r\n          height: 60px;\r\n          line-height: 60px;\r\n          display: inline-block;\r\n        }\r\n        .tag {\r\n          margin-left: 5px;\r\n        }\r\n      }\r\n      .info-wrap {\r\n        padding: 10px;\r\n        color: #838383;\r\n        b {\r\n          color: #383838;\r\n        }\r\n        border-bottom: 1px solid #eeeeee;\r\n      }\r\n      .other-info {\r\n        padding: 10px;\r\n        color: #838383;\r\n        .item-info {\r\n          display: flex;\r\n          .item-name {\r\n            width: 75px;\r\n          }\r\n        }\r\n        .tell {\r\n          display: flex;\r\n          .tell-name {\r\n            width: 35px;\r\n          }\r\n        }\r\n      }\r\n      .operation {\r\n        border-top: 1px solid #eeeeee;\r\n        padding: 10px 0;\r\n        text-align: center;\r\n      }\r\n    }\r\n    .shop-goods-search {\r\n      .el-input {\r\n        margin: 10px 0;\r\n      }\r\n    }\r\n    .border{\r\n      border: 1px solid #f1f1ff;\r\n    }\r\n    .shop-goods-cate {\r\n      width: 100%;\r\n      .menu-name {\r\n        padding-left: 16px;\r\n        background: #f8f8f8;\r\n        font-size: $ns-font-size-base;\r\n        height: 40px;\r\n        cursor: pointer;\r\n        color: #666666;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      .submenu {\r\n        font-size: $ns-font-size-base;\r\n        line-height: 2;\r\n        border-top: 1px solid #f1f1f1;\r\n        padding-left: 26px;\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: center;\r\n        height: 40px;\r\n        background: #ffffff;\r\n        color: #666666;\r\n      }\r\n    }\r\n  }\r\n  .shop-right {\r\n    margin-left: 26px;\r\n    width: 100%;\r\n    .shop-banner {\r\n      width: 100%;\r\n    }\r\n    .tj {\r\n      text-align: center;\r\n      font-size: 30px;\r\n      margin-top: 10px;\r\n    }\r\n    .goods-info {\r\n      margin-top: 5px;\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      .item {\r\n        width: calc((90% - 60px) / 4);\r\n        margin: 10px 20px 0 0;\r\n        border: 1px solid #eeeeee;\r\n        padding: 10px;\r\n        position: relative;\r\n        &:nth-child(4n) {\r\n          margin-right: initial !important;\r\n        }\r\n        &:hover {\r\n          border: 1px solid $base-color;\r\n        }\r\n        .img-wrap {\r\n          width: 198px;\r\n          height: 198px;\r\n          cursor: pointer;\r\n        }\r\n        .goods-name {\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          cursor: pointer;\r\n          &:hover {\r\n            color: $base-color;\r\n          }\r\n        }\r\n        .price-wrap {\r\n          display: flex;\r\n          .price {\r\n            display: flex;\r\n            color: $base-color;\r\n            font-size: $ns-font-size-lg;\r\n            p {\r\n              font-size: $ns-font-size-base;\r\n              display: flex;\r\n              align-items: flex-end;\r\n            }\r\n          }\r\n          .market-price {\r\n            color: #838383;\r\n            text-decoration: line-through;\r\n            margin-left: 15px;\r\n          }\r\n        }\r\n        .promotion_type {\r\n          position: absolute;\r\n          top: 0;\r\n          right: 0;\r\n          color: #ffffff;\r\n          background: $base-color;\r\n          border-bottom-left-radius: 10px;\r\n          padding: 3px 8px;\r\n          line-height: 1;\r\n          font-size: $ns-font-size-sm;\r\n        }\r\n      }\r\n    }\r\n    .page {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-content: center;\r\n      padding-top: 20px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2c8b208c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2c8b208c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c8b208c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2c8b208c&prod&lang=scss&scoped=true\""],"sourceRoot":""}