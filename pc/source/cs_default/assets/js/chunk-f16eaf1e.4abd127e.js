(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f16eaf1e"],{4356:function(e,t,a){"use strict";a("b1ae")},"6aea":function(e,t,a){"use strict";a("716b")},"716b":function(e,t,a){},b1ae:function(e,t,a){},d6e4:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.yes,expression:"yes"}],staticClass:"null-page"}),t("el-card",{staticClass:"box-card member-coupon"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("我的优惠券")])]),t("div",[t("el-tabs",{on:{"tab-click":e.handleClickSource},model:{value:e.couponsource,callback:function(t){e.couponsource=t},expression:"couponsource"}},[t("el-tab-pane",{attrs:{label:"店铺优惠券",name:"1"}}),t("el-tab-pane",{attrs:{label:"平台优惠券",name:"2"}})],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-tabs",{on:{"tab-click":e.handleClickStatus},model:{value:e.couponstatus,callback:function(t){e.couponstatus=t},expression:"couponstatus"}},[t("el-tab-pane",{attrs:{label:"未使用",name:"1"}}),t("el-tab-pane",{attrs:{label:"已使用",name:"2"}}),t("el-tab-pane",{attrs:{label:"已过期",name:"3"}})],1),t("div",{staticClass:"coupon-wrap"},[e._l(e.couponList,(function(a,s){return t("div",{key:s,staticClass:"text item",class:"1"==e.state?"coupon-not-used":"2"==e.state?"coupon-used":"coupon-expire",on:{click:function(t){return e.useCoupon(a)}}},[["0.00"!=a.discount&&a.discount?t("p",{staticClass:"coupon-wrap-money"},[t("span",[e._v(e._s(a.discount))]),e._v(" 折 ")]):t("p",{staticClass:"coupon-wrap-money"},[e._v(" ￥ "),t("span",[e._v(e._s(a.money))])])],t("p",{staticClass:"coupon-wrap-name"},[e._v(e._s("1"==e.couponsource?a.coupon_name:a.platformcoupon_name))]),"1"==e.couponsource?t("p",{staticClass:"coupon-wrap-site coupon-wrap-info"},[e._v("使用店铺："+e._s(a.site_name))]):e._e(),[a.at_least>0?t("p",{staticClass:"coupon-wrap-least coupon-wrap-info"},[e._v("满"+e._s(a.at_least)+"元可用")]):t("p",{staticClass:"coupon-wrap-least coupon-wrap-info"},[e._v("无门槛优惠券")])],[a.validity_type?t("p",{staticClass:"coupon-wrap-time coupon-wrap-info"},[e._v("领取之日起"+e._s(a.fixed_term)+"日内有效")]):t("p",{staticClass:"coupon-wrap-time coupon-wrap-info"},[e._v("有效期至"+e._s(e.$timeStampTurnTime(a.end_time)))])]],2)})),0==e.couponList.length?t("div",{staticClass:"empty-text"},[e._v(e._s(e.text))]):e._e()],2),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{background:"","pager-count":5,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-size":e.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)])],1)},o=[],n=(a("14d9"),a("69f9")),i=a("2f62"),c={name:"my_coupon",components:{},data:()=>({total:0,currentPage:1,pageSize:9,couponsource:"1",couponstatus:"1",couponList:[],type:"",state:1,text:"您还没有优惠券哦",loading:!0,yes:!0}),created(){this.addonIsExit&&1!=this.addonIsExit.coupon?this.$message({message:"优惠券插件未安装",type:"warning",duration:2e3,onClose:()=>{this.$route.push("/member/index")}}):this.getListData()},mounted(){let e=this;setTimeout((function(){e.yes=!1}),300)},computed:{...Object(i["b"])(["addonIsExit"])},watch:{addonIsExit(){1!=this.addonIsExit.coupon&&this.$message({message:"优惠券插件未安装",type:"warning",duration:2e3,onClose:()=>{this.$route.push("/member/index")}})}},methods:{handleClickSource(e,t){this.refresh()},handleClickStatus(e,t){"1"==e.name?(this.state=1,this.text="您还没有优惠券哦"):"2"==e.name?(this.state=2,this.text="您还没有使用过优惠券哦"):(this.state=3,this.text="您还没有过期优惠券哦"),this.refresh()},handlePageSizeChange(e){this.pageSize=e,this.refresh()},handleCurrentPageChange(e){this.currentPage=e,this.refresh()},refresh(){this.loading=!0,this.getListData()},getListData(){Object(n["f"])({page:this.currentPage,page_size:this.pageSize,state:this.state,is_own:this.type,couponsource:this.couponsource}).then(e=>{e.code>=0&&(this.total=e.data.count,this.couponList=e.data.list),this.loading=!1}).catch(e=>{this.loading=!1,this.$message.error(e.message)})},useCoupon(e){1==e.state&&("1"==this.couponsource?1!=e.goods_type?this.$router.push({path:"/shop_list",query:{site_id:e.site_id,couponId:e.coupon_type_id}}):this.$router.push({path:"/shop_list",query:{site_id:e.site_id}}):1!=e.use_scenario?this.$router.push({path:"/list",query:{platform_coupon_type:e.platformcoupon_type_id}}):this.$router.push("/list"))}}},u=c,p=(a("4356"),a("6aea"),a("2877")),r=Object(p["a"])(u,s,o,!1,null,"5f35e283",null);t["default"]=r.exports}}]);
//# sourceMappingURL=chunk-f16eaf1e.4abd127e.js.map