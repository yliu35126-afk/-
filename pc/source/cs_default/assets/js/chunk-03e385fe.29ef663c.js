(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03e385fe"],{"1be8":function(t,e,a){},"3acc":function(t,e,a){"use strict";a("1be8")},"4df4":function(t,e,a){"use strict";var r=a("0366"),i=a("7b0b"),n=a("9bdd"),o=a("e95a"),l=a("68ee"),s=a("07fa"),d=a("8418"),c=a("9a1f"),f=a("35a1");t.exports=function(t){var e=i(t),a=l(this),u=arguments.length,m=u>1?arguments[1]:void 0,h=void 0!==m;h&&(m=r(m,u>2?arguments[2]:void 0,2));var v,p,_,D,g,y,b=f(e),A=0;if(!b||this==Array&&o(b))for(v=s(e),p=a?new this(v):Array(v);v>A;A++)y=h?m(e[A],A):e[A],d(p,A,y);else for(D=c(e,b),g=D.next,p=a?new this:[];!(_=g.call(D)).done;A++)y=h?n(D,m,[_.value,A],!0):_.value,d(p,A,y);return p.length=A,p}},"6de3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.yes,expression:"yes"}],staticClass:"null-page"}),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑收货地址")])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ns-member-address-list"},[a("el-form",{ref:"ruleForm",attrs:{model:t.formData,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticClass:"ns-len-input",attrs:{placeholder:"收货人姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{staticClass:"ns-len-input",attrs:{autocomplete:"off",placeholder:"收货人手机号"},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{staticClass:"ns-len-input",attrs:{autocomplete:"off",placeholder:"收货人固定电话（选填）"},model:{value:t.formData.telephone,callback:function(e){t.$set(t.formData,"telephone","string"===typeof e?e.trim():e)},expression:"formData.telephone"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"full_address"}},[a("el-select",{attrs:{placeholder:"请选择省"},on:{change:function(e){return t.changeProvice(t.formData.province_id)}},model:{value:t.formData.province_id,callback:function(e){t.$set(t.formData,"province_id",e)},expression:"formData.province_id"}},t._l(t.province,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.name))])})),1),a("el-select",{attrs:{placeholder:"请选择市"},on:{change:function(e){return t.changeCity(t.formData.city_id)}},model:{value:t.formData.city_id,callback:function(e){t.$set(t.formData,"city_id",e)},expression:"formData.city_id"}},t._l(t.city,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.name))])})),1),a("el-select",{attrs:{placeholder:"请选择区/县"},on:{change:function(e){return t.changeDistrict(t.formData.district_id)}},model:{value:t.formData.district_id,callback:function(e){t.$set(t.formData,"district_id",e)},expression:"formData.district_id"}},t._l(t.district,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{staticClass:"ns-len-input",attrs:{autocomplete:"off",placeholder:"定位到小区、街道、写字楼"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address","string"===typeof e?e.trim():e)},expression:"formData.address"}})],1),a("el-form-item",{attrs:{label:"是否默认"}},[a("el-radio-group",{model:{value:t.formData.is_default,callback:function(e){t.$set(t.formData,"is_default",e)},expression:"formData.is_default"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.saveAddress("ruleForm")}}},[t._v("保存")])],1)],1)],1)])],1)},i=[];function n(t){if(Array.isArray(t))return t}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function o(t,e){var a=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var r,i,n=[],o=!0,l=!1;try{for(a=a.call(t);!(o=(r=a.next()).done);o=!0)if(n.push(r.value),e&&n.length===e)break}catch(s){l=!0,i=s}finally{try{o||null==a["return"]||a["return"]()}finally{if(l)throw i}}return n}}a("fb6a"),a("b0c0"),a("a630");function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function s(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return n(t)||o(t,e)||s(t,e)||d()}a("a15b"),a("7db0"),a("159b");var f=a("69f9"),u=a("2f94"),m={name:"address_edit",components:{},data:function(){var t=this,e=function(t,e,a){if(!e)return a(new Error("手机号不能为空"));var r=/^1[3|4|5|6|7|8|9][0-9]{9}$/;r.test(e)?a():a(new Error("请输入正确的手机号"))},a=function(e,a,r){return t.formData.province_id?t.formData.city_id?t.formData.district_id?r():r(new Error("请选择区/县")):r(new Error("请选择市")):r(new Error("请选择省"))};return{formData:{id:0,name:"",mobile:"",telephone:"",province_id:"",city_id:"",district_id:"",community_id:"",address:"",full_address:"",latitude:0,longitude:0,is_default:1},addressValue:"",flag:!1,defaultRegions:[],rules:{name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],mobile:[{required:!0,validator:e,trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],full_address:[{required:!0,validator:a,trigger:"blur"}]},province:[],city:[],district:[],pickerValueArray:[],multiIndex:[0,0,0],isInitMultiArray:!1,isLoadDefaultAreas:!1,loading:!0,yes:!0}},created:function(){this.formData.id=this.$route.query.id,this.getAddressDetail(),this.getDefaultAreas(0,{level:0})},mounted:function(){var t=this;setTimeout((function(){t.yes=!1}),300)},watch:{defaultRegions:{handler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];3===t.length&&t.join("")!==e.join("")&&this.handleDefaultRegions()},immediate:!0}},computed:{pickedArr:function(){return this.isInitMultiArray?[this.pickerValueArray[0],this.pickerValueArray[1],this.pickerValueArray[2]]:[this.pickerValueArray[0],this.city,this.district]}},methods:{changeProvice:function(t){var e=this;this.getAreas(t,(function(t){return e.city=t}));var a={};a=this.province.find((function(e){return e.id===t})),this.formData.city_id="",this.formData.district_id="",this.formData.full_address=a.name},changeCity:function(t){var e=this;this.getAreas(t,(function(t){return e.district=t}));var a={};a=this.city.find((function(e){return e.id===t})),this.formData.district_id="",this.formData.full_address=this.formData.full_address+"-"+a.name},changeDistrict:function(t){var e={};e=this.district.find((function(e){return e.id===t})),this.formData.full_address=this.formData.full_address+"-"+e.name},getAddressDetail:function(){var t=this;Object(f["d"])({id:this.formData.id}).then((function(e){var a=e.data;null!=a&&(t.formData.name=a.name,t.formData.mobile=a.mobile,t.formData.telephone=a.telephone,t.formData.address=a.address,t.formData.full_address=a.full_address,t.formData.latitude=a.latitude,t.formData.longitude=a.longitude,t.formData.is_default=a.is_default,t.formData.province_id=a.province_id,t.formData.city_id=a.city_id,t.formData.district_id=a.district_id,t.defaultRegions=[a.province_id,a.city_id,a.district_id])})).catch((function(t){}))},getAreas:function(t,e){Object(u["a"])({pid:t}).then((function(t){if(0==t.code){var a=[];t.data.forEach((function(t,e){a.push(t)})),e&&e(a)}})).catch((function(t){}))},getDefaultAreas:function(t,e){var a=this;Object(u["a"])({pid:t}).then((function(t){if(0==t.code){var r=[],i=void 0;t.data.forEach((function(t,a){void 0!=e&&(0==e.level&&void 0!=e.province_id?i=e.province_id:1==e.level&&void 0!=e.city_id?i=e.city_id:2==e.level&&void 0!=e.district_id&&(i=e.district_id)),void 0==i&&0==a&&(i=t.id),r.push(t)})),a.pickerValueArray[e.level]=r,e.level+1<3?(e.level++,a.getDefaultAreas(i,e)):(a.isInitMultiArray=!0,a.isLoadDefaultAreas=!0),a.province=a.pickerValueArray[0]}a.loading=!1})).catch((function(t){a.loading=!1}))},handleDefaultRegions:function(){var t=this,e=setInterval((function(){if(t.isLoadDefaultAreas){t.isInitMultiArray=!1;for(var a=0;a<t.defaultRegions.length;a++)for(var r=function(e){t.province=t.pickerValueArray[0],t.defaultRegions[a]==t.pickerValueArray[a][e].id&&(t.$set(t.multiIndex,a,e),t.getAreas(t.pickerValueArray[a][e].id,(function(a){t.city=a;for(var r=function(a){if(t.defaultRegions[1]==t.city[a].id)return t.$set(t.multiIndex,1,a),t.getAreas(t.city[a].id,(function(r){t.district=r;for(var i=0;i<t.district.length;i++)if(t.defaultRegions[2]==t.district[i].id){t.$set(t.multiIndex,2,i),t.handleValueChange({detail:{value:[e,a,i]}});break}})),"break"},i=0;i<t.city.length;i++){var n=r(i);if("break"===n)break}})))},i=0;i<t.pickerValueArray[a].length;i++)r(i);t.isLoadDefaultAreas&&clearInterval(e)}}),100)},handleValueChange:function(t){var e=c(t.detail.value,3),a=e[0],r=e[1],i=e[2],n=c(this.pickedArr,3),o=n[0],l=n[1],s=n[2],d=[o[a],l[r],s[i]];this.formData.full_address="";for(var f=0;f<d.length;f++)this.formData.full_address?this.formData.full_address=this.formData.full_address+"-"+d[f].name:this.formData.full_address=this.formData.full_address+d[f].name},saveAddress:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;var a={name:e.formData.name,mobile:e.formData.mobile,telephone:e.formData.telephone,province_id:e.formData.province_id,city_id:e.formData.city_id,district_id:e.formData.district_id,community_id:"",address:e.formData.address,full_address:e.formData.full_address,latitude:e.formData.latitude,longitude:e.formData.longitude,is_default:e.formData.is_default,url:"add"};e.formData.id&&(a.url="edit",a.id=e.formData.id),e.flag||(e.flag=!0,Object(f["m"])(a).then((function(t){0==t.code?e.$router.push({path:"/member/delivery_address"}):(e.flag=!1,e.$message({message:t.message,type:"warning"}))})).catch((function(t){e.flag=!1,e.$message.error(t.message)})))}))}}},h=m,v=(a("3acc"),a("2877")),p=Object(v["a"])(h,r,i,!1,null,"2ac635e2",null);e["default"]=p.exports},"9bdd":function(t,e,a){var r=a("825a"),i=a("2a62");t.exports=function(t,e,a,n){try{return n?e(r(a)[0],a[1]):e(a)}catch(o){i(t,"throw",o)}}},a630:function(t,e,a){var r=a("23e7"),i=a("4df4"),n=a("1c7e"),o=!n((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:i})}}]);
//# sourceMappingURL=chunk-03e385fe.29ef663c.js.map