(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bb12ada"],{"2f84":function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return n}));var s=i("751a");function a(t){return Object(s["a"])({url:"/api/goodscollect/iscollect",data:t,forceLogin:!0})}function r(t){return Object(s["a"])({url:"/api/goodscollect/add",data:t,forceLogin:!0})}function n(t){return Object(s["a"])({url:"/api/goodscollect/delete",data:t,forceLogin:!0})}},"43fc":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-list"},[t.keyword?e("div",{staticClass:"search_bread"},[e("span",[t._v("搜索结果：")]),e("span",{staticClass:"keyword"},[t._v("'"+t._s(t.keyword)+"'")])]):!t.keyword&&t.catewords?e("div",{staticClass:"search_bread"},[e("span",[t._v("搜索结果:：")]),e("span",{staticClass:"keyword"},[t._v("'"+t._s(t.catewords)+"'")])]):t._e(),t.catewords?e("div",{staticClass:"attr_filter"},[t.choosedBrand?e("el-tag",{attrs:{type:"info",closable:"",effect:"plain"},on:{close:t.colseBrand}},[t.choosedBrand?e("span",{staticClass:"title"},[t._v("品牌：")]):t._e(),t._v(" "+t._s(t.choosedBrand.brand_name)+" ")]):t._e(),t._l(t.attributeList,(function(i){return e("span",{key:i.attr_id},[i.selectedValue?e("el-tag",{attrs:{type:"info",closable:"",effect:"plain"},on:{close:function(e){return t.colseAttr(i)}}},[i.attr_name?e("span",{staticClass:"title"},[t._v(t._s(i.attr_name)+"：")]):t._e(),t._v(" "+t._s(i.selectedValue)+" ")]):t._e()],1)}))],2):t._e(),[t.brandList.length||t.attributeList.length?e("div",{staticClass:"category"},[e("div",{staticClass:"brand"},[e("div",{staticClass:"table_head"},[t._v("品牌：")]),e("div",{staticClass:"table_body"},[e("div",{staticClass:"initial"},[e("span",{attrs:{type:"info",effect:"plain",hit:""},on:{mouseover:function(e){return t.handleChangeInitial("")}}},[t._v("所有品牌")]),t._l(t.brandInitialList,(function(i){return e("span",{key:i,attrs:{type:"info",effect:"plain",hit:""},on:{mouseover:function(e){return t.handleChangeInitial(i)}}},[t._v(t._s((i||"").toUpperCase()))])}))],2),e("div",{staticClass:"content"},t._l(t.brandList,(function(i){return e("el-card",{directives:[{name:"show",rawName:"v-show",value:""===t.currentInitial||i.brand_initial===t.currentInitial,expression:"currentInitial === '' || item.brand_initial === currentInitial"}],key:i.id,staticClass:"brand-item",attrs:{"body-style":"padding: 0;height: 100%;",shadow:"hover"}},[e("el-image",{attrs:{src:t.$img(i.image_url||t.defaultGoodsImage),alt:i.brand_name,title:i.brand_name,fit:"contain"},on:{click:function(e){return t.onChooseBrand(i)}}})],1)})),1)])]),t._l(t.attributeList,(function(i){return e("div",{key:"attr"+i.attr_id,staticClass:"brand"},[e("div",{staticClass:"table_head"},[t._v(t._s(i.attr_name)+"：")]),e("div",{staticClass:"table_body"},[e("div",{staticClass:"content"},t._l(i.child,(function(s){return e("span",{key:s.attr_value_id},[i.isMuiltSelect?e("el-checkbox",{attrs:{label:s.attr_value_name,checked:s.selected},on:{change:function(e){return t.setAttrSelectedMuilt(i,s)}}}):e("el-link",{attrs:{underline:!1},on:{click:function(e){return t.setAttrSelected(i,s)}}},[t._v(t._s(s.attr_value_name))])],1)})),0)]),e("div",{staticClass:"table_op"},[e("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(e){return t.setMuiltChoose(i)}}},[t._v("多选")])],1)])}))],2):t._e()],e("div",{staticClass:"list-wrap"},[t.cargoList.length?e("div",{staticClass:"goods-recommended"},[e("goods-recommend",{attrs:{"page-size":t.cargoList.length<5?2:5}})],1):t._e(),e("div",{staticClass:"list-right"},[e("div",[e("div",{staticClass:"sort"},[e("div",{staticClass:"item",on:{click:function(e){return t.changeSort("")}}},[e("div",{staticClass:"item-name"},[t._v("综合")])]),e("div",{staticClass:"item",on:{click:function(e){return t.changeSort("sale_num")}}},[e("div",{staticClass:"item-name"},[t._v("销量")]),"sale_num"===t.filters.order&&"desc"===t.filters.sort?e("i",{staticClass:"el-icon-arrow-down el-icon--down"}):e("i",{staticClass:"el-icon-arrow-up el-icon--up"})]),e("div",{staticClass:"item",on:{click:function(e){return t.changeSort("discount_price")}}},[e("div",{staticClass:"item-name"},[t._v("价格")]),"discount_price"===t.filters.order&&"desc"===t.filters.sort?e("i",{staticClass:"el-icon-arrow-down el-icon--down"}):e("i",{staticClass:"el-icon-arrow-up el-icon--up"})]),e("div",{staticClass:"item-other"},[e("el-checkbox",{attrs:{label:"包邮"},model:{value:t.is_free_shipping,callback:function(e){t.is_free_shipping=e},expression:"is_free_shipping"}})],1),e("div",{staticClass:"item-other"},[e("el-checkbox",{attrs:{label:"自营"},model:{value:t.is_own,callback:function(e){t.is_own=e},expression:"is_own"}})],1),e("div",{staticClass:"input-wrap"},[e("div",{staticClass:"price_range"},[e("el-input",{attrs:{placeholder:"最低价格",size:"small"},model:{value:t.filters.min_price,callback:function(e){t.$set(t.filters,"min_price",e)},expression:"filters.min_price"}}),e("span",[t._v("—")]),e("el-input",{attrs:{placeholder:"最高价格",size:"small"},model:{value:t.filters.max_price,callback:function(e){t.$set(t.filters,"max_price",e)},expression:"filters.max_price"}})],1),e("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.handlePriceRange}},[t._v("确定")])],1)])]),t.cargoList.length?e("div",{staticClass:"cargo-list"},[e("div",{staticClass:"goods-info"},t._l(t.cargoList,(function(i,s){return e("div",{key:i.goods_id,staticClass:"item",on:{click:function(e){return t.$router.pushToTab({path:"/sku-"+i.sku_id})}}},[e("img",{staticClass:"img-wrap",attrs:{src:t.$img(i.sku_image,{size:"mid"})},on:{error:function(e){return t.imageError(s)}}}),e("div",{staticClass:"price-wrap"},[e("div",{staticClass:"price"},[e("p",[t._v("￥")]),t._v(" "+t._s(i.discount_price)+" ")]),e("div",{staticClass:"market-price"},[t._v("￥"+t._s(i.market_price))])]),e("div",{staticClass:"goods-name"},[t._v(t._s(i.goods_name))]),e("div",{staticClass:"sale-num"},[e("p",[t._v(t._s(i.sale_num||0))]),t._v("人付款 ")]),e("div",{staticClass:"shop_name"},[t._v(t._s(i.site_name))]),e("div",{staticClass:"saling"},[1==i.is_free_shipping?e("div",{staticClass:"free-shipping"},[t._v("包邮")]):t._e(),1==i.is_own?e("div",{staticClass:"is_own"},[t._v("自营")]):t._e(),1==i.promotion_type?e("div",{staticClass:"promotion-type"},[t._v("限时折扣")]):t._e()])])})),0),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)]):e("div",{staticClass:"empty"},[e("div",{staticClass:"ns-text-align"},[t._v("没有找到您想要的商品。换个条件试试吧")])])])])],2)},a=[],r=i("f4238"),n=i("a63f"),o=(i("14d9"),i("a2a9")),c=i("2f62"),l=i("8894"),d=i("2f84"),u={data:()=>({cargoList:[],shopList:[],brandList:[],attributeList:[],brandInitialList:[],currentInitial:"",choosedBrand:"",hasChoosedAttrs:!1,total:0,keyword:"",catewords:"",currentPage:1,pageSize:12,is_free_shipping:0,is_own:"",filters:{site_id:0,category_id:0,category_level:0,brand_id:0,min_price:"",max_price:"",order:"",sort:"desc",platform_coupon_type:0},loading:!0,whetherCollection:0}),created(){this.keyword=this.$route.query.keyword||"",this.filters.category_id=this.$route.query.category_id||"",this.filters.category_level=this.$route.query.level||"",this.filters.brand_id=this.$route.query.brand_id||"",this.filters.platform_coupon_type=this.$route.query.platform_coupon_type||0,this.getGoodsList(),this.filters.category_id&&(this.getRelevanceinfo(),this.categorySearch())},computed:{...Object(c["b"])(["defaultGoodsImage"])},methods:{categorySearch(){Object(l["b"])({category_id:this.filters.category_id}).then(t=>{0==t.code&&t.data&&(this.catewords=t.data.category_full_name)}).catch(t=>{})},addToCart(t){this.$store.dispatch("cart/add_to_cart",t).then(t=>{var e=t.data;e>0&&this.$message({message:"加入购物车成功",type:"success"})}).catch(t=>t)},async isCollect(t){await Object(d["c"])({goods_id:t.goods_id}).then(e=>{this.whetherCollection=e.data,0==this.whetherCollection?t.isCollection=!1:t.isCollection=!0}).catch(t=>t)},async editCollection(t){await this.isCollect(t);const{goods_id:e,sku_id:i,site_id:s,sku_name:a,sku_price:r,sku_image:n}=t;0==this.whetherCollection?await Object(d["a"])({goods_id:e,sku_id:i,site_id:s,sku_name:a,sku_price:r,sku_image:n}).then(e=>{this.$message({message:"收藏成功",type:"success"}),t.isCollection=!0}).catch(t=>t):await Object(d["b"])({goods_id:e}).then(e=>{e.data>0&&(this.$message({message:"取消收藏成功",type:"success"}),t.isCollection=!1)}).catch(t=>t)},getGoodsList(){const t=[];this.attributeList&&this.attributeList.forEach(e=>{e.child&&e.child.forEach(i=>{i.selected&&t.push({attr_id:e.attr_id,attr_value_id:i.attr_value_id})})});const e={page:this.currentPage,page_size:this.pageSize,site_id:this.filters.siteId,keyword:this.keyword,attr:t.length>0?JSON.stringify(t):"",...this.filters};Object(o["h"])(e||{}).then(t=>{const{count:e,page_count:i,list:s}=t.data;this.total=e,this.cargoList=s,this.loading=!1}).catch(t=>{this.loading=!1})},getRelevanceinfo(){const t={category_id:this.filters.category_id,category_level:this.filters.category_level};Object(l["c"])(t).then(t=>{const{brand_list:e,attribute_list:i,brand_initial_list:s}=t.data;this.brandList=e,this.attributeList=i,this.brandInitialList=s}).catch(t=>t)},onChooseBrand(t){this.choosedBrand=t,this.filters.brand_id=t.id,this.getGoodsList()},setMuiltChoose(t){this.$set(t,"isMuiltSelect",!t.isMuiltSelect),this.getGoodsList()},setAttrSelected(t,e){t.child&&t.child.forEach(t=>{this.$set(t,"selected",!1)}),this.$set(e,"selected",!0),this.$set(t,"selectedValue",e.attr_value_name),this.getGoodsList()},setAttrSelectedMuilt(t,e){this.$set(e,"selected",!e.selected);var i=[];if(e.selected){const s=t.selectedValue||"";i=s.split(","),""==i[0]&&i.pop(0),-1==i.indexOf(e.attr_value_name)&&i.push(e.attr_value_name)}else{const s=t.selectedValue||"";i=s.split(","),""==i[0]&&i.pop(0),-1!==i.indexOf(e.attr_value_name)&&i.splice(i.indexOf(e.attr_value_name),1)}this.$set(t,"selectedValue",i.toString()),this.getGoodsList()},colseBrand(){this.choosedBrand="",this.filters.brand_id="",this.getGoodsList()},colseAttr(t){t.selectedValue="",t.child.forEach(t=>{t.selected=!1}),t.isMuiltSelect=!1,this.getGoodsList()},handlePageSizeChange(t){this.pageSize=t,this.getGoodsList()},handleCurrentPageChange(t){this.currentPage=t,this.getGoodsList()},handlePriceRange(){this.getGoodsList()},handleChangeInitial(t){this.currentInitial=t},changeSort(t){this.filters.order===t?this.$set(this.filters,"sort","desc"===this.filters.sort?"asc":"desc"):(this.$set(this.filters,"order",t),this.$set(this.filters,"sort","desc")),this.getGoodsList()}},watch:{is_free_shipping:function(t){this.filters.is_free_shipping=t?1:"",this.getGoodsList()},is_own:function(t){this.filters.is_own=t?1:"",this.getGoodsList()},$route:function(t){void 0==t.query.category_id&&(this.catewords="",this.currentPage=1,this.keyword=t.query.keyword,this.filters.category_id=t.query.category_id||"",this.filters.category_level=t.query.level||"",this.filters.brand_id=t.query.brand_id||"",this.getGoodsList())}}},h={name:"list",components:{BreadCrumbs:r["a"],GoodsRecommend:n["a"]},data:()=>({}),mixins:[u],created(){},methods:{}},p=h,_=(i("ae91"),i("2877")),f=Object(_["a"])(p,s,a,!1,null,"d432a018",null);e["default"]=f.exports},a63f:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-recommend"},[e("h4",[t._v("商品精选")]),t.list.length?e("ul",t._l(t.list,(function(i,s){return e("li",{key:s,on:{click:function(e){return t.$router.pushToTab({path:"/sku-"+i.sku_id})}}},[e("div",{staticClass:"img-wrap"},[e("img",{attrs:{src:t.$img(i["sku_image"],{size:"mid"})},on:{error:function(e){return t.imageError(s)}}})]),e("div",{staticClass:"price"},[t._v("￥"+t._s(i.discount_price))]),e("p",{staticClass:"sku-name"},[t._v(t._s(i.goods_name))]),e("div",{staticClass:"info-wrap"})])})),0):t._e()])},a=[],r=i("2f62"),n=i("a2a9"),o={name:"goods_recommend",props:{page:{type:[Number,String],default:1},pageSize:{type:[Number,String],default:5}},data:()=>({loading:!0,list:[]}),created(){this.getGoodsRecommend()},computed:{...Object(r["b"])(["defaultGoodsImage"])},methods:{getGoodsRecommend(){Object(n["e"])({page:this.page,page_size:this.pageSize}).then(t=>{0==t.code&&(this.list=t.data.list),this.loading=!1}).catch(t=>{this.loading=!1})},imageError(t){this.list[t].sku_image=this.defaultGoodsImage}}},c=o,l=(i("b236"),i("2877")),d=Object(l["a"])(c,s,a,!1,null,"427ce1a4",null);e["a"]=d.exports},ae91:function(t,e,i){"use strict";i("ce97")},b236:function(t,e,i){"use strict";i("c66b")},c66b:function(t,e,i){},ce97:function(t,e,i){},d6d5:function(t,e,i){"use strict";i("f423")},f423:function(t,e,i){},f4238:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[e("transition-group",{attrs:{name:"breadcrumb"}},[t._l(t.levelList,(function(i,s){return e("el-breadcrumb-item",{key:i.path},[0==s?e("span",[e("i",{staticClass:"el-icon-s-home"})]):t._e(),"noRedirect"===i.redirect||s==t.levelList.length-1?e("span",{staticClass:"no-redirect"},[t._v(t._s(i.meta.title))]):e("a",{on:{click:function(e){return e.preventDefault(),t.handleLink(i)}}},[t._v(t._s(i.meta.title))])])})),t.hasExtItem?e("el-breadcrumb-item",{key:"ext_item"},[t._t("ext_item")],2):t._e()],2)],1)},a=[];i("14d9");function r(t){var e=[],i=0;while(i<t.length){var s=t[i];if("*"!==s&&"+"!==s&&"?"!==s)if("\\"!==s)if("{"!==s)if("}"!==s)if(":"!==s)if("("!==s)e.push({type:"CHAR",index:i,value:t[i++]});else{var a=1,r="";o=i+1;if("?"===t[o])throw new TypeError('Pattern cannot start with "?" at '.concat(o));while(o<t.length)if("\\"!==t[o]){if(")"===t[o]){if(a--,0===a){o++;break}}else if("("===t[o]&&(a++,"?"!==t[o+1]))throw new TypeError("Capturing groups are not allowed at ".concat(o));r+=t[o++]}else r+=t[o++]+t[o++];if(a)throw new TypeError("Unbalanced pattern at ".concat(i));if(!r)throw new TypeError("Missing pattern at ".concat(i));e.push({type:"PATTERN",index:i,value:r}),i=o}else{var n="",o=i+1;while(o<t.length){var c=t.charCodeAt(o);if(!(c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||95===c))break;n+=t[o++]}if(!n)throw new TypeError("Missing parameter name at ".concat(i));e.push({type:"NAME",index:i,value:n}),i=o}else e.push({type:"CLOSE",index:i,value:t[i++]});else e.push({type:"OPEN",index:i,value:t[i++]});else e.push({type:"ESCAPED_CHAR",index:i++,value:t[i++]});else e.push({type:"MODIFIER",index:i,value:t[i++]})}return e.push({type:"END",index:i,value:""}),e}function n(t,e){void 0===e&&(e={});var i=r(t),s=e.prefixes,a=void 0===s?"./":s,n="[^".concat(l(e.delimiter||"/#?"),"]+?"),o=[],c=0,d=0,u="",h=function(t){if(d<i.length&&i[d].type===t)return i[d++].value},p=function(t){var e=h(t);if(void 0!==e)return e;var s=i[d],a=s.type,r=s.index;throw new TypeError("Unexpected ".concat(a," at ").concat(r,", expected ").concat(t))},_=function(){var t,e="";while(t=h("CHAR")||h("ESCAPED_CHAR"))e+=t;return e};while(d<i.length){var f=h("CHAR"),g=h("NAME"),m=h("PATTERN");if(g||m){var v=f||"";-1===a.indexOf(v)&&(u+=v,v=""),u&&(o.push(u),u=""),o.push({name:g||c++,prefix:v,suffix:"",pattern:m||n,modifier:h("MODIFIER")||""})}else{var b=f||h("ESCAPED_CHAR");if(b)u+=b;else{u&&(o.push(u),u="");var C=h("OPEN");if(C){v=_();var y=h("NAME")||"",w=h("PATTERN")||"",k=_();p("CLOSE"),o.push({name:y||(w?c++:""),pattern:y&&!w?n:w,prefix:v,suffix:k,modifier:h("MODIFIER")||""})}else p("END")}}}return o}function o(t,e){return c(n(t,e),e)}function c(t,e){void 0===e&&(e={});var i=d(e),s=e.encode,a=void 0===s?function(t){return t}:s,r=e.validate,n=void 0===r||r,o=t.map((function(t){if("object"===typeof t)return new RegExp("^(?:".concat(t.pattern,")$"),i)}));return function(e){for(var i="",s=0;s<t.length;s++){var r=t[s];if("string"!==typeof r){var c=e?e[r.name]:void 0,l="?"===r.modifier||"*"===r.modifier,d="*"===r.modifier||"+"===r.modifier;if(Array.isArray(c)){if(!d)throw new TypeError('Expected "'.concat(r.name,'" to not repeat, but got an array'));if(0===c.length){if(l)continue;throw new TypeError('Expected "'.concat(r.name,'" to not be empty'))}for(var u=0;u<c.length;u++){var h=a(c[u],r);if(n&&!o[s].test(h))throw new TypeError('Expected all "'.concat(r.name,'" to match "').concat(r.pattern,'", but got "').concat(h,'"'));i+=r.prefix+h+r.suffix}}else if("string"!==typeof c&&"number"!==typeof c){if(!l){var p=d?"an array":"a string";throw new TypeError('Expected "'.concat(r.name,'" to be ').concat(p))}}else{h=a(String(c),r);if(n&&!o[s].test(h))throw new TypeError('Expected "'.concat(r.name,'" to match "').concat(r.pattern,'", but got "').concat(h,'"'));i+=r.prefix+h+r.suffix}}else i+=r}return i}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function d(t){return t&&t.sensitive?"":"i"}var u={props:{hasExtItem:!1},data(){return{levelList:null}},watch:{$route(){this.getBreadcrumb()}},created(){this.getBreadcrumb()},methods:{getBreadcrumb(){let t=this.$route.matched.filter(t=>t.meta&&t.meta.title);const e=t[0];this.isHome(e)||(t=[{path:"/index",meta:{title:"首页"}}].concat(t)),this.levelList=t.filter(t=>t.meta&&t.meta.title&&!1!==t.meta.breadcrumb)},isHome(t){const e=t&&t.name;return!!e&&e.trim().toLocaleLowerCase()==="index".toLocaleLowerCase()},pathCompile(t){const{params:e}=this.$route;var i=o(t);return i(e)},handleLink(t){const{redirect:e,path:i}=t;e?this.$router.push(e):this.$router.push(this.pathCompile(i))}}},h=u,p=(i("d6d5"),i("2877")),_=Object(p["a"])(h,s,a,!1,null,"a18e9fe4",null);e["a"]=_.exports}}]);
//# sourceMappingURL=chunk-5bb12ada.8e46303f.js.map