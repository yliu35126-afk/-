(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de6666f8"],{"08db":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-list"},[e("div",{staticClass:"shop-left"},[e("div",{staticClass:"shop-wrap"},[e("div",{staticClass:"head-wrap"},[e("div",{staticClass:"img-wrap"},[e("img",{staticClass:"img-responsive center-block",attrs:{src:t.shopInfo.avatar?t.$img(t.shopInfo.avatar):t.$img(t.defaultShopImage),alt:t.shopInfo.site_name},on:{error:function(e){t.shopInfo.avatar=t.defaultShopImage}}})]),e("h5",[e("span",{staticClass:"ns-text-color"},[t._v(t._s(t.shopInfo.site_name))]),1==t.shopInfo.is_own?e("el-tag",{staticClass:"tag",attrs:{size:"small"}},[t._v("自营")]):t._e()],1)]),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"item"},[t._v(" 描述相符 "),e("b",[t._v(t._s(t.shopInfo.shop_desccredit))]),t._v("分 ")]),e("div",{staticClass:"item"},[t._v(" 服务态度 "),e("b",[t._v(t._s(t.shopInfo.shop_servicecredit))]),t._v("分 ")]),e("div",{staticClass:"item"},[t._v(" 发货速度 "),e("b",[t._v(t._s(t.shopInfo.shop_deliverycredit))]),t._v("分 ")])]),e("div",{staticClass:"other-info"},[t.shopInfo.telephone?e("div",{staticClass:"tell"},[e("div",{staticClass:"tell-name"},[t._v("电话:")]),e("div",{staticClass:"tell-detail"},[t._v(t._s(t.shopInfo.telephone))])]):t._e(),t.shopInfo.full_address?e("div",{staticClass:"item-info"},[e("div",{staticClass:"item-name"},[t._v("地址:")]),e("div",{staticClass:"item-detail"},[t._v(t._s(t.shopInfo.full_address)+t._s(t.shopInfo.address))])]):t._e()]),e("div",{staticClass:"operation"},[t.hasFollow?e("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("取消关注")]):e("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("关注店铺")])],1)]),e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索 商品",maxlength:"50",size:"medium",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getGoodsList},slot:"append"})],1),e("div",{staticClass:"shop-goods-cate",class:{border:t.categoryList.length}},t._l(t.categoryList,(function(s){return e("div",{key:s.category_id,staticClass:"item"},[e("div",{staticClass:"menu-name",on:{click:function(e){return t.tabCate(s)}}},[t._v(t._s(s.category_name))]),t._l(s.child_list,(function(s){return e("div",{key:s.category_id,class:t.filters.category_id==s.category_id?"active":"submenu",on:{click:function(e){return t.tabCate(s)}}},[t._v(t._s(s.category_name))])}))],2)})),0)],1),e("div",{staticClass:"shop-right"},[t.keyword?e("div",{staticClass:"search_bread"},[e("span",[t._v("搜索结果:")]),e("span",{staticClass:"keyword"},[t._v("'"+t._s(t.keyword)+"'")])]):t._e(),e("div",[e("div",{staticClass:"sort"},[e("div",{staticClass:"item",on:{click:function(e){return t.changeSort("")}}},[e("div",{staticClass:"item-name"},[t._v("综合")])]),e("div",{staticClass:"item",on:{click:function(e){return t.changeSort("sale_num")}}},[e("div",{staticClass:"item-name"},[t._v("销量")]),"sale_num"===t.filters.order&&"desc"===t.filters.sort?e("i",{staticClass:"el-icon-arrow-down el-icon--down"}):e("i",{staticClass:"el-icon-arrow-up el-icon--up"})]),e("div",{staticClass:"item",on:{click:function(e){return t.changeSort("discount_price")}}},[e("div",{staticClass:"item-name"},[t._v("价格")]),"discount_price"===t.filters.order&&"desc"===t.filters.sort?e("i",{staticClass:"el-icon-arrow-down el-icon--down"}):e("i",{staticClass:"el-icon-arrow-up el-icon--up"})]),e("div",{staticClass:"item-other"},[e("el-checkbox",{attrs:{label:"包邮"},model:{value:t.is_free_shipping,callback:function(e){t.is_free_shipping=e},expression:"is_free_shipping"}})],1),e("div",{staticClass:"input-wrap"},[e("div",{staticClass:"price_range"},[e("el-input",{attrs:{placeholder:"最低价格",size:"small"},model:{value:t.filters.min_price,callback:function(e){t.$set(t.filters,"min_price",e)},expression:"filters.min_price"}}),e("span",[t._v("—")]),e("el-input",{attrs:{placeholder:"最高价格",size:"small"},model:{value:t.filters.max_price,callback:function(e){t.$set(t.filters,"max_price",e)},expression:"filters.max_price"}})],1),e("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.handlePriceRange}},[t._v("确定")])],1)])]),e("div",[t.cateGoodsList.length?e("div",{staticClass:"goods-info"},t._l(t.cateGoodsList,(function(s,i){return e("div",{key:s.goods_id,staticClass:"item",on:{click:function(e){return t.$router.pushToTab({path:"/sku-"+s.sku_id})}}},[e("img",{staticClass:"img-wrap",attrs:{src:t.$img(s.sku_image,{size:"mid"})},on:{error:function(e){return t.imageError(i)}}}),e("div",{staticClass:"price-wrap"},[e("div",{staticClass:"price"},[e("p",[t._v("￥")]),t._v(" "+t._s(s.discount_price)+" ")]),e("div",{staticClass:"market-price"},[t._v("￥"+t._s(s.market_price))])]),e("div",{staticClass:"goods-name"},[t._v(t._s(s.goods_name))]),e("div",{staticClass:"sale-num"},[e("p",[t._v(t._s(s.sale_num||0))]),t._v("人付款 ")]),e("div",{staticClass:"saling"},[1==s.is_free_shipping?e("div",{staticClass:"free-shipping"},[t._v("包邮")]):t._e(),1==s.promotion_type?e("div",{staticClass:"promotion-type"},[t._v("限时折扣")]):t._e()])])})),0):e("div",{staticClass:"empty"},[e("div",{staticClass:"ns-text-align"},[t._v("没有找到您想要的商品。换个条件试试吧")])])]),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)])])])},a=[],o=(s("14d9"),s("8dd4")),r=s("a2a9"),l=s("2f62"),c={data:()=>({cateGoodsList:[],total:0,keyword:"",currentPage:1,pageSize:12,is_free_shipping:0,is_own:"",filters:{site_id:0,category_id:0,min_price:"",max_price:"",order:"",sort:"desc",category_level:""},shopInfo:{},hasFollow:!1,categoryList:[],loading:!0}),created(){this.filters.coupon_type=this.$route.query.coupon_type||0,this.filters.platform_coupon_type=this.$route.query.platform_coupon_type||0,this.keyword=this.$route.query.keyword||"",this.filters.shop_category_id=this.$route.query.shop_category_id,this.filters.category_level=this.$route.query.category_level,this.$route.query.site_id?(this.filters.site_id=this.$route.query.site_id,this.getGoodsList(),this.getShopInfo(),this.getCategoryList(),this.getfollow()):(this.$message.error("缺少店铺id"),this.$router.push("/index"))},watch:{is_free_shipping:function(t){this.filters.is_free_shipping=t?1:"",this.getGoodsList()},$route:function(t){t.fullPath&&(this.filters.site_id=t.query.site_id,this.filters.shop_category_id=t.query.shop_category_id,this.filters.category_level=t.query.category_level,this.getGoodsList()),this.keyword!==t.query.keyword&&(this.currentPage=1,this.keyword=t.query.keyword,this.filters.shop_category_id=t.query.category_id||"",this.getGoodsList())}},computed:{...Object(l["b"])(["token","defaultShopImage","addonIsExit","defaultGoodsImage"])},methods:{tabCate(t){this.$router.push({path:"/shop_list",query:{site_id:this.filters.site_id,shop_category_id:t.category_id,category_level:t.level}}),this.filters.shop_category_id=t.category_id,this.filters.category_level=t.level,this.getGoodsList()},getShopInfo(){Object(o["c"])({site_id:this.filters.site_id}).then(t=>{0==t.code&&(this.shopInfo=t.data)}).catch(t=>{this.$message.error(t.message)})},getfollow(){Object(o["b"])({site_id:this.filters.site_id}).then(t=>{this.hasFollow=t.data}).catch(t=>{})},getCategoryList(){Object(o["d"])({site_id:this.filters.site_id}).then(t=>{this.categoryList=t.data}).catch(t=>{this.$message.error(t.message)})},getIsFollow(){this.hasFollow?Object(o["e"])({site_id:this.filters.site_id}).then(t=>{0==t.code&&t.data&&(this.hasFollow=!this.hasFollow,this.$message({message:"取消关注成功",type:"success"}))}).catch(t=>{"token不存在"==t.message?this.$router.push({path:"/login",query:{redirect:"/shop-"+this.shopInfo.site_id}}):this.$message.error(t.message)}):Object(o["a"])({site_id:this.filters.site_id}).then(t=>{0==t.code&&(this.hasFollow=!this.hasFollow,this.$message({message:"关注成功",type:"success"}))}).catch(t=>{"token不存在"==t.message?this.$router.push({path:"/login",query:{redirect:"/shop-"+this.shopInfo.site_id}}):this.$message.error(t.message)})},getGoodsList(){const t={page:this.currentPage,page_size:this.pageSize,site_id:this.filters.site_id,keyword:this.keyword,category_level:this.filters.category_level,...this.filters};Object(r["h"])(t||{}).then(t=>{const{count:e,page_count:s,list:i}=t.data;this.total=e,this.cateGoodsList=i,this.loading=!1}).catch(t=>{this.loading=!1})},onChooseBrand(t){this.choosedBrand=t,this.filters.brand_id=t.id,this.getGoodsList()},setMuiltChoose(t){this.$set(t,"isMuiltSelect",!t.isMuiltSelect),this.getGoodsList()},setAttrSelected(t,e){t.child&&t.child.forEach(t=>{this.$set(t,"selected",!1)}),this.$set(e,"selected",!0),this.$set(t,"selectedValue",e.attr_value_name),this.getGoodsList()},setAttrSelectedMuilt(t,e){this.$set(e,"selected",!e.selected);var s=[];if(e.selected){const i=t.selectedValue||"";s=i.split(","),""==s[0]&&s.pop(0),-1==s.indexOf(e.attr_value_name)&&s.push(e.attr_value_name)}else{const i=t.selectedValue||"";s=i.split(","),""==s[0]&&s.pop(0),-1!==s.indexOf(e.attr_value_name)&&s.splice(s.indexOf(e.attr_value_name),1)}this.$set(t,"selectedValue",s.toString()),this.getGoodsList()},colseBrand(){this.choosedBrand="",this.filters.brand_id="",this.getGoodsList()},colseAttr(t){t.selectedValue="",t.child.forEach(t=>{this.$set(t,"selected",!1)}),this.getGoodsList()},handlePageSizeChange(t){this.pageSize=t,this.getGoodsList()},handleCurrentPageChange(t){this.currentPage=t,this.getGoodsList()},handlePriceRange(){this.getGoodsList()},handleChangeInitial(t){this.currentInitial=t},changeSort(t){this.filters.order===t?this.$set(this.filters,"sort","desc"===this.filters.sort?"asc":"desc"):(this.$set(this.filters,"order",t),this.$set(this.filters,"sort","desc")),this.getGoodsList()},imageError(t){this.cateGoodsList[t].sku_image=this.defaultGoodsImage}}},n={name:"shop_list",mixins:[c]},d=n,h=(s("59e4"),s("2877")),_=Object(h["a"])(d,i,a,!1,null,"435d2384",null);e["default"]=_.exports},"59e4":function(t,e,s){"use strict";s("650e")},"650e":function(t,e,s){}}]);
//# sourceMappingURL=chunk-de6666f8.540ef25b.js.map