(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1260ea98"],{"2a28":function(t,e,a){"use strict";a("716a")},"44f1":function(t,e,a){"use strict";a("8654")},"716a":function(t,e,a){},8654:function(t,e,a){},b978:function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return u})),a.d(e,"d",(function(){return d}));var i=a("751a");function s(t){return Object(i["a"])({url:"/groupbuy/api/ordercreate/payment",data:t,forceLogin:!0})}function n(t){return Object(i["a"])({url:"/groupbuy/api/ordercreate/calculate",data:t,forceLogin:!0})}function r(t){return Object(i["a"])({url:"/groupbuy/api/ordercreate/create",data:t,forceLogin:!0})}function o(t){return Object(i["a"])({url:"/groupbuy/api/goods/page",data:t,forceLogin:!0})}function u(t){return Object(i["a"])({url:"/groupbuy/api/goods/detail",data:t,forceLogin:!0})}function d(t){return Object(i["a"])({url:"/groupbuy/api/goods/info",data:t,forceLogin:!0})}},d3d0:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ns-groupbuy"},[e("el-carousel",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAd,expression:"loadingAd"}],attrs:{height:"400px"}},t._l(t.adList,(function(a){return e("el-carousel-item",{key:a.adv_id},[e("el-image",{attrs:{src:t.$img(a.adv_image),fit:"cover"},on:{click:function(e){return t.$router.pushToTab(a.adv_url.url)}}})],1)})),1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ns-groupbuy-box"},[t.goodsList.length?e("div",{staticClass:"ns-groupbuy-title"},[e("i",{staticClass:"iconfont icontuangou"}),e("span",[t._v("团购进行中")])]):t._e(),t.goodsList.length?e("div",{staticClass:"goods-list"},t._l(t.goodsList,(function(a){return e("div",{key:a.id,staticClass:"item"},[e("div",{staticClass:"goods",on:{click:function(e){return t.$router.pushToTab("/promotion/groupbuy-"+a.groupbuy_id)}}},[e("div",{staticClass:"img"},[e("el-image",{attrs:{fit:"scale-down",src:t.$img(a.sku_image,{size:"mid"}),lazy:""},on:{error:function(e){return t.imageError(t.index)}}})],1),e("div",{staticClass:"name"},[e("p",{attrs:{title:a.goods_name}},[t._v(t._s(a.goods_name))])]),e("div",{staticClass:"price"},[e("div",[e("p",[e("span",[t._v("团购价")]),e("span",[t._v("￥")]),e("span",{staticClass:"main_price"},[t._v(t._s(a.groupbuy_price))])]),e("span",{staticClass:"primary_price"},[t._v("￥"+t._s(a.price))])])])])])})),0):e("div",[e("div",{staticClass:"ns-text-align"},[t._v("暂无正在进行团购的商品，去首页看看吧")])]),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)])],1)},s=[],n=(a("14d9"),a("b978")),r=a("2f62"),o=a("37cb"),u={name:"groupbuy",components:{},data:()=>({loading:!0,goodsList:[],total:0,currentPage:1,pageSize:10,loadingAd:!0,adList:[]}),created(){this.addonIsExit&&1!=this.addonIsExit.groupbuy?this.$message({message:"团购插件未安装",type:"warning",duration:2e3,onClose:()=>{this.$route.push("/")}}):(this.getAdList(),this.getGoodsList())},computed:{...Object(r["b"])(["defaultGoodsImage","addonIsExit"])},watch:{addonIsExit(){1!=this.addonIsExit.groupbuy&&this.$message({message:"团购插件未安装",type:"warning",duration:2e3,onClose:()=>{this.$route.push("/")}})}},methods:{getAdList(){Object(o["a"])({keyword:"NS_PC_GROUPBUY"}).then(t=>{this.adList=t.data.adv_list;for(let e=0;e<this.adList.length;e++)this.adList[e].adv_url&&(this.adList[e].adv_url=JSON.parse(this.adList[e].adv_url));this.loadingAd=!1}).catch(t=>{this.loadingAd=!1})},getGoodsList(){Object(n["b"])({page_size:this.pageSize,page:this.currentPage}).then(t=>{this.goodsList=t.data.list,this.total=t.data.count,this.loading=!1}).catch(t=>{this.loading=!1,this.$message.error(t.message)})},handlePageSizeChange(t){this.pageSize=t,this.refresh()},handleCurrentPageChange(t){this.currentPage=t,this.refresh()},refresh(){this.loading=!0,this.getGoodsList()},imageError(t){this.goodsList[t].sku_image=this.defaultGoodsImage}}},d=u,g=(a("44f1"),a("2a28"),a("2877")),c=Object(g["a"])(d,i,s,!1,null,"268f40d3",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-1260ea98.301fb021.js.map