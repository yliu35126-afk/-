(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58d4c80c"],{c8a0:function(t,a,e){},c974:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.yes,expression:"yes"}],staticClass:"null-page"}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.complainData.complain_info&&"apply"!=t.action?a("div",[a("div",{staticClass:"item-block"},[a("div",{staticClass:"block-text"},[t._v(t._s(t.detail.complain_status_name))])]),a("div",{staticClass:"item-block"},[a("div",{staticClass:"action-box"},[a("span",{staticClass:"media-left"},[t._v("协商记录")]),a("div",{staticClass:"media-right"},[a("div",{staticClass:"el-button--text",on:{click:function(a){t.actionOpen?t.actionOpen=!1:t.actionOpen=!0}}},[t._v(" 协商记录 "),a("i",{staticClass:"el-icon-arrow-down",class:t.actionOpen?"rotate":""})])]),a("div",{staticClass:"clear"})]),t.actionOpen?a("div",[a("el-timeline",t._l(t.detail.refund_log_list,(function(e,i){return a("el-timeline-item",{key:i,class:{buyer:1==e.action_way,seller:2==e.action_way,platform:3==e.action_way},attrs:{timestamp:t.$util.timeStampTurnTime(e.action_time),placement:"top"}},[a("div",[1==e.action_way?a("h4",[t._v("买家")]):2==e.action_way?a("h4",[t._v("卖家")]):3==e.action_way?a("h4",[t._v("平台")]):t._e(),a("p",[t._v(t._s(e.action))])])])})),1)],1):t._e()]),t._m(0),a("div",{staticClass:"item-block"},[a("div",{staticClass:"goods-list"},[a("table",[a("tr",[a("td",{attrs:{width:"62.5%"}},[a("div",{staticClass:"goods-info"},[a("div",{staticClass:"goods-info-left"},[a("router-link",{attrs:{to:{path:"/sku-"+t.detail.sku_id},target:"_blank"}},[a("img",{staticClass:"goods-img",attrs:{src:t.$img(t.detail.sku_image,{size:"mid"})},on:{error:function(a){t.detail.sku_image=t.defaultGoodsImage}}})])],1),a("div",{staticClass:"goods-info-right"},[a("router-link",{attrs:{to:{path:"/sku-"+t.detail.sku_id},target:"_blank"}},[a("div",{staticClass:"goods-name"},[t._v(t._s(t.detail.sku_name))])])],1)])]),a("td",{staticClass:"goods-num",attrs:{width:"12.5%"}},[t._v(t._s(t.detail.num))]),a("td",{staticClass:"goods-money",attrs:{width:"12.5%"}},[t._v("￥"+t._s(t.detail.complain_apply_money))])])])])]),a("div",{staticClass:"item-block"},[a("div",{staticClass:"order-statistics"},[a("table",[a("tr",[a("td",{attrs:{align:"right"}},[t._v("退款原因：")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.detail.complainReason))])]),a("tr",[a("td",{attrs:{align:"right"}},[t._v("退款金额：")]),a("td",{attrs:{align:"left"}},[t._v("￥"+t._s(t.detail.complain_apply_money))])]),a("tr",[a("td",{attrs:{align:"right"}},[t._v("退款编号：")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.detail.complain_no))])]),a("tr",[a("td",{attrs:{align:"right"}},[t._v("申请时间：")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.$util.timeStampTurnTime(t.detail.complain_apply_time)))])]),t.detail.complain_time?a("tr",[a("td",{attrs:{align:"right"}},[t._v("退款时间：")]),a("td",{attrs:{align:"left"}},[t._v(t._s(t.$util.timeStampTurnTime(t.detail.complain_time)))])]):t._e()])]),a("div",{staticClass:"clear"})]),t.detail.complain_action.length?a("div",{staticClass:"item-block"},[t._l(t.detail.complain_action,(function(e,i){return a("div",{key:i,staticClass:"order-submit"},[a("el-button",{staticClass:"el-button--primary",attrs:{type:"primary"},on:{click:function(a){return t.refundAction(e.event)}}},[t._v(t._s(e.title))])],1)})),a("div",{staticClass:"clear"})],2):t._e()]):a("div",[a("el-card",{staticClass:"box-card order-list"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/member/activist"}}},[t._v("退款/售后")]),a("el-breadcrumb-item",{attrs:{to:{path:"/member/refund_detail?order_goods_id="+t.orderGoodsId}}},[t._v("退款详情")]),a("el-breadcrumb-item",[t._v("平台维权")])],1)],1),a("div",[a("div",{staticClass:"goods-list"},[a("table",[a("tr",[a("td",{attrs:{width:"62.5%"}},[t._v("商品")]),a("td",{attrs:{width:"12.5%"}},[t._v("数量")]),a("td",{attrs:{width:"12.5%"}},[t._v("金额")])])])])]),a("div",[a("div",{staticClass:"goods-list"},[a("table",[a("tr",[a("td",{attrs:{width:"62.5%"}},[a("div",{staticClass:"goods-info"},[a("div",{staticClass:"goods-info-left"},[a("router-link",{attrs:{to:{path:"/sku-"+t.complainData.order_goods_info.sku_id},target:"_blank"}},[a("img",{staticClass:"goods-img",attrs:{src:t.$img(t.complainData.order_goods_info.sku_image,{size:"mid"})},on:{error:function(a){t.complainData.order_goods_info.sku_image=t.defaultGoodsImage}}})])],1),a("div",{staticClass:"goods-info-right"},[a("router-link",{attrs:{to:{path:"/sku-"+t.complainData.order_goods_info.sku_id},target:"_blank"}},[a("div",{staticClass:"goods-name"},[t._v(t._s(t.complainData.order_goods_info.sku_name))])])],1)])]),a("td",{staticClass:"goods-num",attrs:{width:"12.5%"}},[t._v(t._s(t.complainData.order_goods_info.num))]),a("td",{staticClass:"goods-money",attrs:{width:"12.5%"}},[t._v("￥"+t._s(t.complainData.order_goods_info.goods_money))])])])])])]),a("div",{staticClass:"item-block"},[a("div",{staticClass:"block-text"}),a("el-form",{ref:"form",staticClass:"refund-form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"退款金额"}},[a("el-input",{attrs:{disabled:"",value:t.complainData.refund_money}})],1),a("el-form-item",{attrs:{label:"退款原因"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.complainReason,callback:function(a){t.complainReason=a},expression:"complainReason"}},t._l(t.complainData.refund_reason_type,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"退款说明"}},[a("el-input",{attrs:{maxlength:"140","show-word-limit":"",resize:"none",rows:"5",placeholder:"请输入退款说明（选填）",type:"textarea"},model:{value:t.complainRemark,callback:function(a){t.complainRemark=a},expression:"complainRemark"}})],1)],1)],1),a("div",{staticClass:"item-block"},[a("div",{staticClass:"order-submit"},[a("el-button",{staticClass:"el-button--primary",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1),a("div",{staticClass:"clear"})])],1)])])},s=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"item-block"},[a("div",{staticClass:"goods-list"},[a("table",[a("tr",[a("td",{attrs:{width:"62.5%"}},[t._v("商品")]),a("td",{attrs:{width:"12.5%"}},[t._v("数量")]),a("td",{attrs:{width:"12.5%"}},[t._v("退款金额")])])])])])}],o=(e("14d9"),e("2f62")),r=e("e585"),n={name:"refund",components:{},data:()=>({orderGoodsId:0,complainData:{order_goods_info:{sku_image:"",sku_name:""}},detail:{sku_image:""},complainReason:"",complainRemark:"",action:"",actionOpen:!1,loading:!1,yes:!0}),created(){this.loading=!0,this.$route.query.order_goods_id&&(this.orderGoodsId=this.$route.query.order_goods_id),this.getComplainData()},mounted(){let t=this;setTimeout((function(){t.yes=!1}),300)},computed:{...Object(o["b"])(["defaultGoodsImage"])},methods:{selectRefundType(t){this.refund_type=t},getComplainData(){this.loading=!0,Object(r["d"])({order_goods_id:this.orderGoodsId}).then(t=>{const{code:a,message:e,data:i}=t;a>=0?(this.complainData=t.data,this.detail=this.complainData.complain_info,this.loading=!1):this.$message({message:"未获取到该订单项退款信息",type:"warning",duration:2e3,onClose:()=>{this.$router.push({path:"/member/order_list"})}})}).catch(t=>{this.loading=!1,this.$message.error({message:t.message,duration:2e3,onClose:()=>{this.$router.push({path:"/member/order_list"})}})})},submit(){if(this.verify()){if(this.isSub)return;this.isSub=!0;let t={order_goods_id:this.orderGoodsId,complain_reason:this.complainReason,complain_remark:this.complainRemark};Object(r["b"])(t).then(t=>{const{code:a,message:e,data:i}=t;a>=0?(this.$message({message:e,type:"success"}),this.getComplainData(),this.$forceUpdate(),this.action=""):(this.isSub=!1,this.$message({message:e,type:"warning"}))}).catch(t=>{this.$message.error({message:t.message,duration:2e3,onClose:()=>{this.$router.push({path:"/member/order_list"})}})})}},verify(){return""!=this.complainReason||(this.$message({message:"请选择退款原因",type:"warning"}),!1)},refundAction(t){switch(t){case"complainCancel":this.cancleRefund(this.detail.order_goods_id);break;case"complainApply":this.action="apply";break}},cancleRefund(t){this.$confirm("撤销之后本次申请将会关闭,如后续仍有问题可再次发起申请","提示",{confirmButtonText:"确认撤销",cancelButtonText:"暂不撤销",type:"warning"}).then(()=>{this.isSub||(this.isSub=!0,Object(r["c"])({order_goods_id:t}).then(t=>{const{code:a,message:e,data:i}=t;a>=0?this.$message({message:"撤销成功",type:"success",duration:2e3,onClose:()=>{this.$router.push({path:"/member/order_list"})}}):this.$message({message:e,type:"warning"})}).catch(t=>{this.$message.error({message:t.message,duration:2e3,onClose:()=>{this.$router.push({path:"/member/order_list"})}})}))}).catch(()=>{})}}},l=n,d=(e("cfe6"),e("2877")),c=Object(d["a"])(l,i,s,!1,null,"41106deb",null);a["default"]=c.exports},cfe6:function(t,a,e){"use strict";e("c8a0")},e585:function(t,a,e){"use strict";e.d(a,"h",(function(){return s})),e.d(a,"g",(function(){return o})),e.d(a,"f",(function(){return r})),e.d(a,"e",(function(){return n})),e.d(a,"a",(function(){return l})),e.d(a,"d",(function(){return d})),e.d(a,"b",(function(){return c})),e.d(a,"c",(function(){return m})),e.d(a,"i",(function(){return u}));var i=e("751a");function s(t){return Object(i["a"])({url:"/api/orderrefund/refundData",data:t,forceLogin:!0})}function o(t){return Object(i["a"])({url:"/api/orderrefund/refund",data:t,forceLogin:!0})}function r(t){return Object(i["a"])({url:"/api/orderrefund/detail",data:t,forceLogin:!0})}function n(t){return Object(i["a"])({url:"/api/orderrefund/delivery",data:t,forceLogin:!0})}function l(t){return Object(i["a"])({url:"/api/orderrefund/cancel",data:t,forceLogin:!0})}function d(t){return Object(i["a"])({url:"/api/ordercomplain/detail",data:t,forceLogin:!0})}function c(t){return Object(i["a"])({url:"/api/ordercomplain/complain",data:t,forceLogin:!0})}function m(t){return Object(i["a"])({url:"/api/ordercomplain/cancel",data:t,forceLogin:!0})}function u(t){return Object(i["a"])({url:"/api/orderrefund/lists",data:t,forceLogin:!0})}}}]);
//# sourceMappingURL=chunk-58d4c80c.20a8ed99.js.map