{"version":3,"sources":["webpack:///./src/api/seckill.js","webpack:///./node_modules/vue2-countdown/index.js","webpack:///./src/views/promotion/seckill/list/index.vue","webpack:///./src/views/promotion/seckill/list/list.js","webpack:///src/views/promotion/seckill/list/index.vue","webpack:///./src/views/promotion/seckill/list/index.vue?4327","webpack:///./src/views/promotion/seckill/list/index.vue?8c58","webpack:///./src/views/promotion/seckill/list/index.vue?307b","webpack:///./src/views/promotion/seckill/list/index.vue?fe19","webpack:///./node_modules/vue2-countdown/lib/vue2-countdown.vue","webpack:///node_modules/vue2-countdown/lib/vue2-countdown.vue","webpack:///./node_modules/vue2-countdown/lib/vue2-countdown.vue?349d","webpack:///./node_modules/vue2-countdown/lib/vue2-countdown.vue?9fa2"],"names":["payment","params","http","url","data","forceLogin","calculate","orderCreate","goodsPage","goodsSkuDetail","timeList","module","exports","render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","loadingAd","expression","attrs","_l","adList","item","key","adv_id","$img","adv_image","on","$event","$router","pushToTab","adv_url","length","changeThumbImg","ref","style","left","thumbPosition","handleSelected","class","seckillId","id","slot","_v","_s","index","_e","isNow","goodsList","seckillName","seckillIndex","isTrue","seckillText","seckillTimeMachine","currentTime","startTime","endTime","countDownS_cb","countDownE_cb","loading","toGoodsDetail","goodsImg","goods_image","imageError","goods_name","seckill_price","price","total","currentPage","pageSize","handlePageSizeChange","handleCurrentPageChange","staticRenderFns","components","CountDown","siteId","moveThumbLeft","moveThumbRight","watch","newName","oldName","console","log","refresh","addonIsExit","seckill","$message","message","type","duration","onClose","$route","push","created","getAdList","getTimeList","computed","num","mapGetters","methods","i","text","warning","tag","_div","$refs","seckillTime","clientWidth","_i","document","querySelector","indexOf","substring","page","position","Math","round","abs","_ul","_left","keyword","then","res","adv_list","JSON","parse","catch","err","time","Date","timestamp","newTimes","getHours","getMinutes","getSeconds","list","forEach","v","k","seckill_start_time","seckill_end_time","parseInt","getTime","getGoodsList","seckill_id","error","page_size","site_id","count","size","imgStr","imgs","split","$util","img","defaultGoodsImage","mixins","component","msTime","show","day","dayTxt","hour","hourTxt","minutes","minutesTxt","seconds","secondsTxt","replace","tipShow","star","end","current","val","oldval","gogogo","props","tipText","String","default","tipTextEnd","Number","endText","secondsFixed","Boolean","mounted","toString","end_message","$set","setTimeout","runTime","start_message","$emit","callFun","timeDistance","floor","toFixed","now","diffPerFunc"],"mappings":"kHAAA,4NAMO,SAASA,EAAQC,GACpB,OAAOC,eAAK,CACRC,IAAK,mCACLC,KAAMH,EACNI,YAAY,IAQb,SAASC,EAAUL,GACtB,OAAOC,eAAK,CACRC,IAAK,qCACLC,KAAMH,EACNI,YAAY,IAQb,SAASE,EAAYN,GACxB,OAAOC,eAAK,CACRC,IAAK,kCACLC,KAAMH,EACNI,YAAY,IAQb,SAASG,EAAUP,GACtB,OAAOC,eAAK,CACRC,IAAK,iCACLC,KAAMH,IAQP,SAASQ,EAAeR,GAC3B,OAAOC,eAAK,CACRC,IAAK,mCACLC,KAAMH,IAQP,SAASS,EAAST,GACrB,OAAOC,eAAK,CACRC,IAAK,6BACLC,KAAMH,M,uBCnEdU,EAAOC,QAAQ,EAAQ,S,4CCAvB,IAAIC,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACG,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOR,EAAIS,UAAWC,WAAW,cAAcC,MAAM,CAAC,OAAS,UAAUX,EAAIY,GAAIZ,EAAIa,QAAQ,SAASC,GAAM,OAAOZ,EAAG,mBAAmB,CAACa,IAAID,EAAKE,QAAQ,CAACd,EAAG,WAAW,CAACS,MAAM,CAAC,IAAMX,EAAIiB,KAAKH,EAAKI,WAAW,IAAM,SAASC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIqB,QAAQC,UAAUR,EAAKS,QAAQlC,UAAU,MAAK,GAAIW,EAAIJ,SAAS4B,OAAS,EAAGtB,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,OAAO,CAACE,YAAY,wCAAwCe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIyB,eAAe,YAAYvB,EAAG,OAAO,CAACE,YAAY,qCAAqCe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIyB,eAAe,YAAYvB,EAAG,MAAM,CAACwB,IAAI,cAActB,YAAY,wBAAwB,CAACF,EAAG,KAAK,CAACE,YAAY,kBAAkBuB,MAAO,CAAEC,KAAM5B,EAAI6B,cAAgB,OAAS7B,EAAIY,GAAIZ,EAAIJ,UAAU,SAASkB,EAAKC,GAAK,OAAOb,EAAG,KAAK,CAACa,IAAIA,EAAIX,YAAY,kBAAkBe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAI8B,eAAef,MAAQ,CAACb,EAAG,MAAM,CAACE,YAAY,SAAS2B,MAAM,CAAE,eAAgB/B,EAAIgC,WAAalB,EAAKmB,IAAKtB,MAAM,CAAC,KAAO,SAASuB,KAAK,SAAS,CAAChC,EAAG,MAAM,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGtB,EAAKR,SAASJ,EAAG,MAAM,CAAEa,EAAMf,EAAIqC,MAAOnC,EAAG,IAAI,CAACF,EAAImC,GAAG,UAAUnC,EAAIsC,KAAMvB,GAAOf,EAAIqC,OAAUvB,EAAKyB,MAAgCvC,EAAIsC,KAA7BpC,EAAG,IAAI,CAACF,EAAImC,GAAG,UAAoBpB,GAAOf,EAAIqC,OAASvB,EAAKyB,MAAOrC,EAAG,IAAI,CAACF,EAAImC,GAAG,SAASnC,EAAIsC,KAAMvB,EAAMf,EAAIqC,MAAOnC,EAAG,IAAI,CAACF,EAAImC,GAAG,SAASnC,EAAIsC,cAAa,SAAStC,EAAIsC,KAAMtC,EAAIJ,SAAS4B,OAAS,GAAKxB,EAAIwC,UAAUhB,OAAS,EAAGtB,EAAG,MAAM,CAACwB,IAAI,eAAetB,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,0BAA0BF,EAAG,OAAO,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAIyC,YAAczC,EAAIyC,YAAc,aAAczC,EAAI0C,cAAgB1C,EAAIqC,OAASrC,EAAI2C,OAAQzC,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACJ,EAAImC,GAAG,IAAInC,EAAIoC,GAAGpC,EAAI4C,aAAa,KAAK1C,EAAG,aAAa,CAACE,YAAY,aAAaO,MAAM,CAAC,YAAcX,EAAI6C,mBAAmBC,YAAY,UAAY9C,EAAI6C,mBAAmBE,UAAU,QAAU/C,EAAI6C,mBAAmBG,QAAQ,OAAS,IAAI,QAAU,IAAI,WAAa,IAAI,WAAa,IAAI7B,GAAG,CAAC,eAAiB,SAASC,GAAQ,OAAOpB,EAAIiD,iBAAiB,aAAe,SAAS7B,GAAQ,OAAOpB,EAAIkD,qBAAqB,GAAGlD,EAAIsC,OAAOpC,EAAG,MAAM,CAACG,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYC,MAAOR,EAAImD,QAASzC,WAAW,aAAa,CAACR,EAAG,MAAM,CAACE,YAAY,cAAcJ,EAAIY,GAAIZ,EAAIwC,WAAW,SAAS1B,EAAKC,GAAK,OAAOb,EAAG,MAAM,CAACa,IAAIA,EAAIX,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIoD,cAActC,EAAKmB,OAAO,EAAEjC,EAAI0C,cAAgB1C,EAAIqC,OAASrC,EAAIJ,SAASI,EAAIqC,OAAOE,MAAOrC,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,WAAW,CAACS,MAAM,CAAC,IAAM,aAAa,IAAMX,EAAIqD,SAASvC,EAAKwC,aAAa,KAAO,IAAInC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIuD,WAAWvD,EAAIqC,YAAY,IAAgMnC,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,IAAI,CAACS,MAAM,CAAC,MAAQG,EAAK0C,aAAa,CAACxD,EAAImC,GAAGnC,EAAIoC,GAAGtB,EAAK0C,iBAAiBtD,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACA,EAAG,IAAI,CAACA,EAAG,OAAO,CAACF,EAAImC,GAAG,SAASjC,EAAG,OAAO,CAACF,EAAImC,GAAG,OAAOjC,EAAG,OAAO,CAACE,YAAY,cAAc,CAACJ,EAAImC,GAAGnC,EAAIoC,GAAGtB,EAAK2C,oBAAoBvD,EAAG,OAAO,CAACE,YAAY,iBAAiB,CAACJ,EAAImC,GAAG,IAAInC,EAAIoC,GAAGtB,EAAK4C,cAAe1D,EAAI0C,cAAgB1C,EAAIqC,OAASrC,EAAIJ,SAASI,EAAIqC,OAAOE,MAAOrC,EAAG,YAAY,CAACF,EAAImC,GAAG,UAAUnC,EAAIsC,MAAM,QAAO,KAAKpC,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,gBAAgB,CAACS,MAAM,CAAC,WAAa,GAAG,cAAc,EAAE,MAAQX,EAAI2D,MAAM,YAAY,MAAM,YAAY,MAAM,eAAe3D,EAAI4D,YAAY,YAAY5D,EAAI6D,SAAS,sBAAsB,IAAI1C,GAAG,CAAC,qBAAqB,SAASC,GAAQpB,EAAI4D,YAAYxC,GAAQ,sBAAsB,SAASA,GAAQpB,EAAI4D,YAAYxC,GAAQ,kBAAkB,SAASA,GAAQpB,EAAI6D,SAASzC,GAAQ,mBAAmB,SAASA,GAAQpB,EAAI6D,SAASzC,GAAQ,cAAcpB,EAAI8D,qBAAqB,iBAAiB9D,EAAI+D,4BAA4B,KAAK/D,EAAIsC,KAAOtC,EAAIJ,UAAaI,EAAIwC,UAAyHxC,EAAIsC,KAAlHpC,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACJ,EAAImC,GAAG,2BAAoC,IAEtxI6B,EAAkB,G,qECGP,GACd1D,KAAM,WACN2D,WAAY,CAAEC,eACd5E,KAAMA,KACE,CACN6D,SAAS,EACTvD,SAAU,GACVoC,UAAW,KACXS,YAAa,KACbC,aAAc,KACdF,UAAW,GACXH,MAAO,KACP8B,OAAQ,EACRR,MAAO,EACPC,YAAa,EACbC,SAAU,GACVpD,WAAW,EACXI,OAAQ,GACRgC,mBAAoB,CACnBC,YAAa,EACbC,UAAW,EACXC,QAAS,GAEVJ,YAAa,SACbf,cAAe,EAEfuC,eAAe,EACfC,gBAAgB,IAGlBC,MAAO,CACNtC,UAAUuC,EAASC,GAClBC,QAAQC,IAAI,yBACZD,QAAQC,IAAIH,GACZE,QAAQC,IAAIF,EAAQ,WAChBD,GAAWA,GAAWC,GACzBvE,KAAK0E,WAGPC,cACiC,GAA5B3E,KAAK2E,YAAYC,SACpB5E,KAAK6E,SAAS,CACbC,QAAS,UACTC,KAAM,UACNC,SAAU,IACVC,QAASA,KACRjF,KAAKkF,OAAOC,KAAK,UAMtBC,UACKpF,KAAK2E,aAA2C,GAA5B3E,KAAK2E,YAAYC,QACxC5E,KAAK6E,SAAS,CACbC,QAAS,UACTC,KAAM,UACNC,SAAU,IACVC,QAASA,KACRjF,KAAKkF,OAAOC,KAAK,SAInBnF,KAAKqF,YACLrF,KAAKsF,gBAGPC,SAAU,CACT7C,SACC,IAAI8C,EAAM,EAIV,OAHIxF,KAAKL,UAAYK,KAAKL,SAASK,KAAKoC,SACvCoD,EAAMxF,KAAKL,SAASK,KAAKoC,OAAOE,OAE1BkD,MAELC,eAAW,CAAC,oBAAqB,iBAErCC,QAAS,CAIR7D,eAAe8D,GACd,IAAIC,EAAO5F,KAAKL,SAASgG,GAAGtF,KACxBsF,EAAI3F,KAAKoC,MACZpC,KAAK6E,SAASgB,QAAQD,EAAM,SAClBD,EAAI3F,KAAKoC,OACnBpC,KAAK6E,SAASgB,QAAQD,EAAM,UAM9BpE,eAAesE,GACd,IAAIC,EAAO/F,KAAKgG,MAAMC,YAAYC,YAC9BC,EAAKC,SAASC,cAAc,oBAAoB3E,MAAMC,KAAK2E,QAAQ,MAC7DF,SAASC,cAAc,oBAAoB3E,MAAMC,KAAK4E,UAAU,EAAGJ,GAE1E,GAAInG,KAAKL,SAAS4B,OAAS,EAAG,OAC9B,IAAIiF,EAAOxG,KAAKL,SAAS4B,OAAS,EAC9BkF,EAAW,IAClB,GAAW,GAARD,EAAWA,EAAOxG,KAAKL,SAAS4B,OAAS,OACpC,GAAY,GAARiF,GAAqB,GAARA,GAAaA,EAAO,EAAG,OAE7C,GAAW,QAAPV,EAC0B,GAAtB9F,KAAK4B,eAAsB8E,KAAKC,MAAM3G,KAAK4B,cAAe,IAAM6E,GAAYA,EAAWC,KAAKE,IAAI5G,KAAK4B,eACrG5B,KAAK4B,eAAiB6E,EAE/BzG,KAAK4B,cAAgB,OAEb,GAAW,QAAPkE,GAEHY,KAAKC,MAAM3G,KAAK4B,cAAe,KAAO8E,KAAKC,MAAMF,EAAWD,EAAM,GAAI,CAE/E,IAAIK,EAAM7G,KAAKL,SAAS4B,OAASkF,EAC7BK,EAAQD,EAAMd,EACdW,KAAKE,IAAI5G,KAAK4B,eAAiBkF,GAAS,EAC3C9G,KAAK4B,eAAiBkF,EACZJ,KAAKE,IAAI5G,KAAK4B,eAAiBkF,GAAS,IAClD9G,KAAK4B,eAAiB6E,EAEtBzG,KAAK4B,eAAiBkF,IAM1B9D,kBACAC,gBACCjD,KAAK2C,YAAc,SAEpB0C,YACCzE,eAAO,CAAEmG,QAAS,kBAChBC,KAAKC,IACLjH,KAAKY,OAASqG,EAAI5H,KAAK6H,SACvB,IAAK,IAAIvB,EAAI,EAAGA,EAAI3F,KAAKY,OAAOW,OAAQoE,IACnC3F,KAAKY,OAAO+E,GAAGrE,UAAStB,KAAKY,OAAO+E,GAAGrE,QAAU6F,KAAKC,MAAMpH,KAAKY,OAAO+E,GAAGrE,UAEhFtB,KAAKQ,WAAY,IAEjB6G,MAAMC,IACNtH,KAAKQ,WAAY,KAMpB8E,cACC3F,iBACEqH,KAAKC,IACL,IAAI5H,EAAO4H,EAAI5H,KACf,IAAKA,EAAM,OACX,IAAIkI,EAAO,IAAIC,KAAqB,IAAhBP,EAAIQ,WACpBC,EAA6B,GAAlBH,EAAKI,WAAkB,GAAyB,GAApBJ,EAAKK,aAAoBL,EAAKM,aAyBzE,GAxBArD,QAAQC,IAAIpF,EAAK,aACjBA,EAAKyI,KAAKC,QAAQ,CAACC,EAAGC,KACrB,GAAID,EAAEE,oBAAsBR,GAAYA,EAAWM,EAAEG,iBAAkB,CACtEH,EAAE1F,OAAQ,EACVkC,QAAQC,IAAIuD,EAAE,KACdhI,KAAK+B,UAAYiG,EAAEhG,GACnBhC,KAAKwC,YAAcwF,EAAE3H,KACrBL,KAAKoC,MAAQ6F,EACbjI,KAAKyC,aAAewF,EAEpB,IAAIlF,EAAUqF,SAASb,EAAKc,UAAY,MAASL,EAAEG,iBAAmBT,GACtE1H,KAAK4C,mBAAqB,CACzBC,YAAaoE,EAAIQ,UACjB3E,UAAWmE,EAAIQ,UACf1E,QAASA,QAGV/C,KAAKsI,aAAcjJ,EAAKyI,KAAK,GAAG9F,IAChCgG,EAAE1F,OAAQ,IAIZtC,KAAKL,SAAWN,EAAKyI,MAEhB9H,KAAK+B,UACT,IAAK,IAAI4D,EAAI,EAAGA,EAAItG,EAAKyI,KAAKvG,OAAQoE,KACjC+B,EAAWrI,EAAKyI,KAAKnC,GAAGuC,oBAA2B,GAALvC,GAIvC+B,EAAWrI,EAAKyI,KAAKnC,GAAGuC,oBAAsBR,EAAWrI,EAAKyI,KAAKnC,EAAI,GAAGwC,kBAAyB,GAALxC,GAI9FA,GAAKtG,EAAKyI,KAAKvG,OAAS,GAAKmG,EAAWrI,EAAKyI,KAAKnC,GAAGwC,oBAP/DnI,KAAK+B,UAAY1C,EAAKyI,KAAKnC,GAAG4C,WAC9BvI,KAAKoC,MAAQuD,EACb3F,KAAKyC,aAAekD,KAuBvB0B,MAAMC,IACN9C,QAAQC,IAAI6C,EAAI,OAChBtH,KAAK6E,SAAS2D,MAAMlB,EAAIxC,YAM3BwD,aAActG,GACbwC,QAAQC,IAAI,+BACZhF,eAAU,CACTgJ,UAAWzI,KAAK4D,SAChB4C,KAAMxG,KAAK2D,YACX4E,WAAYvG,GAAMhC,KAAK+B,UACvB2G,QAAS1I,KAAKkE,SAEb8C,KAAKC,IACLzC,QAAQC,IAAIwC,EAAI,wBAChBjH,KAAKuC,UAAY0E,EAAI5H,KAAKyI,KAC1B9H,KAAK0D,MAAQuD,EAAI5H,KAAKsJ,MACtB3I,KAAKkD,SAAU,IAEfmE,MAAMC,IACNtH,KAAKkD,SAAU,EACflD,KAAK6E,SAASgB,QAAQyB,EAAIxC,YAM7B3B,cAAcnB,GACb,IAAIuF,EAAO,IAAIC,KACXE,EAA6B,GAAlBH,EAAKI,WAAkB,GAAyB,GAApBJ,EAAKK,aAAoBL,EAAKM,aACrE7H,KAAKL,SAAS,GAAGuI,oBAAsBR,GAAYA,EAAW1H,KAAKL,SAAS,GAAGwI,iBAClFnI,KAAKL,SAAS,GAAG2C,OAAQ,EAEzBtC,KAAKL,SAAS,GAAG2C,OAAQ,EAErBtC,KAAKL,SAAS,GAAG2C,MAItBtC,KAAKoB,QAAQC,UAAU,sBAAwBW,GAH9ChC,KAAK6E,SAASgB,QAAQ,mBAKxBhC,qBAAqB+E,GACpB5I,KAAK4D,SAAWgF,EAChB5I,KAAK0E,WAENZ,wBAAwB0C,GACvBxG,KAAK2D,YAAc6C,EACnBxG,KAAK0E,WAENA,UACC1E,KAAKkD,SAAU,EACflD,KAAKsI,gBAGNlF,SAASyF,GACR,IAAIC,EAAOD,EAAOE,MAAM,KACxB,OAAOD,EAAK,GAAK9I,KAAKgJ,MAAMC,IAAIH,EAAK,GAAI,CAAEF,KAAM,QAAW5I,KAAKkJ,mBAKlE5F,WAAWlB,GACVpC,KAAKuC,UAAUH,GAAOiB,YAAcrD,KAAKkJ,qBCrL5C,GACA7I,KAAA,UACA2D,WAAA,GACAmF,OAAA,CAAArB,ICjG2X,I,kCCSvXsB,EAAY,eACd,EACAtJ,EACAiE,GACA,EACA,KACA,WACA,MAIa,aAAAqF,E,6FCpBf,W,kCCAA,W,yCCAA,IAAItJ,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAAEF,EAAIsJ,OAAOC,KAAMrJ,EAAG,IAAI,CAAEF,EAAIsJ,OAAOE,IAAI,EAAGtJ,EAAG,OAAO,CAACA,EAAG,OAAO,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAIsJ,OAAOE,QAAQtJ,EAAG,IAAI,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAIyJ,aAAazJ,EAAIsC,KAAKpC,EAAG,OAAO,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAIsJ,OAAOI,SAASxJ,EAAG,IAAI,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAI2J,YAAYzJ,EAAG,OAAO,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAIsJ,OAAOM,YAAY1J,EAAG,IAAI,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAI6J,eAAe3J,EAAG,OAAO,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAIsJ,OAAOQ,YAAY5J,EAAG,IAAI,CAACF,EAAImC,GAAGnC,EAAIoC,GAAGpC,EAAI+J,iBAAiB/J,EAAIsC,QAExe0B,EAAkB,GCYtB,GACAgG,SAAA,EACA1K,OACA,OACA2K,SAAA,EACAX,OAAA,CACAC,MAAA,EACAC,IAAA,GACAE,KAAA,GACAE,QAAA,GACAE,QAAA,IAEAI,KAAA,GACAC,IAAA,GACAC,QAAA,KAGA9F,MAAA,CACAxB,YAAA,SAAAuH,EAAAC,GACA,KAAAC,WAGAC,MAAA,CAEAC,QAAA,CACAzF,KAAA0F,OACAC,QAAA,QAGAC,WAAA,CACA5F,KAAA0F,OACAC,QAAA,QAGA1I,GAAA,CACA+C,KAAA0F,OACAC,QAAA,KAGA7H,YAAA,CACAkC,KAAA6F,QAGA9H,UAAA,CACAiC,KAAA6F,QAGA7H,QAAA,CACAgC,KAAA6F,QAGAC,QAAA,CACA9F,KAAA0F,OACAC,QAAA,OAGAlB,OAAA,CACAzE,KAAA0F,OACAC,QAAA,KAGAhB,QAAA,CACA3E,KAAA0F,OACAC,QAAA,KAGAd,WAAA,CACA7E,KAAA0F,OACAC,QAAA,KAEAZ,WAAA,CACA/E,KAAA0F,OACAC,QAAA,KAGAI,aAAA,CACA/F,KAAAgG,QACAL,SAAA,IAGAM,UACAxG,QAAAC,IAAA,MACA,KAAA6F,UAEA5E,QAAA,CACA4E,OAAA,WAEA,SAAAxH,UAAAmI,WAAA1J,OAAA,KAAA0I,KAAA,SAAAnH,UAAA,KAAAmH,KAAA,KAAAnH,UACA,SAAAC,QAAAkI,WAAA1J,OAAA,KAAA2I,IAAA,SAAAnH,QAAA,KAAAmH,IAAA,KAAAnH,QACA,KAAAF,YACA,SAAAA,YAAAoI,WAAA1J,OAAA,KAAA4I,QAAA,SAAAtH,YAAA,KAAAsH,QAAA,KAAAtH,YAEA,KAAAsH,SAAA,IAAA3C,MAAAa,UAGA,KAAA6B,IAAA,KAAAC,SAIA,KAAAd,OAAAC,MAAA,EACA,KAAA4B,eAEA,KAAAf,QAAA,KAAAF,MAIA,KAAAkB,KAAA,mBACAC,WAAA,KACA,KAAAC,QAAA,KAAApB,KAAA,KAAAE,QAAA,KAAAmB,gBACA,KAEA,KAAApB,IAAA,KAAAC,SAAA,KAAAF,KAAA,KAAAE,SAAA,KAAAF,MAAA,KAAAE,WAIA,KAAAgB,KAAA,mBACA,KAAA9B,OAAAC,MAAA,EACA,KAAAiC,MAAA,sBAAAlC,OAAAC,MACA8B,WAAA,KACA,KAAAC,QAAA,KAAAnB,IAAA,KAAAD,KAAA,KAAAiB,aAAA,IACA,KAGAG,QAAAvI,EAAAC,EAAAyI,EAAAzG,GACA,IAAAsE,EAAA,KAAAA,OACAoC,EAAA3I,EAAAC,EACA,GAAA0I,EAAA,GACA,KAAApC,OAAAC,MAAA,EACAD,EAAAE,IAAA7C,KAAAgF,MAAAD,EAAA,OACAA,GAAA,MAAApC,EAAAE,IACAF,EAAAI,KAAA/C,KAAAgF,MAAAD,EAAA,MACAA,GAAA,KAAApC,EAAAI,KACAJ,EAAAM,QAAAjD,KAAAgF,MAAAD,EAAA,KACAA,GAAA,IAAApC,EAAAM,QAGAN,EAAAQ,QAAAnD,KAAAgF,MAAAD,EAAA,KAAAE,QAAA,GACAF,GAAA,IAAApC,EAAAQ,QAEAR,EAAAI,KAAA,KACAJ,EAAAI,KAAA,IAAAJ,EAAAI,MAEAJ,EAAAM,QAAA,KACAN,EAAAM,QAAA,IAAAN,EAAAM,SAEAN,EAAAQ,QAAA,KACAR,EAAAQ,QAAA,IAAAR,EAAAQ,SAEA,IAAA1H,EAAAqF,KAAAoE,MACAvJ,EAAAmF,KAAAoE,MACAC,EAAAxJ,EAAAF,EACAiJ,WAAA,KACArG,EACA,KAAAsG,QAAA,KAAAnB,IAAAnH,GAAA,IAAAyI,GAAA,GAEA,KAAAH,QAAA,KAAApB,KAAAlH,GAAA,IAAAyI,IAEA,IAAAK,QAGAL,KAGAF,gBACA,KAAAH,KAAA,mBACA,KAAAI,MAAA,sBAAAlC,OAAAC,MACA8B,WAAA,KACA,KAAAC,QAAA,KAAAnB,IAAA,KAAAD,KAAA,KAAAiB,aAAA,IACA,IAEAA,cACA,KAAA7B,OAAAC,MAAA,EACA,KAAAzG,aAAA,GAGA,KAAA0I,MAAA,oBAAAlC,OAAAC,SC7LsR,I,YCOlRF,EAAY,eACd,EACAtJ,EACAiE,GACA,EACA,KACA,KACA,MAIa,aAAAqF,E","file":"assets/js/chunk-4c4a4ae4.8dd947c2.js","sourcesContent":["import http from \"../utils/http\"\r\n\r\n/**\r\n * 获取订单初始化数据\r\n * @param {object} params\r\n */\r\nexport function payment(params) {\r\n    return http({\r\n        url: \"/seckill/api/ordercreate/payment\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n\r\n/**\r\n * 获取订单初始化数据\r\n * @param {object} params\r\n */\r\nexport function calculate(params) {\r\n    return http({\r\n        url: \"/seckill/api/ordercreate/calculate\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n\r\n/**\r\n * 订单创建\r\n * @param {object} params\r\n */\r\nexport function orderCreate(params) {\r\n    return http({\r\n        url: \"/seckill/api/ordercreate/create\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n\r\n/**\r\n * 商品列表\r\n * @param {object} params\r\n */\r\nexport function goodsPage(params) {\r\n    return http({\r\n        url: \"/seckill/api/seckillgoods/page\",\r\n        data: params\r\n    })\r\n}\r\n\r\n/**\r\n * 商品详情\r\n * @param {object} params\r\n */\r\nexport function goodsSkuDetail(params) {\r\n    return http({\r\n        url: \"/seckill/api/seckillgoods/detail\",\r\n        data: params\r\n    })\r\n}\r\n\r\n/**\r\n * 秒杀时间段\r\n * @param {object} params\r\n */\r\nexport function timeList(params) {\r\n    return http({\r\n        url: \"/seckill/api/seckill/lists\",\r\n        data: params\r\n    })\r\n}\r\n","module.exports=require('./lib/vue2-countdown.vue')\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ns-seckill\"},[_c('el-carousel',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loadingAd),expression:\"loadingAd\"}],attrs:{\"height\":\"400px\"}},_vm._l((_vm.adList),function(item){return _c('el-carousel-item',{key:item.adv_id},[_c('el-image',{attrs:{\"src\":_vm.$img(item.adv_image),\"fit\":\"cover\"},on:{\"click\":function($event){return _vm.$router.pushToTab(item.adv_url.url)}}})],1)}),1),(_vm.timeList.length > 0)?_c('div',{staticClass:\"ns-seckill-time-wrap\"},[_c('div',{staticClass:\"ns-seckill-time-box\"},[_c('span',{staticClass:\"left-btn iconfont iconarrow-left-copy\",on:{\"click\":function($event){return _vm.changeThumbImg('prev')}}}),_c('span',{staticClass:\"right-btn iconfont iconarrow-right\",on:{\"click\":function($event){return _vm.changeThumbImg('next')}}}),_c('div',{ref:\"seckillTime\",staticClass:\"ns-seckill-time-list\"},[_c('ul',{staticClass:\"seckill-time-ul\",style:({ left: _vm.thumbPosition + 'px' })},_vm._l((_vm.timeList),function(item,key){return _c('li',{key:key,staticClass:\"seckill-time-li\",on:{\"click\":function($event){return _vm.handleSelected(key)}}},[_c('div',{staticClass:\"tab-li\",class:{ 'selected-tab': _vm.seckillId == item.id },attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('div',[_vm._v(_vm._s(item.name))]),_c('div',[(key > _vm.index)?_c('p',[_vm._v(\"敬请期待\")]):_vm._e(),(key == _vm.index && !item.isNow)?_c('p',[_vm._v(\"即将开始\")]):_vm._e(),(key == _vm.index && item.isNow)?_c('p',[_vm._v(\"抢购中\")]):_vm._e(),(key < _vm.index)?_c('p',[_vm._v(\"已结束\")]):_vm._e()])])])}),0)])])]):_vm._e(),(_vm.timeList.length > 0 && _vm.goodsList.length > 0)?_c('div',{ref:\"seckillGoods\",staticClass:\"ns-seckill-box\"},[_c('div',{staticClass:\"ns-seckill-title\"},[_c('div',[_c('i',{staticClass:\"iconfont iconmiaosha1\"}),_c('span',[_vm._v(_vm._s(_vm.seckillName ? _vm.seckillName : '敬请期待'))])]),(_vm.seckillIndex == _vm.index && _vm.isTrue)?_c('div',{staticClass:\"ns-seckill-end\"},[_vm._v(\" \"+_vm._s(_vm.seckillText)+\" \"),_c('count-down',{staticClass:\"count-down\",attrs:{\"currentTime\":_vm.seckillTimeMachine.currentTime,\"startTime\":_vm.seckillTimeMachine.startTime,\"endTime\":_vm.seckillTimeMachine.endTime,\"dayTxt\":'：',\"hourTxt\":'：',\"minutesTxt\":'：',\"secondsTxt\":''},on:{\"start_callback\":function($event){return _vm.countDownS_cb()},\"end_callback\":function($event){return _vm.countDownE_cb()}}})],1):_vm._e()]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('div',{staticClass:\"goods-list\"},_vm._l((_vm.goodsList),function(item,key){return _c('div',{key:key,staticClass:\"item\"},[_c('div',{staticClass:\"goods\",on:{\"click\":function($event){return _vm.toGoodsDetail(item.id)}}},[(_vm.seckillIndex == _vm.index && _vm.timeList[_vm.index].isNow)?_c('div',{staticClass:\"img\"},[_c('el-image',{attrs:{\"fit\":\"scale-down\",\"src\":_vm.goodsImg(item.goods_image),\"lazy\":\"\"},on:{\"error\":function($event){return _vm.imageError(_vm.index)}}})],1):_c('div',{staticClass:\"img\"},[_c('el-image',{attrs:{\"fit\":\"scale-down\",\"src\":_vm.goodsImg(item.goods_image),\"lazy\":\"\"},on:{\"error\":function($event){return _vm.imageError(_vm.index)}}})],1),_c('div',{staticClass:\"name\"},[_c('p',{attrs:{\"title\":item.goods_name}},[_vm._v(_vm._s(item.goods_name))])]),_c('div',{staticClass:\"price\"},[_c('div',[_c('p',[_c('span',[_vm._v(\"秒杀价\")]),_c('span',[_vm._v(\"￥\")]),_c('span',{staticClass:\"main_price\"},[_vm._v(_vm._s(item.seckill_price))])]),_c('span',{staticClass:\"primary_price\"},[_vm._v(\"￥\"+_vm._s(item.price))])])]),(_vm.seckillIndex == _vm.index && _vm.timeList[_vm.index].isNow)?_c('el-button',[_vm._v(\"立即抢购\")]):_vm._e()],1)])}),0)]),_c('div',{staticClass:\"pager\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"pager-count\":5,\"total\":_vm.total,\"prev-text\":\"上一页\",\"next-text\":\"下一页\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"hide-on-single-page\":\"\"},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"update:pageSize\":function($event){_vm.pageSize=$event},\"update:page-size\":function($event){_vm.pageSize=$event},\"size-change\":_vm.handlePageSizeChange,\"current-change\":_vm.handleCurrentPageChange}})],1)]):_vm._e(),(!_vm.timeList || !_vm.goodsList)?_c('div',{staticClass:\"empty-wrap\"},[_c('div',{staticClass:\"ns-text-align\"},[_vm._v(\"暂无正在进行秒杀的商品，去首页看看吧\")])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { goodsPage, timeList } from '@/api/seckill';\r\nimport { mapGetters } from 'vuex';\r\nimport { adList } from '@/api/website';\r\nimport CountDown from 'vue2-countdown';\r\n\r\nexport default {\r\n\tname: 'groupbuy',\r\n\tcomponents: { CountDown },\r\n\tdata: () => {\r\n\t\treturn {\r\n\t\t\tloading: true,\r\n\t\t\ttimeList: [], //时间列表\r\n\t\t\tseckillId: null, //选中的时间块\r\n\t\t\tseckillName: null, //选中的时间块的名称\r\n\t\t\tseckillIndex: null, //选中时间块的index\r\n\t\t\tgoodsList: [], //选中时间块的商品列表\r\n\t\t\tindex: null, //当前正在抢购的index\r\n\t\t\tsiteId: 0,\r\n\t\t\ttotal: 0,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tloadingAd: true,\r\n\t\t\tadList: [],\r\n\t\t\tseckillTimeMachine: {\r\n\t\t\t\tcurrentTime: 0,\r\n\t\t\t\tstartTime: 0,\r\n\t\t\t\tendTime: 0\r\n\t\t\t},\r\n\t\t\tseckillText: '距离结束仅剩',\r\n\t\t\tthumbPosition: 0,\r\n\t\t\t// 是否可以移动\r\n\t\t\tmoveThumbLeft: false,\r\n\t\t\tmoveThumbRight: false,\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tseckillId(newName, oldName) {\r\n\t\t\tconsole.log('dfddddddddddddddddddd')\r\n\t\t\tconsole.log(newName)\r\n\t\t\tconsole.log(oldName,'oldName')\r\n\t\t\tif (newName && newName != oldName) {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t}\r\n\t\t},\r\n\t\taddonIsExit() {\r\n\t\t\tif (this.addonIsExit.seckill != 1) {\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\tmessage: '秒杀插件未安装',\r\n\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\tthis.$route.push('/');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tif (this.addonIsExit && this.addonIsExit.seckill != 1) {\r\n\t\t\tthis.$message({\r\n\t\t\t\tmessage: '秒杀插件未安装',\r\n\t\t\t\ttype: 'warning',\r\n\t\t\t\tduration: 2000,\r\n\t\t\t\tonClose: () => {\r\n\t\t\t\t\tthis.$route.push('/');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.getAdList();\r\n\t\t\tthis.getTimeList();\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tisTrue() {\r\n\t\t\tlet num = 0;\r\n\t\t\tif (this.timeList && this.timeList[this.index]) {\r\n\t\t\t\tnum = this.timeList[this.index].isNow;\r\n\t\t\t}\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\t...mapGetters(['defaultGoodsImage', 'addonIsExit'])\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 点击某个时间段\r\n\t\t */\r\n\t\thandleSelected(i) {\r\n\t\t\tlet text = this.timeList[i].name\r\n\t\t\tif (i < this.index) {\r\n\t\t\t\tthis.$message.warning(text+ '秒杀已结束')\r\n\t\t\t} else if (i > this.index) {\r\n\t\t\t\tthis.$message.warning(text+ '秒杀未开始')\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 点击前后箭头\r\n\t\t */\r\n\t\tchangeThumbImg(tag) {\r\n\t\t\tlet _div = this.$refs.seckillTime.clientWidth;\r\n\t\t\tlet _i = document.querySelector('.seckill-time-ul').style.left.indexOf('px')\r\n\t\t\tlet _li = document.querySelector('.seckill-time-ul').style.left.substring(0, _i)\r\n\t\t\t\r\n\t\t    if (this.timeList.length < 7) return\r\n\t\t    let page = this.timeList.length % 7 // 可见数量7个\r\n\t\t    let position = 150\r\n\t\t\tif(page == 0) page = this.timeList.length - 7 // 可见数量7个\r\n\t\t    else if (page != 0 && page != 1 && page < 2) return\r\n\t\t\t\r\n\t\t    if (tag == \"prev\") {\r\n\t\t        if (this.thumbPosition != 0 && Math.round(this.thumbPosition, 2) != position && position < Math.abs(this.thumbPosition)) {\r\n\t\t            this.thumbPosition += position\r\n\t\t        } else {\r\n\t\t\t\t\tthis.thumbPosition = 0\r\n\t\t        }\r\n\t\t    } else if (tag == \"next\") {\r\n\t\t\t\t\r\n\t\t        if (Math.round(this.thumbPosition, 2) != -Math.round(position * page, 2)) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet _ul = this.timeList.length * position\r\n\t\t\t\t\tlet _left = _ul - _div\r\n\t\t\t\t\tif (Math.abs(this.thumbPosition) - _left >= 0) {\r\n\t\t\t\t\t\tthis.thumbPosition = -_left\r\n\t\t\t\t\t} else if (Math.abs(this.thumbPosition) - _left < -150) {\r\n\t\t\t\t\t\tthis.thumbPosition -= position\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.thumbPosition = -_left\r\n\t\t\t\t\t}\r\n\t\t        } else {\r\n\t\t        }\r\n\t\t    }\r\n\t\t},\r\n\t\tcountDownS_cb() {},\r\n\t\tcountDownE_cb() {\r\n\t\t\tthis.seckillText = '活动已结束';\r\n\t\t},\r\n\t\tgetAdList() {\r\n\t\t\tadList({ keyword: 'NS_PC_SECKILL' })\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.adList = res.data.adv_list;\r\n\t\t\t\t\tfor (let i = 0; i < this.adList.length; i++) {\r\n\t\t\t\t\t\tif (this.adList[i].adv_url) this.adList[i].adv_url = JSON.parse(this.adList[i].adv_url);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loadingAd = false;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.loadingAd = false;\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 秒杀时间段\r\n\t\t */\r\n\t\tgetTimeList() {\r\n\t\t\ttimeList()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (!data) return;\r\n\t\t\t\t\tlet time = new Date(res.timestamp * 1000);\r\n\t\t\t\t\tlet newTimes = time.getHours() * 60 * 60 + time.getMinutes() * 60 + time.getSeconds();\r\n\t\t\t\t\tconsole.log(data,'data.list')\r\n\t\t\t\t\tdata.list.forEach((v, k) => {\r\n\t\t\t\t\t\tif (v.seckill_start_time <= newTimes && newTimes < v.seckill_end_time) {\r\n\t\t\t\t\t\t\tv.isNow = true;\r\n\t\t\t\t\t\t\tconsole.log(v,'v')\r\n\t\t\t\t\t\t\tthis.seckillId = v.id;\r\n\t\t\t\t\t\t\tthis.seckillName = v.name;\r\n\t\t\t\t\t\t\tthis.index = k;\r\n\t\t\t\t\t\t\tthis.seckillIndex = k;\r\n\r\n\t\t\t\t\t\t\tlet endTime = parseInt(time.getTime() / 1000) + (v.seckill_end_time - newTimes);\r\n\t\t\t\t\t\t\tthis.seckillTimeMachine = {\r\n\t\t\t\t\t\t\t\tcurrentTime: res.timestamp,\r\n\t\t\t\t\t\t\t\tstartTime: res.timestamp,\r\n\t\t\t\t\t\t\t\tendTime: endTime\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.getGoodsList( data.list[0].id );\r\n\t\t\t\t\t\t\tv.isNow = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.timeList = data.list;\r\n\r\n\t\t\t\t\tif (!this.seckillId) {\r\n\t\t\t\t\t\tfor (let i = 0; i < data.list.length; i++) {\r\n\t\t\t\t\t\t\tif (newTimes < data.list[i].seckill_start_time && i == 0) {\r\n\t\t\t\t\t\t\t\tthis.seckillId = data.list[i].seckill_id;\r\n\t\t\t\t\t\t\t\tthis.index = i;\r\n\t\t\t\t\t\t\t\tthis.seckillIndex = i;\r\n\t\t\t\t\t\t\t} else if (newTimes < data.list[i].seckill_start_time && newTimes > data.list[i - 1].seckill_end_time && i != 0) {\r\n\t\t\t\t\t\t\t\tthis.seckillId = data.list[i].seckill_id;\r\n\t\t\t\t\t\t\t\tthis.index = i;\r\n\t\t\t\t\t\t\t\tthis.seckillIndex = i;\r\n\t\t\t\t\t\t\t} else if (i == data.list.length - 1 && newTimes > data.list[i].seckill_end_time) {\r\n\t\t\t\t\t\t\t\tthis.seckillId = data.list[i].seckill_id;\r\n\t\t\t\t\t\t\t\tthis.index = i;\r\n\t\t\t\t\t\t\t\tthis.seckillIndex = i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// this.$nextTick(function() {\r\n\t\t\t\t\t// \tif (this.timeList.length > 0) {\r\n\t\t\t\t\t// \t\tlet _div = this.$refs.seckillTime.clientWidth;\r\n\t\t\t\t\t// \t\tlet _li = document.querySelector('.seckill-time-li').clientWidth\r\n\t\t\t\t\t// \t\tlet leftWidth = this.index * _li; // 抢购中的时间段距左边的位置\r\n\t\t\t\t\t// \t\tlet offsetWidth = leftWidth - (_li) * 4; // 需要左偏移的距离\r\n\t\t\t\t\t// \t\tthis.thumbPosition = -offsetWidth\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err,'err')\r\n\t\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 秒杀商品\r\n\t\t */\r\n\t\tgetGoodsList( id ) {\r\n\t\t\tconsole.log('sssssssssssssssssssssssssss')\r\n\t\t\tgoodsPage({\r\n\t\t\t\tpage_size: this.pageSize,\r\n\t\t\t\tpage: this.currentPage,\r\n\t\t\t\tseckill_id: id || this.seckillId,\r\n\t\t\t\tsite_id: this.siteId\r\n\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res,'djfhsdjkfghsdjkgfkhj')\r\n\t\t\t\t\tthis.goodsList = res.data.list;\r\n\t\t\t\t\tthis.total = res.data.count;\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tthis.$message.warning(err.message);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 商品详情\r\n\t\t */\r\n\t\ttoGoodsDetail(id) {\r\n\t\t\tlet time = new Date();\r\n\t\t\tlet newTimes = time.getHours() * 60 * 60 + time.getMinutes() * 60 + time.getSeconds();\r\n\t\t\tif (this.timeList[0].seckill_start_time <= newTimes && newTimes < this.timeList[0].seckill_end_time) {\r\n\t\t\t\tthis.timeList[0].isNow = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.timeList[0].isNow = false;\r\n\t\t\t}\r\n\t\t\tif (!this.timeList[0].isNow) {\r\n\t\t\t\tthis.$message.warning('秒杀活动还未开启，敬请期待！')\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$router.pushToTab('/promotion/seckill-' + id);\r\n\t\t},\r\n\t\thandlePageSizeChange(size) {\r\n\t\t\tthis.pageSize = size;\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\t\thandleCurrentPageChange(page) {\r\n\t\t\tthis.currentPage = page;\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\t\trefresh() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.getGoodsList();\r\n\t\t},\r\n\t\t/* 秒杀图片处理 */\r\n\t\tgoodsImg(imgStr) {\r\n\t\t\tlet imgs = imgStr.split(',');\r\n\t\t\treturn imgs[0] ? this.$util.img(imgs[0], { size: 'mid' }) : this.defaultGoodsImage;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 图片加载失败\r\n\t\t */\r\n\t\timageError(index) {\r\n\t\t\tthis.goodsList[index].goods_image = this.defaultGoodsImage;\r\n\t\t}\r\n\t}\r\n};","<template>\r\n\t<div class=\"ns-seckill\">\r\n\r\n\t\t<el-carousel height=\"400px\" v-loading=\"loadingAd\">\r\n\t\t\t<el-carousel-item v-for=\"item in adList\" :key=\"item.adv_id\">\r\n\t\t\t\t<el-image :src=\"$img(item.adv_image)\" fit=\"cover\" @click=\"$router.pushToTab(item.adv_url.url)\" />\r\n\t\t\t</el-carousel-item>\r\n\t\t</el-carousel>\r\n\t\t\r\n\t\t<div class=\"ns-seckill-time-wrap\" v-if=\"timeList.length > 0\">\r\n\t\t\t<div class=\"ns-seckill-time-box\">\r\n\t\t\t\t<span class=\"left-btn iconfont iconarrow-left-copy\" @click=\"changeThumbImg('prev')\"></span>\r\n\t\t\t\t<span class=\"right-btn iconfont iconarrow-right\" @click=\"changeThumbImg('next')\"></span>\r\n\t\t\t\t<div class=\"ns-seckill-time-list\" ref=\"seckillTime\">\r\n\t\t\t\t\t<ul class=\"seckill-time-ul\" :style=\"{ left: thumbPosition + 'px' }\">\r\n\t\t\t\t\t\t<!-- 商品缩率图 -->\r\n\t\t\t\t\t\t<li class=\"seckill-time-li\" v-for=\"(item, key) in timeList\" :key=\"key\" @click=\"handleSelected(key)\">\r\n\t\t\t\t\t\t\t<div slot=\"label\" class=\"tab-li\" :class=\"{ 'selected-tab': seckillId == item.id }\">\r\n\t\t\t\t\t\t\t\t<div>{{ item.name }}</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"key > index\">敬请期待</p>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"key == index && !item.isNow\">即将开始</p>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"key == index && item.isNow\">抢购中</p>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"key < index\">已结束</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 商品列表 -->\r\n\t\t<div class=\"ns-seckill-box\" ref=\"seckillGoods\" v-if=\"timeList.length > 0 && goodsList.length > 0\">\r\n\t\t\t<div class=\"ns-seckill-title\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<i class=\"iconfont iconmiaosha1\"></i>\r\n\t\t\t\t\t<span>{{ seckillName ? seckillName : '敬请期待' }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"ns-seckill-end\" v-if=\"seckillIndex == index && isTrue\">\r\n\t\t\t\t\t{{ seckillText }}\r\n\t\t\t\t\t<count-down class=\"count-down\" v-on:start_callback=\"countDownS_cb()\" v-on:end_callback=\"countDownE_cb()\"\r\n\t\t\t\t\t :currentTime=\"seckillTimeMachine.currentTime\" :startTime=\"seckillTimeMachine.startTime\" :endTime=\"seckillTimeMachine.endTime\"\r\n\t\t\t\t\t :dayTxt=\"'：'\" :hourTxt=\"'：'\" :minutesTxt=\"'：'\" :secondsTxt=\"''\"></count-down>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div v-loading=\"loading\">\r\n\t\t\t\t<div class=\"goods-list\">\r\n\t\t\t\t\t<div class=\"item\" v-for=\"(item, key) in goodsList\" :key=\"key\">\r\n\t\t\t\t\t\t<div class=\"goods\" @click=\"toGoodsDetail(item.id)\">\r\n\t\t\t\t\t\t\t<div class=\"img\" v-if=\"seckillIndex == index && timeList[index].isNow\">\r\n\t\t\t\t\t\t\t\t<el-image fit=\"scale-down\" :src=\"goodsImg(item.goods_image)\" lazy @error=\"imageError(index)\"></el-image>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"img\" v-else>\r\n\t\t\t\t\t\t\t\t<el-image fit=\"scale-down\" :src=\"goodsImg(item.goods_image)\" lazy @error=\"imageError(index)\"></el-image>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"name\">\r\n\t\t\t\t\t\t\t\t<p :title=\"item.goods_name\">{{ item.goods_name }}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<!-- 价格展示区 -->\r\n\t\t\t\t\t\t\t<div class=\"price\">\r\n\t\t\t\t\t\t\t\t<!-- 价格 -->\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>秒杀价</span>\r\n\t\t\t\t\t\t\t\t\t\t<span>￥</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"main_price\">{{ item.seckill_price }}</span>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<span class=\"primary_price\">￥{{ item.price }}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<el-button v-if=\"seckillIndex == index && timeList[index].isNow\">立即抢购</el-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"pager\">\r\n\t\t\t\t<el-pagination background :pager-count=\"5\" :total=\"total\" prev-text=\"上一页\" next-text=\"下一页\" :current-page.sync=\"currentPage\"\r\n\t\t\t\t :page-size.sync=\"pageSize\" @size-change=\"handlePageSizeChange\" @current-change=\"handleCurrentPageChange\"\r\n\t\t\t\t hide-on-single-page></el-pagination>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"!timeList || !goodsList\" class=\"empty-wrap\">\r\n\t\t\t<div class=\"ns-text-align\">暂无正在进行秒杀的商品，去首页看看吧</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport list from \"./list.js\"\r\n\texport default {\r\n\t\tname: \"seckill\",\r\n\t\tcomponents: {},\r\n\t\tmixins: [list]\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t@import \"./list.scss\";\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n\t.seckill-time {\r\n\t\t.el-tabs__nav-wrap {\r\n\t\t\theight: 56px;\r\n\r\n\t\t\t.el-tabs__nav {\r\n\t\t\t\theight: 56px;\r\n\t\t\t}\r\n\r\n\t\t\t.el-tabs__nav-next,\r\n\t\t\t.el-tabs__nav-prev {\r\n\t\t\t\tline-height: 56px;\r\n\t\t\t}\r\n\r\n\t\t\t.el-tabs__item {\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\theight: 56px;\r\n\t\t\t\tpadding: 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.el-tabs__nav-wrap::after {\r\n\t\t\theight: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.ns-seckill {\r\n\t\t.el-carousel {\r\n\t\t\t.el-image__inner {\r\n\t\t\t\twidth: auto;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.el-carousel__arrow--right {\r\n\t\t\tright: 60px;\r\n\t\t}\r\n\r\n\t\t.count-down {\r\n\t\t\tspan {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\twidth: 24px;\r\n\t\t\t\theight: 24px;\r\n\t\t\t\tline-height: 24px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tbackground: #383838;\r\n\t\t\t\tcolor: #ffffff;\r\n\t\t\t\tborder-radius: 2px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=20bbc722&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=20bbc722&prod&lang=scss&scoped=true\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=20bbc722&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20bbc722\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=20bbc722&prod&lang=scss&scoped=true\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=20bbc722&prod&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.msTime.show)?_c('p',[(_vm.msTime.day>0)?_c('span',[_c('span',[_vm._v(_vm._s(_vm.msTime.day))]),_c('i',[_vm._v(_vm._s(_vm.dayTxt))])]):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.msTime.hour))]),_c('i',[_vm._v(_vm._s(_vm.hourTxt))]),_c('span',[_vm._v(_vm._s(_vm.msTime.minutes))]),_c('i',[_vm._v(_vm._s(_vm.minutesTxt))]),_c('span',[_vm._v(_vm._s(_vm.msTime.seconds))]),_c('i',[_vm._v(_vm._s(_vm.secondsTxt))])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <p v-if=\"msTime.show\">\n      <!--<span v-if=\"tipShow\">{{tipText}}:</span>-->\n      <!--<span v-if=\"!tipShow\">{{tipTextEnd}}:</span>-->\n      <span v-if=\"msTime.day>0\"><span>{{msTime.day}}</span><i>{{dayTxt}}</i></span>\n      <span>{{msTime.hour}}</span><i>{{hourTxt}}</i>\n      <span>{{msTime.minutes}}</span><i>{{minutesTxt}}</i>\n      <span>{{msTime.seconds}}</span><i>{{secondsTxt}}</i>\n    </p>\n    <!--<p v-if=\"!msTime.show\">{{endText}}</p>-->\n  </div>\n</template>\n<script>\n  export default {\n    replace: true,\n    data () {\n      return {\n        tipShow: true,\n        msTime: {\t\t\t//倒计时数值\n          show: false,\t\t//倒计时状态\n          day: '',\t\t\t//天\n          hour: '',\t\t//小时\n          minutes: '',\t\t//分钟\n          seconds: ''\t\t//秒\n        },\n        star: '',\t\t\t//活动开始时间\n        end: '',\t\t\t\t//活动结束时间\n        current: '',         //当前时间\n      }\n    },\n    watch: {\n      currentTime: function (val, oldval) {\n        this.gogogo();\n      }\n    },\n    props: {\n      //距离开始提示文字\n      tipText: {\n        type: String,\n        default: '距离开始'\n      },\n      //距离结束提示文字\n      tipTextEnd: {\n        type: String,\n        default: '距离结束'\n      },\n      //时间控件ID\n      id: {\n        type: String,\n        default: '1'\n      },\n      //当前时间\n      currentTime: {\n        type: Number\n      },\n      // 活动开始时间\n      startTime: {\n        type: Number\n      },\n      // 活动结束时间\n      endTime: {\n        type: Number\n      },\n      // 倒计时结束显示文本\n      endText: {\n        type: String,\n        default: '已结束'\n      },\n      //自定义显示文字:天\n      dayTxt: {\n        type: String,\n        default: ':'\n      },\n      //自定义显示文字:时\n      hourTxt: {\n        type: String,\n        default: ':'\n      },\n      //自定义显示文字:分\n      minutesTxt: {\n        type: String,\n        default: ':'\n      },\n      secondsTxt: {\n        type: String,\n        default: ':'\n      },\n      //是否开启秒表倒计，未完成\n      secondsFixed: {\n        type: Boolean,\n        default: false\n      },\n    },\n    mounted () {\n      console.log(this)\n      this.gogogo();\n    },\n    methods: {\n      gogogo: function () {\n        //判断是秒还是毫秒\n        this.startTime.toString().length == 10 ? this.star = this.startTime * 1000 : this.star = this.startTime;\n        this.endTime.toString().length == 10 ? this.end = this.endTime * 1000 : this.end = this.endTime;\n        if (this.currentTime) {\n          this.currentTime.toString().length == 10 ? this.current = this.currentTime * 1000 : this.current = this.currentTime;\n        } else {\n          this.current = ( new Date() ).getTime();\n        }\n\n        if (this.end < this.current) {\n          /**\n           * 结束时间小于当前时间 活动已结束\n           */\n          this.msTime.show = false;\n          this.end_message();\n        }\n        else if (this.current < this.star) {\n          /**\n           * 当前时间小于开始时间 活动尚未开始\n           */\n          this.$set(this, 'tipShow', true);\n          setTimeout(() => {\n            this.runTime(this.star, this.current, this.start_message);\n          }, 1);\n        }\n        else if (this.end > this.current && this.star < this.current || this.star == this.current) {\n          /**\n           * 结束时间大于当前并且开始时间小于当前时间，执行活动开始倒计时\n           */\n          this.$set(this, 'tipShow', false);\n          this.msTime.show = true;\n          this.$emit('start_callback', this.msTime.show);\n          setTimeout(() => {\n            this.runTime(this.end, this.star, this.end_message, true)\n          }, 1);\n        }\n      },\n      runTime (startTime, endTime, callFun, type) {\n        let msTime = this.msTime;\n        let timeDistance = startTime - endTime;\n        if (timeDistance > 0) {\n          this.msTime.show = true;\n          msTime.day = Math.floor(timeDistance / 86400000);\n          timeDistance -= msTime.day * 86400000;\n          msTime.hour = Math.floor(timeDistance / 3600000);\n          timeDistance -= msTime.hour * 3600000;\n          msTime.minutes = Math.floor(timeDistance / 60000);\n          timeDistance -= msTime.minutes * 60000;\n          //是否开启秒表倒计,未完成\n//                    this.secondsFixed ? msTime.seconds = new Number(timeDistance / 1000).toFixed(2) : msTime.seconds = Math.floor( timeDistance / 1000 ).toFixed(0);\n          msTime.seconds = Math.floor(timeDistance / 1000).toFixed(0);\n          timeDistance -= msTime.seconds * 1000;\n\n          if (msTime.hour < 10) {\n            msTime.hour = \"0\" + msTime.hour;\n          }\n          if (msTime.minutes < 10) {\n            msTime.minutes = \"0\" + msTime.minutes;\n          }\n          if (msTime.seconds < 10) {\n            msTime.seconds = \"0\" + msTime.seconds;\n          }\n          let _s = Date.now();\n          let _e = Date.now();\n          let diffPerFunc = _e - _s;\n          setTimeout(() => {\n            if (type) {\n              this.runTime(this.end, endTime += 1000, callFun, true);\n            } else {\n              this.runTime(this.star, endTime += 1000, callFun);\n            }\n          }, 1000 - diffPerFunc)\n        }\n        else {\n          callFun();\n        }\n      },\n      start_message () {\n        this.$set(this, 'tipShow', false);\n        this.$emit('start_callback', this.msTime.show);\n        setTimeout(() => {\n          this.runTime(this.end, this.star, this.end_message, true)\n        }, 1);\n      },\n      end_message(){\n        this.msTime.show = false;\n        if (this.currentTime <= 0) {\n          return;\n        }\n        this.$emit('end_callback', this.msTime.show);\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../cache-loader/dist/cjs.js??ref--13-0!../../thread-loader/dist/cjs.js!../../babel-loader/lib/index.js!../../cache-loader/dist/cjs.js??ref--1-0!../../vue-loader/lib/index.js??vue-loader-options!./vue2-countdown.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../cache-loader/dist/cjs.js??ref--13-0!../../thread-loader/dist/cjs.js!../../babel-loader/lib/index.js!../../cache-loader/dist/cjs.js??ref--1-0!../../vue-loader/lib/index.js??vue-loader-options!./vue2-countdown.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./vue2-countdown.vue?vue&type=template&id=5c858bb0\"\nimport script from \"./vue2-countdown.vue?vue&type=script&lang=js\"\nexport * from \"./vue2-countdown.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}