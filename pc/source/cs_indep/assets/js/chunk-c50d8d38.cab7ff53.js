(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c50d8d38"],{3698:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.yes,expression:"yes"}],staticClass:"null-page"}),t("el-card",{staticClass:"box-card order-list"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("我的订单")])]),t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.orderStatus,callback:function(t){e.orderStatus=t},expression:"orderStatus"}},[t("el-tab-pane",{attrs:{label:"全部订单",name:"all"}}),t("el-tab-pane",{attrs:{label:"待付款",name:"waitpay"}}),t("el-tab-pane",{attrs:{label:"待发货",name:"waitsend"}}),t("el-tab-pane",{attrs:{label:"待收货",name:"waitconfirm"}}),t("el-tab-pane",{attrs:{label:"待评价",name:"waitrate"}})],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("nav",[t("li",[e._v("商品信息")]),t("li",[e._v("单价")]),t("li",[e._v("数量")]),t("li",[e._v("实付款")]),t("li",[e._v("订单状态")]),t("li",[e._v("操作")])]),e.orderList.length>0?t("div",{staticClass:"list"},e._l(e.orderList,(function(r,a){return t("div",{key:a,staticClass:"item"},[t("div",{staticClass:"head"},[t("span",{staticClass:"create-time"},[e._v(e._s(e.$util.timeStampTurnTime(r.create_time)))]),t("span",{staticClass:"order-no"},[e._v("订单号："+e._s(r.order_no))]),t("router-link",{attrs:{to:"/shop-"+r.site_id,target:"_blank"}},[e._v(e._s(r.site_name))]),t("span",{staticClass:"order-type"},[e._v(e._s(r.order_type_name))])],1),e._l(r.order_goods,(function(s,i){return t("ul",{key:i},[t("li",[t("div",{staticClass:"img-wrap",on:{click:function(t){return e.$router.pushToTab("/sku-"+s.sku_id)}}},[t("img",{attrs:{src:e.$img(s.sku_image,{size:"mid"})},on:{error:function(t){return e.imageError(a,i)}}})]),t("div",{staticClass:"info-wrap",on:{click:function(t){return e.$router.pushToTab("/sku-"+s.sku_id)}}},[t("h5",[e._v(e._s(s.sku_name))])])]),t("li",[t("span",[e._v("￥"+e._s(s.price))])]),t("li",[t("span",[e._v(e._s(s.num))])]),t("li",[t("span",[e._v("￥"+e._s(r.pay_money))])]),0==i?[t("li",[t("span",{staticClass:"ns-text-color"},[e._v(e._s(r.order_status_name))]),t("el-link",{attrs:{underline:!1},on:{click:function(t){return e.orderDetail(r)}}},[e._v("订单详情")])],1),t("li",[r.action.length>0?[1==r.is_evaluate?t("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.operation("memberOrderEvaluation",r)}}},[0==r.evaluate_status?[e._v(" 评价 ")]:1==r.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e(),e._l(r.action,(function(a,s){return t("el-button",{key:s,attrs:{type:"primary",size:"mini",plain:"orderPay"!=a.action},on:{click:function(t){return e.operation(a.action,r)}}},[e._v(" "+e._s(a.title)+" ")])}))]:0==r.action.length&&1==r.is_evaluate?[1==r.is_evaluate?t("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.operation("memberOrderEvaluation",r)}}},[0==r.evaluate_status?[e._v(" 评价 ")]:1==r.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e()]:e._e()],2)]:e._e()],2)}))],2)})),0):e.loading||0!=e.orderList.length?e._e():t("div",{staticClass:"empty-wrap"},[e._v("暂无相关订单")])]),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{background:"","pager-count":5,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-size":e.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},s=[],i=(r("14d9"),r("2f62")),n=r("dea0"),o=r("6554"),d={name:"order_list",components:{},data:()=>({orderStatus:"all",loading:!0,orderList:[],currentPage:1,pageSize:10,total:0,yes:!0}),mixins:[o["a"]],created(){this.orderStatus=this.$route.query.status||"all",this.getOrderList()},computed:{...Object(i["b"])(["defaultGoodsImage"])},mounted(){let e=this;setTimeout((function(){e.yes=!1}),300)},methods:{handleClick(e,t){this.currentPage=1,this.orderStatus=e.name,this.refresh()},getOrderList(){Object(n["c"])({page:this.currentPage,page_size:this.pageSize,order_status:this.orderStatus}).then(e=>{let t=[];0==e.code&&e.data&&(t=e.data.list,this.total=e.data.count),this.orderList=t,this.loading=!1}).catch(e=>{this.loading=!1})},handlePageSizeChange(e){this.pageSize=e,this.refresh()},handleCurrentPageChange(e){this.currentPage=e,this.refresh()},refresh(){this.loading=!0,this.getOrderList()},operation(e,t){this.status;switch(e){case"orderPay":this.orderPay(t);break;case"orderClose":this.orderClose(t.order_id,()=>{this.refresh()});break;case"memberTakeDelivery":console.log("9999"),this.orderDelivery(t.order_id,()=>{this.refresh()});break;case"trace":this.$router.push({path:"/member/logistics",query:{order_id:t.order_id}});break;case"memberOrderEvaluation":this.$router.pushToTab({path:"/evaluate",query:{order_id:t.order_id}});break;case"extendTakeDelivery":this.orderExtendDelivery(t,()=>{this.refresh()});break}},orderDetail(e){switch(parseInt(e.order_type)){case 2:this.$router.push({path:"/member/order_detail_pickup",query:{order_id:e.order_id}});break;case 3:this.$router.push({path:"/member/order_detail_local_delivery",query:{order_id:e.order_id}});break;case 4:this.$router.push({path:"/member/order_detail_virtual",query:{order_id:e.order_id}});break;default:this.$router.push({path:"/member/order_detail",query:{order_id:e.order_id}});break}},imageError(e,t){this.orderList[e].order_goods[t].sku_image=this.defaultGoodsImage}}},l=d,u=(r("f881"),r("2877")),c=Object(u["a"])(l,a,s,!1,null,"6fa9f954",null);t["default"]=c.exports},5071:function(e,t,r){},6554:function(e,t,r){"use strict";r("14d9");var a=r("dea0");t["a"]={methods:{orderPay(e){0==e.adjust_money?Object(a["e"])({order_ids:e.order_id}).then(e=>{e.code>=0?this.$router.push({path:"/pay",query:{code:e.data}}):this.$message({message:e.message,type:"warning"})}):this.$confirm("商家已将支付金额调整为"+e.pay_money+"元，是否继续支付？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(a["e"])({order_ids:e.order_id}).then(e=>{e.code>=0?this.$router.push({path:"/pay",query:{code:e.data}}):this.$message({message:e.message,type:"warning"})})})},orderClose(e,t){this.$confirm("您确定要关闭该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(a["a"])({order_id:e}).then(e=>{this.$message({message:"订单关闭成功",type:"success"}),"function"==typeof t&&t()})})},orderDelivery(e,t){this.$confirm("您确定已经收到货物了吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(a["f"])({order_id:e}).then(e=>{this.$message({message:"订单收货成功",type:"success"}),"function"==typeof t&&t()})})},orderExtendDelivery(e,t){this.$confirm("您确定延长收货时间吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(a["g"])({order_id:e.order_id}).then(e=>{e.code>=0?this.$message({message:"订单延长收货成功",type:"success"}):this.$message({message:e.message,type:"warning"}),"function"==typeof t&&t()})})}}}},f881:function(e,t,r){"use strict";r("5071")}}]);
//# sourceMappingURL=chunk-c50d8d38.cab7ff53.js.map