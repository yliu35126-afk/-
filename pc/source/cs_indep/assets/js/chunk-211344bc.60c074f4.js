(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-211344bc"],{"08f9":function(t,s,e){"use strict";e.d(s,"e",(function(){return a})),e.d(s,"a",(function(){return o})),e.d(s,"d",(function(){return r})),e.d(s,"b",(function(){return n})),e.d(s,"c",(function(){return l})),e.d(s,"f",(function(){return c}));var i=e("751a");function a(t){return Object(i["a"])({url:"/seckill/api/ordercreate/payment",data:t,forceLogin:!0})}function o(t){return Object(i["a"])({url:"/seckill/api/ordercreate/calculate",data:t,forceLogin:!0})}function r(t){return Object(i["a"])({url:"/seckill/api/ordercreate/create",data:t,forceLogin:!0})}function n(t){return Object(i["a"])({url:"/seckill/api/seckillgoods/page",data:t})}function l(t){return Object(i["a"])({url:"/seckill/api/seckillgoods/detail",data:t})}function c(t){return Object(i["a"])({url:"/seckill/api/seckill/lists",data:t})}},"0dec":function(t,s,e){t.exports=e("f292")},2428:function(t,s,e){},"37f9":function(t,s,e){"use strict";e.r(s);e("14d9");var i=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"index-wrap",style:{background:t.backgroundColor}},[s("div",{staticClass:"index"},[s("div",{staticClass:"banner"},[s("el-carousel",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAd,expression:"loadingAd"}],attrs:{height:"500px",arrow:"hover"},on:{change:t.handleChange}},t._l(t.adList,(function(e){return s("el-carousel-item",{key:e.adv_id},[s("el-image",{attrs:{src:t.$img(e.adv_image),fit:"cover"},on:{click:function(s){return t.$router.pushToTab(e.adv_url.url)}}})],1)})),1)],1),s("div",{staticClass:"news"},[s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"avtar"},[s("router-link",{attrs:{to:"/member/info"}},[t.member.headimg?s("img",{attrs:{src:t.$img(t.member.headimg)},on:{error:function(s){t.member.headimg=t.defaultHeadImage}}}):s("img",{attrs:{src:t.$img(t.defaultHeadImage)}})])],1),t.member?s("div",{staticClass:"memeber-name"},[t._v(t._s(t.member.nickname))]):s("div",{staticClass:"btn"},[s("router-link",{staticClass:"login",attrs:{to:"/login"}},[t._v("登录")]),s("router-link",{staticClass:"register",attrs:{to:"/register"}},[t._v("注册")])],1)]),s("div",{staticClass:"notice-wrap"},[s("div",{staticClass:"notice"},[s("div",{staticClass:"notice-name"},[t._v("商城资讯")]),s("router-link",{staticClass:"notice-more",attrs:{to:"/cms/notice"}},[t._v(" 更多 "),s("i",{staticClass:"iconfont iconarrow-right"})])],1),t._l(t.noticeList,(function(e){return s("div",{key:e.id,staticClass:"item"},[s("router-link",{attrs:{to:"/cms/notice-"+e.id,target:"_blank",tag:"a"}},[s("div",{staticClass:"notice-title"},[t._v(t._s(e.title))])])],1)}))],2),s("div",{staticClass:"xian"}),s("div",{staticClass:"server-wrap"},[s("div",{staticClass:"server-title"},[t._v("商城服务")]),s("div",{staticClass:"item-wrap"},[s("div",{staticClass:"item"},[s("a",{attrs:{href:t.shopApplyUrl,target:"_blank"}},[s("i",{staticClass:"iconfont iconshang"}),s("span",[t._v("招商入驻")])])]),s("div",{staticClass:"item"},[s("a",{attrs:{href:t.shopCenterUrl,target:"_blank"}},[s("i",{staticClass:"iconfont iconshangjiazhongxin"}),s("span",[t._v("商家中心")])])]),1==t.addonIsExit.store?s("div",{staticClass:"item"},[s("a",{attrs:{href:t.storeUrl,target:"_blank"}},[s("i",{staticClass:"iconfont iconshangjiazhongxin-"}),s("span",[t._v("门店管理")])])]):t._e()])])])])]),s("div",{staticClass:"content"},[1==t.addonIsExit.coupon&&t.couponList.length>0&&(0==t.city.id||!t.city)?s("div",{staticClass:"content-div"},[s("div",{staticClass:"coupon"},[s("div",{staticClass:"coupon-title"},[s("p",{staticClass:"coupon-font"},[t._v("领券中心")]),s("p",{staticClass:"coupon-en"},[t._v("coupon")]),s("p",{staticClass:"coupon-more",on:{click:function(s){return t.$router.push("/coupon")}}},[s("span",[t._v("更多")]),s("i",{staticClass:"iconfont iconarrow-right"})])]),s("ul",{staticClass:"coupon-list"},t._l(t.couponList,(function(e,i){return s("li",{key:i},[s("p",{staticClass:"coupon-price ns-text-color"},[t._v(" ￥ "),s("span",[t._v(t._s(e.money))])]),s("p",{staticClass:"coupon-term"},[t._v("满"+t._s(e.at_least)+"可用")]),s("p",{staticClass:"coupon-receive ns-text-color",on:{click:function(s){return t.couponTap(e,i)}}},[0==e.useState?s("span",[t._v("立即领取")]):s("span",[t._v("去使用")]),s("i",{staticClass:"iconfont iconarrow-right"})])])})),0)])]):t._e(),t.adLeftList.length>0||t.adRightList.length>0?s("div",{staticClass:"content-div"},[s("div",{staticClass:"ad-wrap"},[s("div",{staticClass:"ad-big"},t._l(t.adLeftList,(function(e,i){return s("div",{key:i,staticClass:"ad-big-img"},[s("el-image",{attrs:{src:t.$img(e.adv_image),fit:"cover"},on:{error:function(s){return t.adLeftImageError(i)},click:function(s){return t.$router.pushToTab(e.adv_url.url)}}})],1)})),0),s("div",{staticClass:"ad-small"},t._l(t.adRightList,(function(e,i){return s("div",{key:i,staticClass:"ad-small-img"},[s("el-image",{attrs:{src:t.$img(e.adv_image),fit:"cover"},on:{error:function(s){return t.adRightImageError(i)},click:function(s){return t.$router.pushToTab(e.adv_url.url)}}})],1)})),0)])]):t._e(),1==t.addonIsExit.seckill&&t.listData.length>0&&(0==t.city.id||!t.city)?s("div",{staticClass:"content-div"},[s("div",{staticClass:"seckill-wrap"},[s("div",{staticClass:"seckill-time"},[s("div",{staticClass:"seckill-time-left"},[s("i",{staticClass:"iconfont iconmiaosha1 ns-text-color"}),s("span",{staticClass:"seckill-time-title ns-text-color"},[t._v("限时秒杀")]),s("span",[t._v(t._s(t.seckillText))]),s("count-down",{staticClass:"count-down",attrs:{currentTime:t.seckillTimeMachine.currentTime,startTime:t.seckillTimeMachine.startTime,endTime:t.seckillTimeMachine.endTime,dayTxt:"：",hourTxt:"：",minutesTxt:"：",secondsTxt:""},on:{start_callback:function(s){return t.countDownS_cb()},end_callback:function(s){return t.countDownE_cb()}}})],1),s("div",{staticClass:"seckill-time-right",on:{click:function(s){return t.$router.push("/promotion/seckill")}}},[s("span",[t._v("更多商品")]),s("i",{staticClass:"iconfont iconarrow-right"})])]),s("div",{staticClass:"seckill-content",on:{click:function(s){return t.clickProps(s)}}},[s("vue-seamless-scroll",{staticClass:"seamless-warp2",attrs:{data:t.listData,"class-option":t.optionLeft}},[s("ul",{staticClass:"item",style:{width:250*t.listData.length+"px"}},t._l(t.listData,(function(e,i){return s("li",{key:i},[s("div",{staticClass:"seckill-goods",attrs:{"data-obj":JSON.stringify(e)}},[s("div",{staticClass:"seckill-goods-img",attrs:{"data-obj":JSON.stringify(e)}},[s("img",{attrs:{src:t.goodsImg(e.goods_image),"data-obj":JSON.stringify(e)},on:{error:function(s){return t.imageError(i)}}})]),s("p",{attrs:{"data-obj":JSON.stringify(e)}},[t._v(t._s(e.goods_name))]),s("div",{staticClass:"seckill-price-wrap",attrs:{"data-obj":JSON.stringify(e)}},[s("p",{staticClass:"ns-text-color",attrs:{"data-obj":JSON.stringify(e)}},[t._v(" ￥ "),s("span",{attrs:{"data-obj":JSON.stringify(e)}},[t._v(t._s(e.seckill_price))])]),s("p",{staticClass:"primary-price",attrs:{"data-obj":JSON.stringify(e)}},[t._v("￥"+t._s(e.price))])])])])})),0)])],1)])]):t._e(),0!=t.city.id&&t.city?t._e():s("div",{staticClass:"content-div"},[s("div",{staticClass:"floor"},t._l(t.floorList,(function(e,i){return s("div",{key:i,staticClass:"floor_item"},["floor-style-1"==e.block_name?s("floor-style-1",{attrs:{data:e}}):t._e(),"floor-style-2"==e.block_name?s("floor-style-2",{attrs:{data:e}}):t._e(),"floor-style-3"==e.block_name?s("floor-style-3",{attrs:{data:e}}):t._e()],1)})),0)]),s("div",[s("div",{staticClass:"more"},[s("router-link",{attrs:{to:"/list"}},[s("span",[t._v("更多")]),s("i",{staticClass:"iconfont iconarrow-right"})])],1),t.goodsList.length?s("div",{staticClass:"goods-info"},t._l(t.goodsList,(function(e,i){return s("div",{key:e.goods_id,staticClass:"item",on:{click:function(s){return t.$router.pushToTab({path:"/sku-"+e.sku_id})}}},[s("img",{staticClass:"img-wrap",attrs:{src:t.$img(e.sku_image,{size:"mid"})},on:{error:function(s){return t.imageError(i)}}}),s("div",{staticClass:"price-wrap"},[s("div",{staticClass:"price"},[s("p",[t._v("￥")]),t._v(" "+t._s(e.discount_price)+" ")]),s("div",{staticClass:"market-price"},[t._v("￥"+t._s(e.market_price))])]),s("div",{staticClass:"goods-name"},[t._v(t._s(e.goods_name))]),s("div",{staticClass:"sale-num"},[s("p",[t._v(t._s(e.sale_num||0))]),t._v("人付款 ")]),s("div",{staticClass:"saling"},[1==e.is_free_shipping?s("div",{staticClass:"free-shipping"},[t._v("包邮")]):t._e(),1==e.promotion_type?s("div",{staticClass:"promotion-type"},[t._v("限时折扣")]):t._e()])])})),0):t._e()]),t.floatLayer.is_show&&0==t.city.id?s("div",{staticClass:"floatLayer-wrap"},[s("div",{staticClass:"floatLayer"},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{src:t.$img(t.floatLayer.img_url)},on:{click:function(s){return t.$router.pushToTab(t.floatLayer.link.url)}}})]),s("i",{staticClass:"el-icon-circle-close",on:{click:t.closeFloat}})])]):t._e(),s("div",{staticClass:"fixed-box",style:{display:t.isShow?"block":"none"}},[s("div",{staticClass:"header-search"},[s("el-row",[s("el-col",{attrs:{span:6}},[s("router-link",{staticClass:"logo-wrap",attrs:{to:"/"}},[s("img",{attrs:{src:t.$img(t.siteInfo.logo)}})])],1),s("el-col",{attrs:{span:13}},[s("div",{staticClass:"in-sousuo"},[s("div",{staticClass:"sousuo-box"},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.searchTypeText)+" "),s("i",{staticClass:"el-icon-arrow-down"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"goods"}},[t._v("商品")]),s("el-dropdown-item",{attrs:{command:"shop"}},[t._v("店铺")])],1)],1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:t.defaultSearchWords,maxlength:"50"},domProps:{value:t.keyword},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.search.apply(null,arguments)},input:function(s){s.target.composing||(t.keyword=s.target.value)}}}),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.search}},[t._v("搜索")])],1)])]),s("el-col",{attrs:{span:5}},[s("div",{staticClass:"cart-wrap"},[s("router-link",{staticClass:"cart",attrs:{to:"/cart"}},[s("span",[t._v("我的购物车")]),t.cartCount?s("el-badge",{attrs:{value:t.cartCount,type:"primary"}},[s("i",{staticClass:"iconfont icongouwuche"})]):s("i",{staticClass:"iconfont icongouwuche"})],1)],1)])],1)],1)])])])},a=[],o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"floor-style-1"},[t.data.value.title.value.text?s("div",{staticClass:"head-wrap"},[s("h2",{style:{color:t.data.value.title.value.color},on:{click:function(s){return t.$router.pushToTab(t.data.value.title.value.link.url)}}},[t._v(t._s(t.data.value.title.value.text))])]):t._e(),s("div",{staticClass:"body-wrap"},[t.data.value.leftImg.value.url?s("div",{staticClass:"left-wrap"},[s("img",{attrs:{src:t.$img(t.data.value.leftImg.value.url)},on:{click:function(s){return t.$router.pushToTab(t.data.value.leftImg.value.link.url)}}})]):t._e(),s("ul",{staticClass:"goods-list"},t._l(t.data.value.goodsList.value.list,(function(e,i){return s("li",{key:i,attrs:{title:e.goods_name},on:{click:function(s){return t.goSku(e.sku_id)}}},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{alt:"商品图片",src:t.$img(e.sku_image)},on:{error:function(s){return t.imageError(i)}}})]),s("h3",[t._v(t._s(e.goods_name))]),s("p",{staticClass:"desc"},[t._v(t._s(e.introduction))]),s("p",{staticClass:"price"},[s("span",{staticClass:"num"},[t._v(t._s(e.discount_price)+"元")]),s("del",[t._v(t._s(e.market_price)+"元")])])])})),0)]),t.data.value.bottomImg.value.url?s("div",{staticClass:"bottom-wrap"},[s("img",{attrs:{src:t.$img(t.data.value.bottomImg.value.url)},on:{click:function(s){return t.$router.pushToTab(t.data.value.bottomImg.value.link.url)}}})]):t._e()])},r=[],n=e("2f62"),l={name:"floor-style-1",props:{data:{type:Object}},data(){return{}},created(){},computed:{...Object(n["b"])(["defaultGoodsImage"])},methods:{goSku(t){this.$router.pushToTab("/sku-"+t)},imageError(t){this.data.value.goodsList.value.list[t].sku_image=this.defaultGoodsImage}}},c=l,u=(e("50e4"),e("2877")),d=Object(u["a"])(c,o,r,!1,null,null,null),h=d.exports,m=function(){var t=this,s=t._self._c;return s("div",{staticClass:"floor-style-2"},[t.data.value.title.value.text?s("div",{staticClass:"head-wrap"},[s("h2",{style:{color:t.data.value.title.value.color},on:{click:function(s){return t.$router.pushToTab(t.data.value.title.value.link.url)}}},[t._v(t._s(t.data.value.title.value.text))]),s("p",{style:{color:t.data.value.subTitle.value.color},on:{click:function(s){return t.$router.pushToTab(t.data.value.subTitle.value.link.url)}}},[t._v(t._s(t.data.value.subTitle.value.text))])]):t._e(),s("div",{staticClass:"body-wrap"},[s("ul",{staticClass:"goods-list"},t._l(t.data.value.goodsList.value.list,(function(e,i){return s("li",{key:i,attrs:{title:e.goods_name},on:{click:function(s){return t.goSku(e.sku_id)}}},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{alt:"商品图片",src:t.$img(e.sku_image)},on:{error:function(s){return t.imageError(i)}}})]),s("h3",[t._v(t._s(e.goods_name))]),s("p",{staticClass:"desc"},[t._v(t._s(e.introduction))]),s("p",{staticClass:"price"},[s("span",{staticClass:"num"},[t._v(t._s(e.discount_price)+"元")]),s("del",[t._v(t._s(e.market_price)+"元")])])])})),0)]),t.data.value.bottomImg.value.url?s("div",{staticClass:"bottom-wrap"},[s("img",{attrs:{src:t.$img(t.data.value.bottomImg.value.url)},on:{click:function(s){return t.$router.pushToTab(t.data.value.bottomImg.value.link.url)}}})]):t._e()])},p=[],g={name:"floor-style-2",props:{data:{type:Object}},data(){return{}},created(){},computed:{...Object(n["b"])(["defaultGoodsImage"])},methods:{goSku(t){this.$router.pushToTab("/sku-"+t)},imageError(t){this.data.value.goodsList.value.list[t].sku_image=this.defaultGoodsImage}}},v=g,_=(e("5378"),Object(u["a"])(v,m,p,!1,null,null,null)),f=_.exports,k=function(){var t=this,s=t._self._c;return s("div",{staticClass:"floor-style-3"},[s("div",{staticClass:"item-wrap"},[s("div",{staticClass:"head-wrap"},[t.data.value.title.value.text?s("div",{staticClass:"title-name"},[s("span",{style:{backgroundColor:t.data.value.title.value.color}}),s("h2",{style:{color:t.data.value.title.value.color},on:{click:function(s){return t.$router.pushToTab(t.data.value.title.value.link.url)}}},[t._v(t._s(t.data.value.title.value.text))])]):t._e(),s("div",{staticClass:"category-wrap"},t._l(t.data.value.categoryList.value.list,(function(e,i){return s("li",{key:i},[s("router-link",{attrs:{target:"_blank",to:{path:"/list",query:{category_id:e.category_id,level:e.level}}}},[t._v(t._s(e.category_name))])],1)})),0)]),s("div",{staticClass:"body-wrap"},[s("div",{staticClass:"left-img-wrap"},[t.data.value.leftImg.value.url?s("img",{attrs:{src:t.$img(t.data.value.leftImg.value.url)},on:{click:function(s){return t.$router.pushToTab(t.data.value.leftImg.value.link.url)}}}):t._e()]),s("ul",{staticClass:"right-goods-wrap"},t._l(t.data.value.rightGoodsList.value.list,(function(e,i){return s("li",{key:i,on:{click:function(s){return t.goSku(e.sku_id)}}},[s("h4",[t._v(t._s(e.goods_name))]),s("p",{staticClass:"ns-text-color"},[t._v(t._s(e.introduction))]),s("div",{staticClass:"img-wrap"},[s("img",{attrs:{alt:"商品图片",src:t.$img(e.sku_image)},on:{error:function(s){return t.imageErrorRight(i)}}})])])})),0),s("ul",{staticClass:"bottom-goods-wrap"},t._l(t.data.value.bottomGoodsList.value.list,(function(e,i){return s("li",{key:i,on:{click:function(s){return t.goSku(e.sku_id)}}},[s("div",{staticClass:"info-wrap"},[s("h4",[t._v(t._s(e.goods_name))]),s("p",{staticClass:"ns-text-color"},[t._v(t._s(e.introduction))])]),s("div",{staticClass:"img-wrap"},[s("img",{attrs:{alt:"商品图片",src:t.$img(e.sku_image)},on:{error:function(s){return t.imageErrorBottom(i)}}})])])})),0),s("ul",{staticClass:"brand-wrap"},t._l(t.data.value.brandList.value.list,(function(e,i){return s("li",{key:i,on:{click:function(s){return t.$router.pushToTab({path:"/list",query:{brand_id:e.brand_id}})}}},[s("img",{attrs:{alt:"品牌图片",src:t.$img(e.image_url)}})])})),0)])])])},y=[],b={name:"floor-style-3",props:{data:{type:Object}},data(){return{}},created(){},computed:{...Object(n["b"])(["defaultGoodsImage"])},methods:{goSku(t){this.$router.pushToTab("/sku-"+t)},imageErrorRight(t){this.data.value.rightGoodsList.value.list[t].sku_image=this.defaultGoodsImage},imageErrorBottom(t){this.data.value.bottomGoodsList.value.list[t].sku_image=this.defaultGoodsImage}}},C=b,T=(e("8e82"),Object(u["a"])(C,k,y,!1,null,null,null)),w=T.exports,L=e("01ea"),x=(e("7401"),e("37cb")),S=e("643a"),$=e("e6f0"),I=e("cbfe"),O=e("08f9"),j=e("a2a9"),E=e("0dec"),N=e.n(E),A={name:"index",components:{CountDown:N.a},data:()=>({loadingAd:!0,loadingFloor:!0,adList:[],adLeftList:[],adRightList:[],noticeList:[],couponList:[],floorList:[],floatLayer:{is_show:!1,link:{url:""}},indexFloatLayerNum:0,shopApplyUrl:L["a"].baseUrl+"/shop/login/register",shopCenterUrl:L["a"].baseUrl+"/shop/index/index",storeUrl:L["a"].baseUrl+"/store",isSub:!1,siteId:0,listData:[],seckillTimeMachine:{currentTime:0,startTime:0,endTime:0},seckillText:"距离结束",backgroundColor:"",searchType:"goods",searchTypeText:"商品",keyword:"",defaultSearchWords:"",isShow:!1,goodsList:[]}),watch:{searchType(){this.searchTypeText="goods"==this.searchType?"商品":"店铺"}},created(){console.log("gh",this.addonIsExit),console.log("gh",this.city),this.getAdList(),this.getNotice(),this.getBigAdList(),this.getSmallAdList(),this.city.id>0?this.getIndexGoodsList():(this.getFloors(),this.getFloatLayer(),this.addonIsExit&&1==this.addonIsExit.seckill&&this.getTimeList(),this.getCanReceiveCouponQuery()),this.$store.dispatch("site/siteInfo"),this.getDefaultSearchWords()},mounted(){window.addEventListener("scroll",this.handleScroll)},computed:{...Object(n["b"])(["defaultHeadImage","addonIsExit","defaultGoodsImage","member","siteInfo","cartCount","city"]),optionLeft(){return{direction:2,limitMoveNum:1}}},methods:{clickProps(t){if(!t.target.dataset.obj)return;let s=JSON.parse(t.target.dataset.obj);this.$router.pushToTab("/promotion/seckill-"+s.id)},countDownS_cb(){},countDownE_cb(){this.seckillText="活动已结束"},getIndexGoodsList(){Object(j["h"])({}).then(t=>{this.goodsList=t.data.list}).catch(t=>{})},getAdList(){Object(x["a"])({keyword:"NS_PC_INDEX"}).then(t=>{this.adList=t.data.adv_list;for(let s=0;s<this.adList.length;s++)this.adList[s].adv_url&&(this.adList[s].adv_url=JSON.parse(this.adList[s].adv_url));this.backgroundColor=this.adList[0].background,this.loadingAd=!1}).catch(t=>{this.loadingAd=!1})},handleChange(t,s){this.backgroundColor=this.adList[t].background},goodsImg(t){let s=t.split(",");return s[0]?this.$util.img(s[0],{size:"mid"}):this.defaultGoodsImage},getBigAdList(){Object(x["a"])({keyword:"NS_PC_INDEX_MID_LEFT"}).then(t=>{this.adLeftList=t.data.adv_list;for(let s=0;s<this.adLeftList.length;s++)this.adLeftList[s].adv_url&&(this.adLeftList[s].adv_url=JSON.parse(this.adLeftList[s].adv_url));this.loadingAd=!1}).catch(t=>{this.loadingAd=!1})},getSmallAdList(){Object(x["a"])({keyword:"NS_PC_INDEX_MID_RIGHT"}).then(t=>{this.adRightList=t.data.adv_list;for(let s=0;s<this.adRightList.length;s++)this.adRightList[s].adv_url&&(this.adRightList[s].adv_url=JSON.parse(this.adRightList[s].adv_url));this.loadingAd=!1}).catch(t=>{this.loadingAd=!1})},getNotice(){Object(S["b"])({page:1,page_size:5,receiving_type:"web"}).then(t=>{this.noticeList=t.data.list}).catch(t=>t)},getCanReceiveCouponQuery(){Object(I["a"])({activeName:"second",site_id:this.siteId}).then(t=>{let s=t.data;if(this.couponList=[],null!=s){for(let t=0;t<s.list.length;t++)t<5&&this.couponList.push(s.list[t]);this.couponList.forEach(t=>{t.useState=0})}}).catch(t=>{})},receiveCoupon(t,s){if(!this.isSub){this.isSub=!0;var e={site_id:t.site_id,activeName:"second",platformcoupon_type_id:t.platformcoupon_type_id};Object(I["d"])(e).then(s=>{s.data;let e=s.message;0==s.code?(e="领取成功",this.$message({message:e,type:"success"})):this.$message({message:e,type:"warning"});let i=this.couponList;if(1==s.data.is_exist)for(let a=0;a<i.length;a++)i[a].platformcoupon_type_id==t.platformcoupon_type_id&&(i[a].useState=1);else for(let a=0;a<i.length;a++)i[a].platformcoupon_type_id==t.platformcoupon_type_id&&(i[a].useState=2);this.isSub=!1,this.$forceUpdate()}).catch(t=>{"token不存在"==t.message?this.$router.pushToTab("/login"):this.$message.error(t.message),this.isSub=!1})}},couponTap(t,s){0==t.useState?this.receiveCoupon(t,s):this.toGoodsList(t)},toGoodsList(t){1!=t.use_scenario?this.$router.push({path:"/list",query:{platformcouponTypeId:t.platformcoupon_type_id}}):this.$router.push("/list")},getTimeList(){Object(O["f"])().then(t=>{if(0==t.code&&t.data){let s=new Date(1e3*t.timestamp),e=60*s.getHours()*60+60*s.getMinutes()+s.getSeconds();t.data.list.forEach((i,a)=>{if(i.seckill_start_time<=e&&e<i.seckill_end_time){let a=i.id;this.getGoodsList(a);let o=parseInt(s.getTime()/1e3)+(i.seckill_end_time-e);this.seckillTimeMachine={currentTime:t.timestamp,startTime:t.timestamp,endTime:o}}})}}).catch(t=>{this.$message.error(t.message)})},getGoodsList(t){Object(O["b"])({page_size:0,seckill_id:t,site_id:this.siteId}).then(t=>{0==t.code&&t.data.list&&(this.listData=t.data.list)}).catch(t=>{})},imageError(t){this.listData[t].sku_image=this.defaultGoodsImage},adLeftImageError(t){this.adLeftList[t].adv_image=this.defaultGoodsImage},adRightImageError(t){this.adRightList[t].adv_image=this.defaultGoodsImage},getFloors(){Object($["d"])().then(t=>{this.floorList=t.data,console.log(t,"res")}).catch(t=>{console.log(t)})},getFloatLayer(){Object($["c"])().then(t=>{if(0==t.code&&t.data){if(this.floatLayer=t.data,this.floatLayer.link=JSON.parse(this.floatLayer.url),!this.floatLayer.img_url)return;if(1==parseInt(this.floatLayer.number)){var s=this.$store.state.app.indexFloatLayerNum;""!=s&&1!=s||(this.floatLayer.is_show=!0,this.$store.commit("app/SET_FLOAT_LAYER",1))}else 0==parseInt(this.floatLayer.number)&&(this.floatLayer.is_show=!0,this.$store.commit("app/SET_FLOAT_LAYER",0))}}).catch(t=>t)},closeFloat(){this.floatLayer.is_show=!1,this.$forceUpdate(),this.$store.commit("app/SET_FLOAT_LAYER",-1)},handleScroll(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.isShow=t>=680},destroyed(){window.removeEventListener("scroll",this.handleScroll)},getDefaultSearchWords(){Object($["a"])({}).then(t=>{0==t.code&&t.data.words&&(this.defaultSearchWords=t.data.words)})},handleCommand(t){this.searchType=t},search(){"goods"==this.searchType?this.$router.push({path:"/list",query:{keyword:this.keyword}}):this.$router.push({path:"/street",query:{keyword:this.keyword}})}}},D={name:"index",components:{floorStyle1:h,floorStyle2:f,floorStyle3:w},mixins:[A]},G=D,R=(e("6dd3"),e("80ee"),Object(u["a"])(G,i,a,!1,null,"5d861640",null));s["default"]=R.exports},"50e4":function(t,s,e){"use strict";e("6c5d")},5378:function(t,s,e){"use strict";e("e3a3")},"622a":function(t,s,e){},"643a":function(t,s,e){"use strict";e.d(s,"b",(function(){return a})),e.d(s,"a",(function(){return o}));var i=e("751a");function a(t){return Object(i["a"])({url:"/api/notice/page",data:t})}function o(t){return Object(i["a"])({url:"/api/notice/info",data:t})}},"6c5d":function(t,s,e){},"6dd3":function(t,s,e){"use strict";e("622a")},"80ee":function(t,s,e){"use strict";e("be99")},"8e82":function(t,s,e){"use strict";e("2428")},be99:function(t,s,e){},cbfe:function(t,s,e){"use strict";e.d(s,"c",(function(){return a})),e.d(s,"b",(function(){return o})),e.d(s,"a",(function(){return r})),e.d(s,"d",(function(){return n}));var i=e("751a");function a(t){return Object(i["a"])({url:"/coupon/api/coupon/typelists",data:t})}function o(t){return Object(i["a"])({url:"/coupon/api/coupon/receive",data:t,forceLogin:!0})}function r(t){let s="";return s="first"==t.activeName?"/coupon/api/coupon/typepagelists":"/platformcoupon/api/platformcoupon/typepagelists",Object(i["a"])({url:s,data:t})}function n(t){let s="";return s="first"==t.activeName?"/coupon/api/coupon/receive":"/platformcoupon/api/platformcoupon/receive",Object(i["a"])({url:s,data:t,forceLogin:!0})}},e3a3:function(t,s,e){},f292:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",[t.msTime.show?s("p",[t.msTime.day>0?s("span",[s("span",[t._v(t._s(t.msTime.day))]),s("i",[t._v(t._s(t.dayTxt))])]):t._e(),s("span",[t._v(t._s(t.msTime.hour))]),s("i",[t._v(t._s(t.hourTxt))]),s("span",[t._v(t._s(t.msTime.minutes))]),s("i",[t._v(t._s(t.minutesTxt))]),s("span",[t._v(t._s(t.msTime.seconds))]),s("i",[t._v(t._s(t.secondsTxt))])]):t._e()])},a=[],o={replace:!0,data(){return{tipShow:!0,msTime:{show:!1,day:"",hour:"",minutes:"",seconds:""},star:"",end:"",current:""}},watch:{currentTime:function(t,s){this.gogogo()}},props:{tipText:{type:String,default:"距离开始"},tipTextEnd:{type:String,default:"距离结束"},id:{type:String,default:"1"},currentTime:{type:Number},startTime:{type:Number},endTime:{type:Number},endText:{type:String,default:"已结束"},dayTxt:{type:String,default:":"},hourTxt:{type:String,default:":"},minutesTxt:{type:String,default:":"},secondsTxt:{type:String,default:":"},secondsFixed:{type:Boolean,default:!1}},mounted(){console.log(this),this.gogogo()},methods:{gogogo:function(){10==this.startTime.toString().length?this.star=1e3*this.startTime:this.star=this.startTime,10==this.endTime.toString().length?this.end=1e3*this.endTime:this.end=this.endTime,this.currentTime?10==this.currentTime.toString().length?this.current=1e3*this.currentTime:this.current=this.currentTime:this.current=(new Date).getTime(),this.end<this.current?(this.msTime.show=!1,this.end_message()):this.current<this.star?(this.$set(this,"tipShow",!0),setTimeout(()=>{this.runTime(this.star,this.current,this.start_message)},1)):(this.end>this.current&&this.star<this.current||this.star==this.current)&&(this.$set(this,"tipShow",!1),this.msTime.show=!0,this.$emit("start_callback",this.msTime.show),setTimeout(()=>{this.runTime(this.end,this.star,this.end_message,!0)},1))},runTime(t,s,e,i){let a=this.msTime,o=t-s;if(o>0){this.msTime.show=!0,a.day=Math.floor(o/864e5),o-=864e5*a.day,a.hour=Math.floor(o/36e5),o-=36e5*a.hour,a.minutes=Math.floor(o/6e4),o-=6e4*a.minutes,a.seconds=Math.floor(o/1e3).toFixed(0),o-=1e3*a.seconds,a.hour<10&&(a.hour="0"+a.hour),a.minutes<10&&(a.minutes="0"+a.minutes),a.seconds<10&&(a.seconds="0"+a.seconds);let t=Date.now(),r=Date.now(),n=r-t;setTimeout(()=>{i?this.runTime(this.end,s+=1e3,e,!0):this.runTime(this.star,s+=1e3,e)},1e3-n)}else e()},start_message(){this.$set(this,"tipShow",!1),this.$emit("start_callback",this.msTime.show),setTimeout(()=>{this.runTime(this.end,this.star,this.end_message,!0)},1)},end_message(){this.msTime.show=!1,this.currentTime<=0||this.$emit("end_callback",this.msTime.show)}}},r=o,n=e("2877"),l=Object(n["a"])(r,i,a,!1,null,null,null);s["default"]=l.exports}}]);
//# sourceMappingURL=chunk-211344bc.60c074f4.js.map